__require=function e(t,n,o){function a(r,l){if(!n[r]){if(!t[r]){var s=r.split("/");if(s=s[s.length-1],!t[s]){var c="function"==typeof __require&&__require;if(!l&&c)return c(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+r+"'")}}var d=n[r]={exports:{}};t[r][0].call(d.exports,function(e){return a(t[r][1][e]||e)},d,d.exports,e,t,n,o)}return n[r].exports}for(var i="function"==typeof __require&&__require,r=0;r<o.length;r++)a(o[r]);return a}({AdsGroupController:[function(e,t,n){"use strict";cc._RF.push(t,"33cefOnepxNGLHJRft0MgWH","AdsGroupController"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../manager/LoadManager"),a=e("./AdsSetAndScene"),i=e("./AdsGroupPlatformTool"),r=e("./AdsQueue"),l=e("./AdsUnit"),s=e("../manager/SDKManager"),c=e("../Lib/LocalStorage"),d=e("../Lib/Global"),u=cc._decorator,p=u.ccclass,h=(u.property,function(e){function t(){var t=e.call(this)||this;return t.isInShowAds=0,t.lastShowAdType=a.AdsType.Null,t._noPage=!1,t.adsShowTime=0,t.waitReadyTimes=0,t.admobAppid="ca-app-pub-2588266171743528~1826425404",t.waitReadyFunc=null,cc.director.getScheduler().enableForTarget(t),t}var n;return __extends(t,e),n=t,Object.defineProperty(t,"instance",{get:function(){return null==this._instance&&(this._instance=new n),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.adsShowTime=Number(c.default.getItem("adsShowTime","0")),this.initAdsUnit(),this.initAdsQueue(),this.initAdsScene(),this.initAdsPlacementUnits(),i.default.instance.init()},t.prototype.dataFromSever=function(e){this.severData={};var t=e.version.split(",");if(this.adsSet.version>=Number(t[0]))return console.log("versionLower"),void this.init();if(this.adsSet._fromServerInfo=!0,this.adsSet.extraArgs=e.two[this.adsSet.appId],this.adsSet.versionNeed=t[0],this.adsSet.version=t[1],this.adsSet.controlVersion=t[2],e.thr){this.severData.unit=[];for(var n=(c=Object.keys(e.thr)).length,o=0;o<n;o++){var a=c[o],r=e.thr[a].split("{");r[1]='{"id":'+a+',"name":"'+r[0].slice(0,r[0].length-1)+'",'+r[1],this.severData.unit.push(JSON.parse(r[1])),GlobalFun.log("severData[unit]:"+JSON.parse(r[1]))}}if(e.one){this.severData.scence=[];for(n=(c=Object.keys(e.one)).length,o=0;o<n;o++){a=c[o];var l=e.one[a].split(",");if(l){var s={id:l[0],queueID:l[1],queueID_FB:l[2]};this.severData.scence.push(s)}}}if(e.four){this.severData.group=[];var c;for(n=(c=Object.keys(e.four)).length,o=0;o<n;o++){a=c[o];var d=e.four[a];if(d){for(var u="",p=d.idData.split(","),h=p.length,f=0;f<h;f++)u+=f!=h-1?p[f]+"|":p[f];var g=d.idName.split(",")[0],m=d.state;(s=JSON.parse(d.keydata)).id=g,s.type=m,s.order=u,this.severData.group.push(s),GlobalFun.log("severData[group]:"+JSON.stringify(s))}}}this.reloadStaticInfos(),i.default.instance.init()},Object.defineProperty(t.prototype,"adsset",{get:function(){return this.adsSet},enumerable:!0,configurable:!0}),t.prototype.addAdsShowTimes=function(){this.adsShowTime++,c.default.saveItem("adsShowTime",this.adsShowTime.toString())},t.prototype.initAdsSet=function(){var e=o.default.instance.getRes("/json/ads/ads_setting",cc.JsonAsset).json;this.adsSet=new a.AdsSetting(e[0])},t.prototype.initAdsScene=function(){this.adsScene={};for(var e=this.adsSet._fromServerInfo?this.severData.scence:o.default.instance.getRes("/json/ads/ads_scene",cc.JsonAsset).json,t=e.length,n=0;n<t;n++){var i=e[n];i&&(this.adsScene[i.id]=new a.AdsScene(i))}},t.prototype.initAdsQueue=function(){this.adsQueue={};for(var e=this.adsSet._fromServerInfo?this.severData.group:o.default.instance.getRes("/json/ads/ads_group",cc.JsonAsset).json,t=e.length,n=0;n<t;n++){var a=e[n];a&&(this.adsQueue[a.id]=new r.default(a))}},t.prototype.initAdsUnit=function(){this.adsUnit={};for(var e=this.adsSet._fromServerInfo?this.severData.unit:o.default.instance.getRes("/json/ads/ads_units",cc.JsonAsset).json,t=e.length,n=0;n<t;n++){var a=e[n];a&&(this.adsUnit[a.id]=new l.default(a))}},t.prototype.initAdsPlacementUnits=function(){if(this.adsPlacementUnits={},!this.adsSet._fromServerInfo)for(var e=Object.keys(this.adsUnit),t=e.length,n=0;n<t;n++){var o=this.adsUnit[e[n]];o&&(this.adsPlacementUnits[o.placementID]=o)}},t.prototype.getAdsScence=function(e){return this.adsScene&&this.adsScene[e]?this.adsScene[e]:null},t.prototype.getAdsQueue=function(e){return this.adsQueue[e]?this.adsQueue[e]:null},t.prototype.getAdsUnit=function(e){return this.adsUnit[e]?this.adsUnit[e]:null},t.prototype.getPlacementUnits=function(e){for(var t=[],n=Object.keys(this.adsUnit),o=n.length,a=0;a<o;a++){var i=this.adsUnit[n[a]];i&&i.placementID==e&&t.push(i)}return t},t.prototype.reloadStaticInfos=function(){this.adsScene={},this.adsQueue={},this.adsUnit={},this.adsPlacementUnits={},this.initAdsUnit(),this.initAdsQueue(),this.initAdsScene(),this.initAdsPlacementUnits()},t.prototype.loadAllAdsScene=function(){for(var e=Object.keys(this.adsScene),t=e.length,n=0;n<t;n++){var o=this.adsScene[e[n]];if(o&&o.queueID){var a=this.adsQueue[o.queueID];a&&a.load()}}},t.prototype.showAds=function(e,t){GlobalFun.log("showAds11111");var n=this.getAdsScence(e);if(n){var o=this.getAdsQueue(n.queueID);o&&o.showAds(t)}},t.prototype.loadAds=function(e,t,o){void 0===t&&(t=!1),void 0===o&&(o=!1),n.instance._currAdsSceneId=e;var a=this.getAdsScence(e);if(GlobalFun.log("\u52a0\u8f7d\u5e7f\u544a\u573a\u666f:adsScene"+a+"..."+e),a){var i=this.getAdsQueue(a.queueID);GlobalFun.log("\u52a0\u8f7d\u5e7f\u544a\u7b56\u7565adsScene:"+a+"..."+a.queueID),i&&i.load(o,t)}},t.prototype._onPlacementReady=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=null);for(var o=this.getPlacementUnits(e),a=o.length,i=0;i<a;i++){var r=o[i];if(!t&&r.isAutoLoad)return;r._isLoading=!1,r._isReady=!0,r._isFreshReady=!1,r._readyTime=d.default.getTime(),r._adObj=n}},t.prototype._onFreshPlacementReady=function(e){for(var t=this.getPlacementUnits(e),n=t.length,o=0;o<n;o++){t[o]._isFreshReady=!0}},t.prototype._onPlacementLoadError=function(e,t,n){for(var o,a=d.default.getTime(),i=this.getPlacementUnits(e),r=i.length,l=0;l<r;l++){if(o=i[l],!n&&o.isAutoLoad)return;t&&o.noFillWait&&(o._isInNoFill=!0,o._noFillStartTime=a),o._isLoading=!1,o._isReady=!1,o._readyTime=0}},t.prototype._onUnitClosedEvent=function(e,t){var n=this.getAdsUnit(e);n&&this._onUnitClosed(n,t)},t.prototype.checkAllAdsQueueLoadOnInit=function(){for(var e=Object.keys(this.adsQueue),t=e.length,n=0;n<t;n++){var o=this.adsQueue[e[n]];o&&o.checkLoadOnInit()}},t.prototype._onUnitClosed=function(e,t){var n;this.isInShowAds=d.default.getTime();var o=this.getPlacementUnits(e.placementID),a=o.length;GlobalFun.log("closeId "+e.placementID);for(var i=0;i<a;i++)(n=o[i])._isLoading=!1,n._isReady=!1,n._isFreshReady=!1,n._readyTime=0,n._isShown=!1,n._adObj=null,n.destroyOnClosed&&n.destroy();var r=this.getAdsQueue(e._queueID);if(GlobalFun.log("onUnitClosed _queueID1: "+e._queueID),r&&(r._lastOnClosedCallback&&(t&&(this.addAdsShowTimes(),s.default.instance.callJava("adsAskStatistical","(Ljava/lang/String;Ljava/lang/String;)V","adsShowSuccessCountPlatform",this.getPlatformName(e.adsPlatform))),r._lastOnClosedCallback(e,t),r._lastOnClosedCallback=null),r.loadOnclose)){var l=this.getAdsQueue(e._queueID);l&&l.load()}},t.prototype.isSceneAdsReady=function(e,t){var n=this.getAdsScence(e);if(n){var o=this.getAdsQueue(n.queueID);if(o){var a=o.isReady();if(a){var i=o.getAdIndex(a.id);return a&&(i<=t||this.check(i,o.getCurloadAdsIndex(),t,a.price))}return!1}}return!1},t.prototype.check=function(e,t,n,o){return console.log("checkcheckcheck",e,t,n,o),-2==n||(-1==n&&o!=a.AdsPrice.Hide||t>=e)},t.prototype.isHighAdsReady=function(e){var t=this.getAdsScence(e);if(t){var n=this.getAdsQueue(t.queueID);if(n){var o=n.isReady();return o&&o.price<=a.AdsPrice.Middle}}return!1},t.prototype.isScenceInLoad=function(e){var t=this.getAdsScence(e);if(t){var n=this.getAdsQueue(t.queueID);if(n)return n._isLoading}return!1},t.prototype.isScenceAdsInNofill=function(e){var t=this.getAdsScence(e);if(t){var n=this.getAdsQueue(t.queueID);if(n)return n.isAllAdsIsNofill()}return!0},t.prototype.waitAdsReady=function(e,t,n,o,a,i,r,l,c){void 0===i&&(i=null),void 0===r&&(r=null),void 0===l&&(l=0),void 0===c&&(c=-1),s.default.instance.callJava("adsAskStatistical","(Ljava/lang/String;Ljava/lang/String;)V","adsScenceAskCount",e),this._currAdsSceneId=e,this.waitReadyTimes=0;var d=this.getAdsQueue(this.getAdsScence(e).queueID);if(d&&d.nullCurload(),this.isSceneAdsReady(e,c))s.default.instance.callJava("adsAskStatistical","(Ljava/lang/String;Ljava/lang/String;)V","adsScenceShowCount",e),this.schedule(t.bind(o),0,0,l);else{n&&n.bind(o)(),this.cancelWaitAdsReady(),this.waitReadyFunc=function(n){if(this.isSceneAdsReady(e,c))return GlobalFun.log("isScenceInLoad:  "+this.isScenceInLoad(e)),s.default.instance.callJava("adsAskStatistical","(Ljava/lang/String;Ljava/lang/String;)V","adsScenceShowCount",e),t.bind(o)(),void this.unscheduleAllCallbacks();(this.waitReadyTimes>=n||this.isScenceAdsInNofill(e))&&(this.unscheduleAllCallbacks(),this.isSceneAdsReady(e,-2)&&t?(s.default.instance.callJava("adsAskStatistical","(Ljava/lang/String;Ljava/lang/String;)V","adsScenceShowCount",e),t.bind(o)()):i&&i.bind(r)()),this.waitReadyTimes++};var u=0==a?cc.macro.REPEAT_FOREVER:a-1;this.schedule(this.waitReadyFunc.bind(this,u),.5,u,0)}},t.prototype.cancelWaitAdsReady=function(){this.unscheduleAllCallbacks()},t.prototype._onUnitChangeLoading=function(e,t){for(var o=n.instance.getPlacementUnits(e.placementID),a=o.length,i=0;i<a;i++)o[i]._isLoading=t},t.prototype._onUnitChangeDestroy=function(e,t){for(var n=this.getPlacementUnits(e.placementID),o=n.length,a=0;a<o;a++){n[a]._isDestroy=t}},t.prototype._onUnitChangeShown=function(e,t){for(var n=this.getPlacementUnits(e.placementID),o=n.length,a=0;a<o;a++){n[a]._isShown=t}},t.prototype._onUnitClearNoFillState=function(e){for(var t=this.getPlacementUnits(e.placementID),n=t.length,o=0;o<n;o++){var a=t[o];a._isInNoFill=!1,a._noFillStartTime=0}},t.prototype.getAdmobSet=function(){var e="",t="a";if(this.adsSet)for(var n=this.adsSet.extraArgs.split(";"),o=n.length,a=0;a<o;a++)for(var i=n[a].split(":"),r=i.length,l=0;l<r;l++)"VungleVideoPlacements"==i[0]?e=i[1]:"VunglePagePlacements"==i[0]&&(t=i[1]);return this.admobAppid+";"+e+";"+t},Object.defineProperty(t.prototype,"noPage",{get:function(){return this._noPage},set:function(e){this._noPage=e},enumerable:!0,configurable:!0}),t.prototype.getPlatformName=function(e){switch(e){case a.AdsPlatform.Admob:return"Admob";case a.AdsPlatform.Facebook:return"Facebook";case a.AdsPlatform.Applovin:return"Applovin";case a.AdsPlatform.IronSource:return"IronSource";case a.AdsPlatform.Mobvista:return"Mobvista";case a.AdsPlatform.Unity:return"Unity";case a.AdsPlatform.Vungle:return"Vungle"}},t=n=__decorate([p],t)}(cc.Component));n.default=h,cc._RF.pop()},{"../Lib/Global":"Global","../Lib/LocalStorage":"LocalStorage","../manager/LoadManager":"LoadManager","../manager/SDKManager":"SDKManager","./AdsGroupPlatformTool":"AdsGroupPlatformTool","./AdsQueue":"AdsQueue","./AdsSetAndScene":"AdsSetAndScene","./AdsUnit":"AdsUnit"}],AdsGroupPlatformTool:[function(e,t,n){"use strict";cc._RF.push(t,"0c652WGxtNEw45ylU0FCrYp","AdsGroupPlatformTool"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./AdsGroupController"),a=e("../manager/SDKManager"),i=cc._decorator,r=i.ccclass,l=(i.property,function(){function e(){}var t;return t=e,Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new t,window.AdsGroupPlatformTool=this._instance),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){window.ExternalInterface?(window.ExternalInterface.addCallback("onAdsReady",this.onAdsReady),window.ExternalInterface.addCallback("onAdsClosed",this.onAdsClosed),window.ExternalInterface.addCallback("showAdsScene",this.showAdsScene),window.ExternalInterface.addCallback("onAdsLoadError",this.onAdsLoadError)):GlobalFun.log("window[ 'ExternalInterface' ]\u4e3a\u7a7a"),this.m_isPageMode=!0,this.sendAdmobString(),o.default.instance.checkAllAdsQueueLoadOnInit()},e.prototype.isAdsReady=function(e){var t=e.placementID,n=e.adsPlatform,o=e.type;return a.default.instance.callJava("isAdsReady","(IILjava/lang/String;)Z",Number(n),Number(o),t)},e.prototype.loadAds=function(e){GlobalFun.log("loadAds "+e.placementID);var t=e.id,n=e.placementID,o=e.adsPlatform,i=e.type;a.default.instance.callJava("loadAds","(IILjava/lang/String;Ljava/lang/String;)V",Number(o),Number(i),n,t)},e.prototype.showAds=function(e){GlobalFun.log("showAds"+e.placementID);var t=e.id,n=e.placementID,o=e.adsPlatform,i=e.type;a.default.instance.callJava("showAds","(IIILjava/lang/String;)V",Number(o),Number(i),Number(t),n)},e.prototype.sendAdmobString=function(){GlobalFun.log("sendAdmobString"),a.default.instance.callJava("sendAdmobString","(Ljava/lang/String;)V",o.default.instance.getAdmobSet())},e.prototype.test=function(){a.default.instance.callJava("jsSend","(Ljava/lang/String;)V","jsSend")},e.prototype.jsLog=function(e,t){GlobalFun.log(e+"  "+t)},e.prototype.showFBInstantGameAd=function(e,n){null!=n&&n.showAsync().then(function(){t.instance.onAdsClosed(e+":1")},function(n){t.instance.onAdsClosed(e+":0")})},e.prototype.showAdsScene=function(e){GlobalFun.log("showAdsScene: "+e)},e.prototype.onAdsReady=function(e){GlobalFun.log("onAdsReady: "+e);var t=e.split(":");o.default.instance._onPlacementReady(t[0],"true"==t[1]||"1"==t[1])},e.prototype.onAdsClosed=function(e){GlobalFun.log("onAdsClosed: "+e);var t=e.split(":");o.default.instance._onUnitClosedEvent(Number(t[0]),"1"==t[1])},e.prototype.onAdsLoadError=function(e){GlobalFun.log("onAdsLoadError: "+e);var t=e.split(":");o.default.instance._onPlacementLoadError(t[0],"1"==t[1],!0)},e.prototype.getAdmobString=function(){GlobalFun.log("getAdmobString: ")},e=t=__decorate([r],e)}());n.default=l,cc._RF.pop()},{"../manager/SDKManager":"SDKManager","./AdsGroupController":"AdsGroupController"}],AdsQueue:[function(e,t,n){"use strict";cc._RF.push(t,"56a24XzDpxPpJpEyW8XXTG6","AdsQueue"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./AdsSetAndScene"),a=e("./AdsGroupController"),i=function(e){function t(t){var n=e.call(this)||this;return n.isIgnoreIsReady=!1,n.id=t.id,n.subQueueMembersCountInPriority=Number(t.subQueue),n.loadOnInit=Number(t.initLoad),n.loadOnclose=Number(t.closeLoad),n.loadMethod=Number(t.loadMethod),n.subQueueLoadTimeout=1e3*Number(t.subTimeout),n.type=t.type,n.adsUnitsIDs=t.order.split("|"),n.loadMethodPrice=Number(t.loadMethodPrice),n.highestIndex=Number(t.highestIndex),n.getAdsUnit(),n.init(),n}return __extends(t,e),t.prototype.init=function(){this._inLoadingCount=0,this._isInTurnLoading=!1,this._isLoading=!1,this._timer=0,this._showCount=0},t.prototype.showAds=function(e){if(this.type==o.AdsQueueType.INVALID)return null;var t=this.getReady();return t?(this._lastOnClosedCallback=e,t._queueID=this.id,t.show()?this._showCount++:t=null):e(null,!1),t},t.prototype.getReady=function(){if(this.type==o.AdsQueueType.INVALID)return null;for(var e,t,n,a={value:0},i=this.adsUnitsInfos.length;;){var r=a.value;if(e=r,!this._gainLoadingCount(a))break;for(var l=(r=a.value)-e,s=0;e<r;e++,s++){if(this.type==o.AdsQueueType.TURNS)t=(e+this._showCount*this.subQueueMembersCountInPriority)%i;else t=this.type==o.AdsQueueType.TURNS_PRIORITY?r-l+(s+this._showCount)%l:e;if((n=this.adsUnitsInfos[t]).isReady())return n}}return null},t.prototype.load=function(e,t){if(void 0===e&&(e=!1),void 0===t&&(t=!1),this.isIgnoreIsReady=t,this.type!=o.AdsQueueType.INVALID){this.subQueueLoadTimeout||(e=!1);for(var n=this.adsUnitsInfos.length,a=0;a<n;a++){var i=this.adsUnitsInfos[a];i&&(i.refreshReadyState(!1),i.prior&&i.load())}this.isReady()&&!this.isIgnoreIsReady||this.isIgnoreIsReady&&this.isHighReady()||(!e&&this.subQueueLoadTimeout||!this._isInTurnLoading||this._cancelLoading(),this._isLoading||(this._cancelLoading(),this._isLoading=!0,this._isInTurnLoading=!1,this._inLoadingCount=0,this._timer=0,this._openLoading(e)))}},t.prototype.isReady=function(){return this.type!=o.AdsQueueType.INVALID&&this.getReady()},t.prototype.isHighReady=function(){if(this.type==o.AdsQueueType.INVALID)return!1;var e=this.getReady();return e&&this.getAdIndex(e.id)<=this.highestIndex},t.prototype.checkLoadOnInit=function(){this.loadOnInit&&this.load()},t.prototype.isAllAdsIsNofill=function(){for(var e=this.adsUnitsIDs.length,t=0;t<e;t++){var n=this.adsUnitsIDs[t],o=a.default.instance.getAdsUnit(n);if(o&&!o.isInNoFillWithRefreshNoFillState()&&!o.isReady())return!1}return!0},t.prototype.getCurloadAdsPrice=function(){return this._curLoadAdUnits?this._curLoadAdUnits.price:o.AdsPrice.High},t.prototype.nullCurload=function(){this._curLoadAdUnits=null},t.prototype.getAdIndex=function(e){for(var t=this.adsUnitsIDs.length,n=0;n<t;n++)if(this.adsUnitsIDs[n]==e)return n;return 0},t.prototype.getCurloadAdsIndex=function(){if(!this._curLoadAdUnits)return 0;for(var e=this._curLoadAdUnits.id,t=this.adsUnitsIDs.length,n=0;n<t;n++)if(this.adsUnitsIDs[n]==e)return n;return 0},t.prototype.getAdsUnit=function(){this.adsUnitsInfos=[];for(var e=this.adsUnitsIDs.length,t=0;t<e;t++){var n=this.adsUnitsIDs[t],o=a.default.instance.getAdsUnit(n);o&&(o._queueID=this.id,this.adsUnitsInfos.push(o))}},t.prototype._gainLoadingCount=function(e){var t=this.adsUnitsInfos.length;return!(e.value>=t)&&(e.value+=this.subQueueMembersCountInPriority,e.value>t&&(e.value=t),!0)},t.prototype._openLoading=function(e){var t;this._isInThread=!0,this._isInTurnLoading=this.checkTurnLoading(this.loadMethod)&&!e,this.lastIndex=0,this._inLoadingCount=0;var n=this.adsUnitsInfos.length;this.subFunc=function(){this.lastIndex=this._inLoadingCount;var a={value:this._inLoadingCount};if(!this._gainLoadingCount(a))return this._inLoadingCount=a.value,!1;this._inLoadingCount=a.value;for(var i=this._inLoadingCount-this.lastIndex,r=0;this.lastIndex<this._inLoadingCount;this.lastIndex++,r++){if(this.type==o.AdsQueueType.TURNS){var l=this._showCount*this.subQueueMembersCountInPriority;t=(this.lastIndex+l)%n}else t=this.type==o.AdsQueueType.TURNS_PRIORITY?this._inLoadingCount-i+(r+this._showCount)%i:this.lastIndex;this._curLoadAdUnits=this.adsUnitsInfos[t],this.adsUnitsInfos[t].load(),this._isInTurnLoading=this.checkTurnLoading(this.loadMethod)&&!e}return!0},this.schedule(this.loadFun.bind(this),.5,cc.macro.REPEAT_FOREVER)},t.prototype._cancelLoading=function(){this._isLoading=!1,this._inLoadingCount=0,this.unscheduleAllCallbacks(),this._isInThread=!1,this._isInTurnLoading=!1},t.prototype.loadFun=function(){if(this.isReady()&&!this.isIgnoreIsReady||this.isHighReady()||!this._isLoading)this._cancelLoading();else{if(this.startNewCheck=0==this._inLoadingCount,!this.startNewCheck)for(this.startNewCheck=!0,this.lastIndex=0;this.lastIndex<this._inLoadingCount;this.lastIndex++)if(this.adsUnitsInfos[this.lastIndex]._isLoading){this.startNewCheck=!1;break}if(this._isInTurnLoading){if(this.startNewCheck&&!this.subFunc())return void this._cancelLoading()}else if(this._timer>400&&!this.startNewCheck)this._timer-=500;else if(this._timer=this.subQueueLoadTimeout,!this.subFunc())return void this._cancelLoading()}},t.prototype.checkTurnLoading=function(e){return 2==this.loadMethod&&this._curLoadAdUnits?this._curLoadAdUnits.price<=this.loadMethodPrice:this.loadMethod},t}(cc.Component);n.default=i,cc._RF.pop()},{"./AdsGroupController":"AdsGroupController","./AdsSetAndScene":"AdsSetAndScene"}],AdsSetAndScene:[function(e,t,n){"use strict";cc._RF.push(t,"d2a41ztzlFAQrms9uD1dD8M","AdsSetAndScene"),Object.defineProperty(n,"__esModule",{value:!0}),function(e){e[e.Video=1]="Video",e[e.Page=2]="Page",e[e.Native=3]="Native",e[e.Other=4]="Other",e[e.Null=5]="Null"}(n.AdsType||(n.AdsType={})),function(e){e[e.Facebook=1]="Facebook",e[e.Admob=2]="Admob",e[e.Vungle=3]="Vungle",e[e.Unity=4]="Unity",e[e.Mobvista=5]="Mobvista",e[e.IronSource=6]="IronSource",e[e.Applovin=7]="Applovin"}(n.AdsPlatform||(n.AdsPlatform={})),function(e){e[e.High=1]="High",e[e.Middle=2]="Middle",e[e.Low=3]="Low",e[e.Auto=4]="Auto",e[e.Hide=5]="Hide"}(n.AdsPrice||(n.AdsPrice={})),function(e){e[e.INVALID=0]="INVALID",e[e.ABSOLUTE_PRIORITY=1]="ABSOLUTE_PRIORITY",e[e.TURNS=2]="TURNS",e[e.TURNS_PRIORITY=3]="TURNS_PRIORITY"}(n.AdsQueueType||(n.AdsQueueType={}));var o=function(){return function(e){this.id=e.id,this.queueID=e.queueID}}();n.AdsScene=o;var a=function(){return function(e){this._fromServerInfo=!1,this.id=e.id,this.appId=e.appID,this.versionNeed=e.versionNeed,this.version=e.version,this.mainServer=e.mainServer,this.secondServer=e.secondServer,this.controlVersion=e.controlVersion,this.extraArgs=e.extraArgs}}();n.AdsSetting=a,cc._RF.pop()},{}],AdsUnit:[function(e,t,n){"use strict";cc._RF.push(t,"89c9axPrChNBpK5onk/8j0a","AdsUnit"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./AdsSetAndScene"),a=e("./AdsGroupController"),i=e("./AdsGroupPlatformTool"),r=e("../manager/MyRoleDataManager"),l=e("../Config/Config"),s=e("../Lib/Global"),c=function(){function e(e){this._isFreshReady=!1,this.loadTime=0,this.id=e.id,this.name=e.name,this.appID=e.appID,this.placementID=e.placementID,this.limitTime=1e3*Number(e.limitMinutes)*60,this.type=e.type,this.adsPlatform=Number(e.platform),this.destroyOnClosed=Number(e.destroyOnClose),this.prior=Number(e.prior),this.isAutoLoad=Number(e.isAutoLoad),this.noFillWait=1e3*e.noFillWait,this.price=e.price,this.init()}return e.prototype.init=function(){this._isDestroy=!1,this._queueID=0,this._readyTime=0,this._isReady=!1,this._isFreshReady=!1,this._isLoading=!1,this._isShown=!1,this._isInNoFill=!1,this._noFillStartTime=0,this._adObj=null},e.prototype.isReady=function(){return!this._isDestroy&&(i.default.instance.isAdsReady(this)&&(this._isReady=!0),this._isReady&&!this._isShown&&!this.isTimeout()&&r.default.instance.gsChannel==l.default.APKChannel)},e.prototype.load=function(){this.type==o.AdsType.Page&&a.default.instance.noPage||this._isDestroy||this._isShown||this.isInNoFillWithRefreshNoFillState()||(this.isAutoLoad&&this.refreshReadyState(!0),this._isLoading||this.isReady()||(this.isAutoLoad||a.default.instance._onUnitChangeLoading(this,!0),this.loadTime++,GlobalFun.log(this.id+" : "+this.loadTime),i.default.instance.loadAds(this)))},e.prototype.show=function(){return(this.type!=o.AdsType.Page||!a.default.instance.noPage)&&(!this._isDestroy&&(this.isReady()?(a.default.instance.lastShowAdType=this.type,i.default.instance.showAds(this),!0):(a.default.instance._onUnitClosed(this,!1),this.load(),!1)))},e.prototype.destroy=function(){this._isDestroy||a.default.instance._onUnitChangeDestroy(this,!0)},e.prototype.isTimeout=function(){return!this._isDestroy&&(!(!this._isReady||!this.limitTime)&&s.default.getTime()-this._readyTime>this.limitTime)},e.prototype.refreshReadyState=function(e){return!this._isDestroy&&(!e&&this.isAutoLoad?this.isReady():(this._isReady||(this._isFreshReady=!0,a.default.instance._onFreshPlacementReady(this.placementID)),this.isReady()))},e.prototype.isInNoFillWithRefreshNoFillState=function(){return!!this._isInNoFill&&(s.default.getTime()-this._noFillStartTime>this.noFillWait?(a.default.instance._onUnitClearNoFillState(this),!1):(GlobalFun.log("inNoFillWait"),!0))},e.prototype.loadAdsTest=function(){var e=0;e=this.price==o.AdsPrice.High?15:this.price==o.AdsPrice.Middle?30:this.price==o.AdsPrice.Low?50:98,s.default.Random(0,100)<e?i.default.instance.onAdsReady(this.placementID):i.default.instance.onAdsLoadError(this.placementID+":true")},e}();n.default=c,cc._RF.pop()},{"../Config/Config":"Config","../Lib/Global":"Global","../manager/MyRoleDataManager":"MyRoleDataManager","./AdsGroupController":"AdsGroupController","./AdsGroupPlatformTool":"AdsGroupPlatformTool","./AdsSetAndScene":"AdsSetAndScene"}],AircraftItem:[function(e,t,n){"use strict";cc._RF.push(t,"06ca6GOYD1KXpoGndWQhsy+","AircraftItem"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../code/manager/MyRoleDataManager"),a=e("../../../code/manager/PanelManager"),i=e("../../../code/Lib/Global"),r=e("../../../code/manager/TableManager"),l=e("../../../code/Config/Config"),s=e("../../../code/manager/SoundManager"),c=e("../LatticeProgress"),d=cc._decorator,u=d.ccclass,p=d.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.infoBtn=null,t.levelUpBtn=null,t.pro=null,t.icon=null,t.levelIcon=null,t.nameLable=null,t.goldLable=null,t.goldLableShadow=null,t.levelNode=null,t.lockNode=null,t.lockLabel=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.levelUpBtn.node.on("click",this.levelUpTap,this),this.infoBtn.node.on("click",this.infoBtnTap,this),this.node.getComponent(cc.Button).node.on("click",this.nodeTap,this),this.levelUpBtn.enableAutoGrayEffect=!0},t.prototype.init=function(e,t){this.funnelId=e,this.iconFrame=t,this.setLable()},t.prototype.updateInfo=function(){var e=o.default.instance.getFunnelInfo(this.funnelId),t=r.default.instance.aircraftTable.getInfo(this.funnelId);if(e&&t){this.isUnlock=!0,this.icon.spriteFrame=this.iconFrame;var n=e.phase*t.stage;this.levelIcon.spriteFrame=a.default.instance.getExistPanel(l.PanelName.AircraftPanel).iconAtlas.getSpriteFrame("icon_"+e.phase),this.setPro(e.level,e.phase),this.upgradeMoney=r.default.instance.aircraftTable.countMoney(this.funnelId,e.level),this.goldLableShadow.string=this.goldLable.string=i.default.setNum(this.upgradeMoney),this.levelNode.active=!0,this.lockNode.active=!1,e.level-1>=n||e.level-1>=t.level_max?this.levelUpBtn.enabled=!1:this.levelUpBtn.enabled=!0}else this.isUnlock=!1,this.levelNode.active=!1,this.lockNode.active=!0;return this.nameLable.string=GlobalFun.i18n.t("lable."+t.name),this.isUnlock},t.prototype.setLable=function(){this.lockLabel.string=GlobalFun.i18n.t("lable.10232"),this.nameLable.string=GlobalFun.i18n.t("lable."+r.default.instance.aircraftTable.getName(this.funnelId))},t.prototype.setPro=function(e,t){for(var n=this.pro.children.length,o=Math.floor((e-1)/5)+1,a=1;a<n;a++)if(e>=5*a+1)this.pro.children[a].getComponent(c.default).pro=5;else if(e<=5*(a-1)+1&&a<=t)this.pro.children[a].getComponent(c.default).pro=0;else if(e<=5*a+1&&e>=5*(a-1)+1&&a==o&&a<=t){var i=(e-2-5*(o-1))%5+1;this.pro.children[a].getComponent(c.default).pro=i}else this.pro.children[a].getComponent(c.default).pro=0,this.pro.children[a].getComponent(c.default).lock()},t.prototype.levelUpTap=function(){o.default.instance.dleCurrency(this.upgradeMoney)?(s.default.playSoundEffect(s.default.upgradeAircraft),o.default.instance.funnelLevelUp(this.funnelId,1),a.default.gameUi.updataGold(),this.updateInfo(),a.default.instance.getExistPanel(l.PanelName.AircraftPanel).updateInfo()):a.default.instance.openPanel(l.PanelName.GoShopPanel,a.default.gameUi.middleNode)},t.prototype.infoBtnTap=function(){var e=r.default.instance.aircraftTable.getDes(this.funnelId);a.default.instance.getExistPanel(l.PanelName.AircraftPanel).updateTalkLable(GlobalFun.i18n.t("lable."+e))},t.prototype.nodeTap=function(){a.default.instance.getExistPanel(l.PanelName.AircraftPanel).funnelShow(Number(this.funnelId)),this.infoBtnTap()},__decorate([p({type:cc.Button,tooltip:"\u95ee\u53f7\u6309\u94ae"})],t.prototype,"infoBtn",void 0),__decorate([p({type:cc.Button,tooltip:"\u5347\u7ea7\u6309\u94ae"})],t.prototype,"levelUpBtn",void 0),__decorate([p({type:cc.Node,tooltip:"\u5347\u7ea7\u8fdb\u5ea6"})],t.prototype,"pro",void 0),__decorate([p({type:cc.Sprite,tooltip:"\u6d6e\u6e38\u70aeicon"})],t.prototype,"icon",void 0),__decorate([p({type:cc.Sprite,tooltip:"\u7b49\u9636icon"})],t.prototype,"levelIcon",void 0),__decorate([p({type:cc.Label,tooltip:"\u540d\u5b57\u6587\u672c"})],t.prototype,"nameLable",void 0),__decorate([p({type:cc.Label,tooltip:"\u5347\u7ea7\u94b1\u6587\u672c"})],t.prototype,"goldLable",void 0),__decorate([p({type:cc.Label,tooltip:"\u5347\u7ea7\u94b1\u6587\u672c\u9634\u5f71"})],t.prototype,"goldLableShadow",void 0),__decorate([p({type:cc.Node,tooltip:"\u5347\u7ea7\u8282\u70b9"})],t.prototype,"levelNode",void 0),__decorate([p({type:cc.Node,tooltip:"\u672a\u89e3\u9501\u8282\u70b9"})],t.prototype,"lockNode",void 0),__decorate([p({type:cc.Label,tooltip:"\u672a\u89e3\u9501\u8282\u70b9"})],t.prototype,"lockLabel",void 0),t=__decorate([u],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../../../code/Config/Config":"Config","../../../code/Lib/Global":"Global","../../../code/manager/MyRoleDataManager":"MyRoleDataManager","../../../code/manager/PanelManager":"PanelManager","../../../code/manager/SoundManager":"SoundManager","../../../code/manager/TableManager":"TableManager","../LatticeProgress":"LatticeProgress"}],AircraftPanel:[function(e,t,n){"use strict";cc._RF.push(t,"5e3a6JIuBNFyYpkY4Qt5CV2","AircraftPanel"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../code/basecode/BasePanel"),a=e("../../../code/manager/UiAniManager"),i=e("../../../code/manager/PanelManager"),r=e("../../../code/Config/Config"),l=e("../../../code/manager/TableManager"),s=e("../../../code/manager/MyRoleDataManager"),c=e("./AircraftItem"),d=e("../../../code/manager/SoundManager"),u=e("../../../code/manager/NodePoolMananger"),p=e("../../prefab/ShowPrefab"),h=e("../../../code/manager/GuideManager"),f=e("../../../code/Lib/Global"),g=e("../../../code/manager/EffectManager"),m=e("../../../code/manager/SDKManager"),y=cc._decorator,b=y.ccclass,v=y.property,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nameLable=null,t.talkLable=null,t.boxNameLabel=null,t.introLabel=null,t.chiplable=null,t.openBtn=null,t.okButton=null,t.aircraftPrefab=null,t.effectPrefab=null,t.itemNode=null,t.scrollNode=null,t.widgetNode0=null,t.effectNode=null,t.iconAtlas=null,t.getAni=null,t.getIcon=null,t.maskNode=null,t.openGiftNode=null,t.showNode=null,t.itemArr=[],t.unlockNum=50,t._aniType=a.UiAniType.AircraftPanel,t.aniStep=0,t}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){for(var e=l.default.instance.aircraftTable.table,t=e.length,n=0;n<t;n++){var o=e[n];if(o){var a=cc.instantiate(this.aircraftPrefab);this.itemNode.addChild(a);var i=a.getComponent(c.default);i.init(o.id,this.iconAtlas.getSpriteFrame(o.icon)),i.updateInfo(),this.itemArr.push(i)}}},t.prototype.openPanel=function(){this.addEvent(),this.playUIAni(a.InOrOut.IN),this.setLable(),this.scrollNode.scrollToOffset(cc.v2(0,0)),this.updateInfo()},t.prototype.closePanel=function(){d.default.playSoundEffect(d.default.btnSound),this.dleEvent(),this.playUIAni(a.InOrOut.OUT),i.default.gameUi.btnTishi()},t.prototype.panelIn=function(){for(var e=this.scrollNode.content.children.length,t=function(e){var t=n.scrollNode.content.children[e];n.scheduleOnce(function(){t.active=!0},.05*e)},n=this,o=0;o<e;o++)t(o);this.showNode?this.showNode.active=!0:(this.showNode=u.default.instance.pop(i.default.game.showPrefab.name),this.widgetNode0.addChild(this.showNode)),this.showNode.getComponent("ShowPrefab").startShow(0),h.default.instance.checkCanGuide(10002,1)&&h.default.instance.startGuide(10002)},t.prototype.panelOut=function(){for(var e=this.scrollNode.content.children.length,t=0;t<e;t++)this.scrollNode.content.children[t].active=!1;i.default.instance.deleteOpen(r.PanelName.AircraftPanel),this.node.removeFromParent(),this.showNode.getComponent("ShowPrefab").stopShow(),this.showNode.active=!1},t.prototype.addEvent=function(){this.okButton.node.on("click",this.okButtonTap,this),this.openBtn.node.on("click",this.openBox,this)},t.prototype.dleEvent=function(){this.okButton.node.off("click",this.okButtonTap,this),this.openBtn.node.off("click",this.openBox,this)},t.prototype.updateTalkLable=function(e){this.talkLable.string=e},t.prototype.setLable=function(){this.nameLable.string=GlobalFun.i18n.t("lable.10081"),this.talkLable.string=GlobalFun.i18n.t("lable.10082"),this.boxNameLabel.string=GlobalFun.i18n.t("lable.10083"),this.introLabel.string=GlobalFun.i18n.t("lable.10084"),this.chiplable.string=this.unlockNum+"";for(var e=this.itemArr.length,t=0;t<e;t++)this.itemArr[t].setLable()},t.prototype.funnelShow=function(e){this.showNode.getComponent(p.default).playerScript.outFunnel(),this.showNode.getComponent(p.default).playerScript.funnelShow(e)},t.prototype.updateInfo=function(){var e=l.default.instance.aircraftTable.getRondam();this.openBtn.enabled=!!e,this.sortItem()},t.prototype.openBox=function(){var e=this,t=l.default.instance.aircraftTable.getRondam();if(m.default.instance.callJava("trackEventWithType","(Ljava/lang/String;Ljava/lang/String;I)V","UnlockAircraft",t.toString(),1),t)if(s.default.instance.dleCurrency(this.unlockNum,r.CurrencyType.Chip)){i.default.gameUi.setBtn.enabled=!1,d.default.playSoundEffect(d.default.getAircraft),this.effectNode.active=!0,i.default.gameUi.updataGold(),s.default.instance.addFunnel(t),this.aniStep=0,this.getIcon.node.position=cc.v2(0,0),this.getIcon.spriteFrame=null,this.randomId=t,this.maskNode.active=!0;var n=cc.spawn(cc.fadeTo(.5,255),cc.callFunc(function(){e.getAni.active=!0,e.getAni.getComponent(cc.Animation).play("getAirciaft"),e.getAni.getComponent(cc.Animation).once("stop",e.effectComplete,e),e.scheduleOnce(function(){e.getAni.getComponent(cc.Animation).stop()},4)}));this.maskNode.runAction(n)}else i.default.instance.openPanel(r.PanelName.GoShopPanel,i.default.gameUi.middleNode)},t.prototype.effectComplete=function(){var e=this;if(this.aniStep++,1==this.aniStep){this.getAni.getComponent(cc.Animation).playAdditive("getAirciaft1"),this.getIcon.spriteFrame=this.iconAtlas.getSpriteFrame(l.default.instance.aircraftTable.getSource(this.randomId)),this.getAni.getComponent(cc.Animation).playAdditive("getAirciaft2");for(var t=this.itemArr.length,n=0;n<t;n++)if(this.itemArr[n].funnelId==this.randomId){this.itemArr[n].init(this.randomId,this.iconAtlas.getSpriteFrame(l.default.instance.aircraftTable.getSource(this.randomId)));break}var o=cc.sequence(cc.moveTo(2,this.maskNode.position),cc.fadeTo(.5,0),cc.callFunc(function(){e.effectComplete()}));this.maskNode.runAction(o)}else if(2==this.aniStep){var a=this.findLockNode(),r=0;a>3&&(this.scrollNode.scrollToBottom(.5),r=.5);var s=this.scrollNode.content.children[a];this.scheduleOnce(function(){var t=f.default.convertNodePosToTargetNodePos(s,e.getIcon.node),n=cc.sequence(cc.moveTo(.5,t),cc.callFunc(function(){g.default.instance.playEffect(g.EffectName.SubGunUnlockEffect,s,cc.v2(0,0)),e.updateInfo(),e.effectComplete()}));e.getIcon.node.runAction(n)},r)}else 3==this.aniStep&&(this.getAni.getComponent(cc.Animation).stop(),this.getAni.off("stop",this.effectComplete,this),this.getAni.active=!1,this.effectNode.active=!1,i.default.gameUi.setBtn.enabled=!0)},t.prototype.sortItem=function(){for(var e=this.itemArr.length,t=0;t<e;t++)this.itemArr[t].updateInfo()},t.prototype.findLockNode=function(){for(var e=this.itemArr.length,t=0;t<e;t++)if(this.itemArr[t].funnelId==this.randomId)return t+1},t.prototype.okButtonTap=function(){i.default.instance.closePanel(r.PanelName.AircraftPanel)},__decorate([v({type:cc.Label,tooltip:"\u540d\u5b57lable"})],t.prototype,"nameLable",void 0),__decorate([v({type:cc.Label,tooltip:"\u540d\u5b57lable"})],t.prototype,"talkLable",void 0),__decorate([v({type:cc.Label,tooltip:"\u7bb1\u5b50\u540d\u5b57lable"})],t.prototype,"boxNameLabel",void 0),__decorate([v({type:cc.Label,tooltip:"\u7bb1\u5b50\u4ecb\u7ecdlable"})],t.prototype,"introLabel",void 0),__decorate([v({type:cc.Label,tooltip:"\u82af\u7247\u6570\u91cflable"})],t.prototype,"chiplable",void 0),__decorate([v({type:cc.Button,tooltip:"\u5f00\u7bb1\u6309\u94ae"})],t.prototype,"openBtn",void 0),__decorate([v({type:cc.Button,tooltip:"ok\u6309\u94ae"})],t.prototype,"okButton",void 0),__decorate([v({type:cc.Prefab,tooltip:"\u6d6e\u6e38\u70ae\u9884\u5236\u4f53"})],t.prototype,"aircraftPrefab",void 0),__decorate([v({type:cc.Prefab,tooltip:"\u6253\u5f00\u793c\u5305\u9884\u5236\u4f53"})],t.prototype,"effectPrefab",void 0),__decorate([v({type:cc.Node,tooltip:"item\u8282\u70b9"})],t.prototype,"itemNode",void 0),__decorate([v({type:cc.ScrollView,tooltip:"\u6ed1\u52a8"})],t.prototype,"scrollNode",void 0),__decorate([v({type:cc.Node,tooltip:"\u9002\u914d\u4f7f\u7528"})],t.prototype,"widgetNode0",void 0),__decorate([v({type:cc.Node,tooltip:"\u7279\u6548\u8282\u70b9"})],t.prototype,"effectNode",void 0),__decorate([v({type:cc.SpriteAtlas,tooltip:"\u6d6e\u6e38\u70ae\u8d44\u6e90"})],t.prototype,"iconAtlas",void 0),__decorate([v({type:cc.Node,tooltip:"\u5f97\u5230\u7279\u6548"})],t.prototype,"getAni",void 0),__decorate([v({type:cc.Sprite,tooltip:"\u5f97\u5230\u7684icon"})],t.prototype,"getIcon",void 0),__decorate([v({type:cc.Node,tooltip:"\u5f97\u5230\u7684icon"})],t.prototype,"maskNode",void 0),__decorate([v({type:cc.Node,tooltip:"\u6253\u5f00\u793c\u5305\u8282\u70b9"})],t.prototype,"openGiftNode",void 0),t=__decorate([b],t)}(o.default);n.default=S,cc._RF.pop()},{"../../../code/Config/Config":"Config","../../../code/Lib/Global":"Global","../../../code/basecode/BasePanel":"BasePanel","../../../code/manager/EffectManager":"EffectManager","../../../code/manager/GuideManager":"GuideManager","../../../code/manager/MyRoleDataManager":"MyRoleDataManager","../../../code/manager/NodePoolMananger":"NodePoolMananger","../../../code/manager/PanelManager":"PanelManager","../../../code/manager/SDKManager":"SDKManager","../../../code/manager/SoundManager":"SoundManager","../../../code/manager/TableManager":"TableManager","../../../code/manager/UiAniManager":"UiAniManager","../../prefab/ShowPrefab":"ShowPrefab","./AircraftItem":"AircraftItem"}],AircraftTable:[function(e,t,n){"use strict";cc._RF.push(t,"75960gPGEhCSptqQMtrVXCD","AircraftTable"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../code/manager/MyRoleDataManager"),a=e("../../code/Lib/Global"),i=function(){function e(e){this.table=e}return e.prototype.getInfo=function(e){for(var t=0;t<this.table.length;t++){var n=this.table[t];if(n&&Number(n.id)==e)return n}return cc.warn("AircraftTable: Do not have id "+e),""},e.prototype.getSource=function(e){for(var t=0;t<this.table.length;t++){var n=this.table[t];if(n&&Number(n.id)==e)return n.icon}return cc.warn("AircraftTable: Do not have id "+e),""},e.prototype.getName=function(e){for(var t=0;t<this.table.length;t++){var n=this.table[t];if(n&&Number(n.id)==e)return n.name}return cc.warn("AircraftTable getName: Do not have id "+e),""},e.prototype.getDes=function(e){for(var t=0;t<this.table.length;t++){var n=this.table[t];if(n&&Number(n.id)==e)return n.des}return cc.warn("AircraftTable getDex: Do not have id "+e),{}},e.prototype.getTime=function(e){for(var t=0;t<this.table.length;t++){var n=this.table[t];if(n&&Number(n.id)==e)return Number(n.time)}return cc.warn("AircraftTable getTime: Do not have id "+e),0},e.prototype.countMoney=function(e,t){for(var n=0;n<this.table.length;n++){var o=this.table[n];if(o&&Number(o.id)==e)return o.basic_number*t}return cc.warn("AircraftTable countMoney: Do not have id "+e),0},e.prototype.countAtk=function(e,t){for(var n=0;n<this.table.length;n++){var o=this.table[n];if(o&&Number(o.id)==e)return.001*(o.attack*t+Number(o.attack_basic))}return cc.warn("AircraftTable countAtk: Do not have id "+e),0},e.prototype.getRondam=function(){for(var e=[],t=0;t<this.table.length;t++){var n=this.table[t];if(n){var i=o.default.instance.getFunnelInfo(Number(n.id));i&&i.phase<n.level_max/n.stage?e.push(Number(n.id)):i||e.push(Number(n.id))}}return 0==Object.keys(o.default.instance.funnelObject).length?302003:a.default.arrRandom(e)},e.prototype.getRandomId=function(){return Number(a.default.arrRandom(this.table).id)},e}();n.default=i,cc._RF.pop()},{"../../code/Lib/Global":"Global","../../code/manager/MyRoleDataManager":"MyRoleDataManager"}],BallManager:[function(e,t,n){"use strict";cc._RF.push(t,"154cc0p1QpOnqsPGV/Tv8t7","BallManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./NodePoolMananger"),a=e("./MyRoleDataManager"),i=e("./PanelManager"),r=e("../Lib/QuadTree"),l=e("../Lib/Global"),s=e("./TableManager"),c=e("../../src/prefab/PropPrefab"),d=e("./MissionManger"),u=cc._decorator,p=u.ccclass,h=(u.property,function(){function e(){this.ballPreArr=[],this.physicsNode=null,this.ballOutPos=[500,610,780,1020],this.curBallNum=0,this.ballOutTimes=1,this.curBallArr={},this.quadTree=null,this.highHpBallPro=90,this.nextCreateBallTime=0,this.curBallIcon=null,this.ballOutArr=[],this.minBallNum=1,this.curLevelBallNum=1,this.totalSamllBall=0,this.clearSamllBall=0,this.maxBallOutTime=0,this.ballBasisHp=1,this.num=0,this.propTime=0,this.hpPropNum=0,this.specialTime=0,this.goldNumArr=[],this.outDiamond=0,this.maxDiamond=2,this.leftLevel=-1,this.diamondOutPro=1}var t;return t=e,Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(e,t){this.ballPreArr=e,this.physicsNode=t;for(var n=0;n<this.ballPreArr.length;n++)o.default.instance.addPool(this.ballPreArr[n],"BallPrefab");this.preloadBall(),this.quadTree=new r.default({x:0,y:0,width:750,height:1624},0),this.quadTree.splite()},e.prototype.startNewGame=function(e){var t=s.default.instance.mapLevelTable.getDataByLevel(a.default.instance.curLevel);this.minBallNum=Number(t.ball_low),this.curLevelBallNum=Number(t.ball_complete),this.curLevelBallNum=a.default.instance.curLevel>=1&&a.default.instance.curLevel<=3?5+2*(a.default.instance.curLevel-1):this.curLevelBallNum,this.ballBasisHp=s.default.instance.mapLevelTable.getBaseHpByLevel(a.default.instance.curLevel),this.maxBallOutTime=1e3*Number(t.ball_time),this.ballOutArr=[],this.curBallArr={},this.quadTree.clear(),this.curBallIcon=e,this.ballOutTimes=1,this.nextCreateBallTime=this.maxBallOutTime,this.highHpBallPro=60,this.curBallNum=0,this.totalSamllBall=0,this.clearSamllBall=0,this.hpPropNum=0,this.specialTime=l.default.getTime()+4e5,this.setDiamondPro();for(var n=0;n<=this.curLevelBallNum;n++){var o=this.getBallPrefab();this.ballOutTimes++,this.ballOutArr.push(o),this.totalSamllBall+=Math.pow(2,o)}a.default.instance.curLevelTotalBall=this.curLevelBallNum,this.ballOutTimes=0},e.prototype.checkBallPos=function(){this.quadTree.clear(),this.quadTree.insert(this.curBallArr,0)},e.prototype.createBallByTime=function(){if(!(a.default.instance.checkGameState([0,2,3,4])||this.ballOutTimes>=a.default.instance.curLevelTotalBall)){var e=l.default.getTime();if(e>=this.nextCreateBallTime&&this.ballOutTimes<=a.default.instance.curLevelTotalBall)this.createNewBall()&&(this.ballOutTimes++,this.nextCreateBallTime=this.countNextBallTime(e))}},e.prototype.createBallImmediately=function(){if(!(a.default.instance.checkGameState([0,2,3,4,5])||this.ballOutTimes>=a.default.instance.curLevelTotalBall)){var e=l.default.getTime();this.createNewBall()&&(this.ballOutTimes++,this.nextCreateBallTime=this.countNextBallTime(e))}},e.prototype.countNextBallTime=function(e){var n=a.default.instance.curCannonID,o=s.default.instance.mapLevelTable.getCurLevelIndex(a.default.instance.curLevel)+1,i=s.default.instance.connonTable.getDataById(n);o=Number(o>=i.max_level?i.max_level:o);var r=(Number(i.c_att_b)+Number(i.m_att_b))*o,l=1.4+.1*this.ballOutTimes,c=t.instance.ballBasisHp/r,d=(c=c>1?c:1)*l;return 1e3*(d=d>this.maxBallOutTime/1e3?this.maxBallOutTime/1e3:d)+e},e.prototype.createSmallerBall=function(e,t,n,i){if(!a.default.instance.checkGameState([0,2,4,5]))for(var r=0;r<e;r++){this.curBallNum++;var l=o.default.instance.pop(this.ballPreArr[n].name);this.physicsNode.addChild(l),l.ECScript.init(Math.ceil(.5*t),this.curBallIcon),this.curBallArr[l.uuid]=l.ECScript,r%2==0?i.x-=5:i.x+=5,l.setPosition(i),i.x<=0||i.x>=this.physicsNode.width?this.moveBallToWord(l):r%2==0?l.ECScript.toRightTop():l.ECScript.toLeftTop()}},e.prototype.createNewBall=function(){if(!(a.default.instance.checkGameState([0,2,3,4])||this.ballOutArr.length<=0)){var e=this.getBallHp();e=e<=0?1:e;var t=this.ballOutArr.shift();this.num+=Math.pow(2,t),console.log("totalSamllBall  ",this.totalSamllBall,this.num,this.ballOutArr.length);var n=o.default.instance.pop(this.ballPreArr[t].name);n.parent||this.physicsNode.addChild(n),n.active=!0,n.ECScript.init(e,this.curBallIcon),this.curBallArr[n.uuid]=n.ECScript;var i=n.getComponent(cc.PhysicsCircleCollider),r=this.getBallStartPos(i.radius);return n.setPosition(r),this.moveBallToWord(n),this.curBallNum++,e*(n.ECScript.size+1)}},e.prototype.clearAllBallBullet=function(){var e=this.physicsNode.children.length;this.curBallArr={};for(var t=0;t<e;t++){!(n=this.physicsNode.children[t])||"propPrefab"!=n.name&&"bulletPrefab"!=n.name&&-1==n.name.search(/ball.Prefab/)&&"bulletPrefab"!=n.name&&"coinPrefab"!=n.name&&"coinNumPrefab"!=n.name||(t--,-1!=n.name.search(/ball.Prefab/)?n.removeFromParent():"propPrefab"==n.name?(n.removeFromParent(),o.default.instance.push(n)):(n.active=!1,o.default.instance.push(n)))}for(i.default.game.bulletNode.children.length,t=0;t<e;t++){var n;!(n=i.default.game.bulletNode.children[t])||"bulletPrefab"!=n.name&&-1==n.name.search(/ball.Prefab/)||(t--,-1!=n.name.search(/ball.Prefab/)?n.removeFromParent():(n.active=!1,o.default.instance.push(n)))}},e.prototype.smallestBallBoom=function(e,n,i){var r=l.default.Random(1,15);if(!(r<=0)){r=a.default.instance.goldDropCount(r),this.goldNumArr=[];var s=l.default.Random(1,2);0==t.instance.curBallNum&&a.default.instance.curLevelTotalBall<=t.instance.ballOutTimes&&(s=5);for(var u=0;u<s;u++){var p=o.default.instance.pop("coinPrefab");p&&!p.parent&&this.physicsNode.addChild(p),p.active=!0,p.x=n,p.y=i,p.ECScript.init(Math.floor(r/s)),p.ECScript.toTop()}var h=d.default.instance.curSpecilMission;if(h&&!h.isCompleteAll&&l.default.Random(0,100)<=10&&h.pro<h.quest){var f=o.default.instance.pop("propPrefab"),g=h.collectPropId;this.physicsNode.addChild(f);var m=f.getComponent(c.default);f.x=n,f.y=i,m.init(g),m.toTop()}this.anyBallBoom(n,i)}},e.prototype.anyBallBoom=function(e,t){var n=l.default.getTime();if(l.default.Random(0,100)<=60&&n-this.propTime>2e3){this.propTime=n;var i=o.default.instance.pop("propPrefab"),r=void 0;if(l.default.Random(0,100)<=50&&(Object.keys(a.default.instance.funnelObject).length>0||0==a.default.instance.curLevel))r=500004;else{var s=[];s=0==a.default.instance.curLevel?[500001]:this.hpPropNum<=4?[500001,500002,500003]:[500001,500003],r=l.default.arrRandom(s)}50002==r&&this.hpPropNum++,this.physicsNode.addChild(i);var d=i.getComponent(c.default);i.x=e,i.y=t,d.init(r),d.toTop()}if(l.default.Random(0,100)<=25&&n-this.specialTime>4e4&&a.default.instance.curLevel>=10){this.specialTime=n;i=o.default.instance.pop("propPrefab"),r=5e5;this.physicsNode.addChild(i);d=i.getComponent(c.default);i.x=e,i.y=t,d.init(r),d.toTop()}if(this.isDiamond()){var u=o.default.instance.pop("coinPrefab");u&&!u.parent&&this.physicsNode.addChild(u),this.outDiamond++,u.active=!0,u.x=e,u.y=t,u.ECScript.init(-1),u.ECScript.toTop()}},e.prototype.countGoldNum=function(e){var t=e.toString(),n=t.length,o=Number("1"+new Array(n).join("0")),a=Math.floor(e/o),i=Math.floor(a/5);i>0&&this.goldNumArr.push(5*o);var r=Math.floor((a-5*i)/2);return r>1?this.goldNumArr.splice(0,0,2*o,2*o):r>0&&this.goldNumArr.push(2*o),a-5*i-2*r>0&&this.goldNumArr.push(1*o),1!=n?this.countGoldNum(Number(t.toString().slice(1,t.toString().length))):void 0},e.prototype.isDiamond=function(){if(a.default.instance.curDiamond>=this.maxDiamond)return!1;var e=l.default.Random(1,100);return e<=this.diamondOutPro?(console.log("isDiamond",e,this.diamondOutPro),this.diamondOutPro-=2,this.diamondOutPro=this.diamondOutPro<1?1:this.diamondOutPro,!0):void 0},e.prototype.setDiamondPro=function(){-1==this.leftLevel?(this.leftLevel=l.default.Random(2,5),this.maxDiamond=2,this.diamondOutPro=1):(this.leftLevel--,0==this.leftLevel?(this.leftLevel=l.default.Random(2,5),this.maxDiamond=3+2*s.default.instance.mapLevelTable.getCurChapter(a.default.instance.curLevel),this.diamondOutPro=10):(this.maxDiamond=2,this.diamondOutPro=1)),this.outDiamond=0,console.log("setDiamondPro",this.leftLevel,this.maxDiamond,this.diamondOutPro)},e.prototype.moveBallToWord=function(e){e.ECBody.gravityScale=0;var t=cc.callFunc(function(){e.ECBody.gravityScale=1,e.ECScript.toRight()},this),n=this.getBallEndPos(e.getPosition(),e.getComponent(cc.PhysicsCircleCollider).radius),o=.01*Math.abs(e.getPosition().x-n.x)*.5,a=cc.sequence(cc.moveTo(o,n),t);e.runAction(a)},e.prototype.getBallStartPos=function(e){var t=l.default.arrRandom([-e,750+e]),n=l.default.arrRandom(this.ballOutPos)+350;return cc.v2(t,n)},e.prototype.getBallEndPos=function(e,t){return e.x<0?cc.v2(t,e.y):cc.v2(750-t,e.y)},e.prototype.getBallPrefab=function(){var e=l.default.Random(1,100);return e<=25?0:e<=70?1:e<=95?2:e<=100?3:void 0},e.prototype.getBallHp=function(){var e=.3*this.ballOutTimes+1,t=Math.ceil(.005*l.default.Random(100*this.ballOutTimes,100*(this.ballOutTimes+e))*this.ballBasisHp);return console.log("\u5927hp "+t,this.ballBasisHp),t},e.prototype.getHighLowHp=function(){return l.default.Random(1,100)<this.highHpBallPro?1:0},e.prototype.preloadBall=function(){for(var e=0;e<2;e++){var t=o.default.instance.pop(this.ballPreArr[0].name);o.default.instance.push(t);var n=o.default.instance.pop(this.ballPreArr[0].name);o.default.instance.push(n);var a=o.default.instance.pop(this.ballPreArr[1].name);o.default.instance.push(a);var r=o.default.instance.pop(this.ballPreArr[2].name);o.default.instance.push(r);var l=o.default.instance.pop(this.ballPreArr[3].name);o.default.instance.push(l)}for(e=0;e<50;e++){var s=o.default.instance.pop("bulletPrefab");s.active=!1,i.default.game.bulletNode.addChild(s),o.default.instance.push(s)}for(e=0;e<20;e++){var c=o.default.instance.pop("coinPrefab");o.default.instance.push(c);var d=o.default.instance.pop("bloodPrefab");o.default.instance.push(d)}for(e=0;e<10;e++){var u=o.default.instance.pop(i.default.game.boomPrefab.name),p=o.default.instance.pop(i.default.game.smokePrefab.name);o.default.instance.push(u),o.default.instance.push(p)}},e.prototype.sortFunLowToBig=function(e){return function(t,n){return t[e].size-n[e].size}},e=t=__decorate([p],e)}());n.default=h,cc._RF.pop()},{"../../src/prefab/PropPrefab":"PropPrefab","../Lib/Global":"Global","../Lib/QuadTree":"QuadTree","./MissionManger":"MissionManger","./MyRoleDataManager":"MyRoleDataManager","./NodePoolMananger":"NodePoolMananger","./PanelManager":"PanelManager","./TableManager":"TableManager"}],BallPrefab:[function(e,t,n){"use strict";cc._RF.push(t,"8c156J6DoVK34dVZA7MoEk7","BallPrefab"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../code/basecode/EasyGetCompleteClass"),a=e("../../code/manager/NodePoolMananger"),i=e("../../code/manager/BallManager"),r=e("../../code/manager/MissionManger"),l=e("../../code/manager/PanelManager"),s=e("../../code/manager/MyRoleDataManager"),c=e("../../code/manager/SDKManager"),d=e("../../code/manager/SoundManager"),u=e("../../code/Lib/Global"),p=cc._decorator,h=p.ccclass,f=p.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.jumpHeight=0,t.size=0,t.icon=null,t.myLable=null,t.radius=0,t.collider=null,t.curLife=0,t.totalLife=0,t.isBackToPool=!1,t.isInit=!1,t.xSpeedArr=[1e3,3330,6250,12250],t.ySpeedArr=[200,250,300,350],t.colorArr=[-160,-140,-120,-100,-80,-60,-40,-20,0,20,40,60],t.isInBiger=!1,t.bloodTime=4,t}return __extends(t,e),t.prototype.onLoad=function(){this.collider=this.getComponent(cc.PhysicsCircleCollider),this.EasyGetCompleteClassInit(),this.game=cc.director.getScene().getChildByName("Canvas").ECScript},t.prototype.start=function(){},t.prototype.update=function(e){0!=this.ECBody.gravityScale&&0==this.ECBody.linearVelocity.x&&this.toRight()},t.prototype.onBeginContact=function(e,t,n){if("bulletPrefab<PhysicsBoxCollider>"!=n.name||this.isBackToPool)"wall<PhysicsBoxCollider>"==n.name&&0==this.ECBody.gravityScale&&(e.disabled=!0);else{var o=n.getComponent("BulletPrefab").killNum;this.killlifeNum(o),this.game.addScore(o),n.getComponent("BulletPrefab").remove()}},t.prototype.onPostSolve=function(e,t,n){"floor<PhysicsBoxCollider>"==n.name&&(this.toTop(),l.default.game.playSmokeEffect(cc.v2(this.node.position.x,this.node.position.y-this.collider.radius),this.size),l.default.gameUi.backGroudShack(this.size)),this.isBackToPool&&(this.isInit=!1,a.default.instance.push(this.node))},t.prototype.onCollisionEnter=function(e,t){if(!this.isBackToPool&&"bulletPrefab<BoxCollider>"==e.name){var n=e.getComponent("BulletPrefab").killNum;this.biger(),this.killlifeNum(n),this.game.addScore(n),e.getComponent("BulletPrefab").remove(),this.playBlood(this.countPoints(t.node.position,e.node.position,t.world))}},t.prototype.beAttack=function(e,t){this.biger(),this.killlifeNum(e),this.playBlood(this.countPoints(this.node.position,t,this.radius))},t.prototype.init=function(e,t){this.isInit=!0,this.icon.spriteFrame=t,this.icon.node.scale=1,this.isBackToPool=!1,this.isInBiger=!1,this.curLife=this.totalLife=e,this.myLable.getComponent("MyLable").string=u.default.setNumToKMB(this.curLife),this.myLable.getComponent("MyLable").isChangeColor=!1,this.colorMaterial=GlobalFun.shaderUtils.setShader(this.icon),this.setStartColor()},t.prototype.toRight=function(){this.node.x<=320?this.ECBody.applyLinearImpulse(cc.v2(this.getXSpeedBySize(),0),this.ECBody.getWorldCenter(),!1):this.ECBody.applyLinearImpulse(cc.v2(-1*this.getXSpeedBySize(),0),this.ECBody.getWorldCenter(),!1),this.ECBody.angularVelocity=50},t.prototype.toTop=function(){this.ECBody.applyLinearImpulse(cc.v2(0,this.jumpHeight),this.ECBody.getWorldCenter(),!1)},t.prototype.toRightTop=function(){this.ECBody.linearVelocity=cc.v2(100,this.getYSpeedBySize()),this.ECBody.angularVelocity=50},t.prototype.toLeftTop=function(){this.ECBody.linearVelocity=cc.v2(-100,this.getYSpeedBySize()),this.ECBody.angularVelocity=50},t.prototype.killlifeNum=function(e){this.isInit&&(this.curLife-=Number(e),this.curLife<=0?(this.isInit=!1,delete i.default.instance.curBallArr[this.node.uuid],i.default.instance.curBallNum--,this.createTwoSmallCircle(),c.default.instance.phoneShack(),l.default.game.playSmokeEffect(this.node.position,this.size),l.default.game.playBoomEffect(this.node.position,this.size),0==i.default.instance.curBallNum&&s.default.instance.curLevelTotalBall<=i.default.instance.ballOutTimes&&(l.default.game.playBoomEffect(this.node.position.sub(cc.v2(50,50)),this.size),l.default.game.playBoomEffect(this.node.position.sub(cc.v2(-50,-50)),this.size),l.default.game.playBoomEffect(this.node.position.sub(cc.v2(-50,50)),this.size),l.default.game.playBoomEffect(this.node.position.sub(cc.v2(50,-50)),this.size)),this.node.active=!1,this.node.removeFromParent(),this.isBackToPool=!0,GlobalFun.shaderUtils.backShader(this.colorMaterial),this.colorMaterial=null,r.default.instance.collectMissionNum(1,1),l.default.game.playerScript.life<=.5*l.default.game.playerScript.maxLife&&r.default.instance.collectMissionNum(3,1)):(this.myLable.getComponent("MyLable").string=u.default.setNumToKMB(this.curLife),this.colorChange()))},t.prototype.killBall=function(){delete i.default.instance.curBallArr[this.node.uuid],i.default.instance.clearSamllBall+=Math.pow(2,this.size),l.default.gameUi.pro.progress=i.default.instance.clearSamllBall/i.default.instance.totalSamllBall,i.default.instance.curBallNum--,l.default.game.playSmokeEffect(this.node.position,this.size),l.default.game.playBoomEffect(this.node.position,this.size),this.node.removeFromParent(),this.isBackToPool=!0,GlobalFun.shaderUtils.backShader(this.colorMaterial),this.colorMaterial=null},t.prototype.createTwoSmallCircle=function(){if(0==this.size)return d.default.playSoundEffect(d.default.boom2),i.default.instance.clearSamllBall++,l.default.gameUi.pro.progress=i.default.instance.clearSamllBall/i.default.instance.totalSamllBall,0==i.default.instance.curBallNum&&s.default.instance.curLevelTotalBall<=i.default.instance.ballOutTimes&&(l.default.gameUi.pro.progress=1,l.default.game.levelComplete()),i.default.instance.smallestBallBoom(this.totalLife,this.node.position.x,this.node.position.y),void((0==i.default.instance.curBallNum||i.default.instance.curBallNum<i.default.instance.minBallNum)&&i.default.instance.createBallImmediately());i.default.instance.anyBallBoom(this.node.position.x,this.node.position.y);var e=this.size-1;d.default.playSoundEffect(d.default.boom1),i.default.instance.createSmallerBall(2,this.totalLife,e,this.node.getPosition())},t.prototype.getXSpeedBySize=function(){return this.xSpeedArr[this.size]},t.prototype.getYSpeedBySize=function(){return this.ySpeedArr[this.size]},t.prototype.setStartColor=function(){var e=this.countColor();e=e>=11?11:e,this.startColor=this.colorArr[e],this.curBloodColor=GlobalFun.bloodColorArr[e],this.colorMaterial.setU_dH(this.startColor),this.lastColor=e,this.colorLife=this.totalLife},t.prototype.colorChange=function(){var e=this.countColor();if(!(e>=11&&11==this.lastColor||e<1&&0==this.lastColor))return e<1?(this.colorMaterial.setU_dH(this.colorArr[e]),this.curBloodColor=GlobalFun.bloodColorArr[e],void(this.lastColor=0)):void(this.lastColor!=e&&(this.curBloodColor=GlobalFun.bloodColorArr[e],this.colorMaterial.setU_dH(this.colorArr[e]),this.lastColor=e))},t.prototype.countColor=function(){s.default.instance.getConnonInfo(s.default.instance.curCannonID);var e=l.default.game.playerScript,t=this.curLife/(e.mainGunHit+e.extraGunHit),n=0;if(t>=7)n=11;else if(t<1)n=1;else{n=Math.round(t/.7)}return n},t.prototype.biger=function(){if(!this.isInBiger){var e=1.05;e=0==this.size?1.16:1==this.size?1.12:2==this.size?1.1:1.08,this.isInBiger=!0,this.icon.node.runAction(cc.sequence(cc.scaleTo(.02,e),cc.scaleTo(.02,1),cc.callFunc(function(){this.isInBiger=!1},this)))}},t.prototype.countPoints=function(e,t,n){var o=t.sub(e),a=o.mag();return o.mul(n/a).add(e)},t.prototype.playBlood=function(e){if(this.bloodTime++,!(this.bloodTime<=4)){this.bloodTime=0,this.particle||(this.particle=a.default.instance.pop("bloodPrefab"),l.default.game.ballNode.addChild(this.particle));var t=this.particle.getComponent(cc.ParticleSystem);t&&(t.startColor=cc.color(this.curBloodColor),t.endColor=cc.color(this.curBloodColor),t._stopped=!1,t._simulator.active=!0,t._simulator.finished=!1,t._material?t.markForCustomIARender(!0):t._activateMaterial()),this.particle.setPosition(e)}},__decorate([f(cc.Integer)],t.prototype,"jumpHeight",void 0),__decorate([f(cc.Integer)],t.prototype,"size",void 0),__decorate([f(cc.Sprite)],t.prototype,"icon",void 0),__decorate([f(cc.Node)],t.prototype,"myLable",void 0),__decorate([f(Number)],t.prototype,"radius",void 0),t=__decorate([h],t)}(o.default);n.default=g,cc._RF.pop()},{"../../code/Lib/Global":"Global","../../code/basecode/EasyGetCompleteClass":"EasyGetCompleteClass","../../code/manager/BallManager":"BallManager","../../code/manager/MissionManger":"MissionManger","../../code/manager/MyRoleDataManager":"MyRoleDataManager","../../code/manager/NodePoolMananger":"NodePoolMananger","../../code/manager/PanelManager":"PanelManager","../../code/manager/SDKManager":"SDKManager","../../code/manager/SoundManager":"SoundManager"}],BasePanel:[function(e,t,n){"use strict";cc._RF.push(t,"f85707o7ZhNe6HnaVyn4FVr","BasePanel"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../manager/UiAniManager"),a=cc._decorator,i=a.ccclass,r=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.panelAni=null,t}return __extends(t,e),t.prototype.openPanel=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.closePanel=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.panelIn=function(){},t.prototype.panelOut=function(){},t.prototype.addEvent=function(){},t.prototype.dleEvent=function(){},t.prototype.setLable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.playUIAni=function(e){this.aniType!=o.UiAniType.Null?(this.addUiClip(),this.panelAni.playAdditive(this.aniType+e)):e==o.InOrOut.IN?this.panelIn():e==o.InOrOut.OUT&&this.panelOut()},t.prototype.stopUIAni=function(){this.panelAni.stop()},Object.defineProperty(t.prototype,"aniType",{get:function(){return this._aniType},set:function(e){this.addUiClip(),this._aniType=e},enumerable:!0,configurable:!0}),t.prototype.addUiClip=function(){if(!this.panelAni){var e=this.getComponent(cc.Animation);this.panelAni=e||this.node.addComponent(cc.Animation)}this.curPanelAniType!=this.aniType&&(this.panelAni.addClip(o.default.getUiClip(this.aniType+o.InOrOut.IN)),this.panelAni.addClip(o.default.getUiClip(this.aniType+o.InOrOut.OUT)),this.curPanelAniType=this.aniType)},t=__decorate([i],t)}(cc.Component));n.default=r,cc._RF.pop()},{"../manager/UiAniManager":"UiAniManager"}],BossLevelBtn:[function(e,t,n){"use strict";cc._RF.push(t,"d05272IigJJ8K1109ZXyKul","BossLevelBtn"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../code/manager/MyRoleDataManager"),a=cc._decorator,i=a.ccclass,r=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sprite=null,t.resArr=[],t.isUnlock=!0,t.level=0,t}return __extends(t,e),t.prototype.init=function(e,t){this.isUnlock=e,this.level=t,this.setSprite()},t.prototype.unlock=function(e){void 0===e&&(e=-1),this.isUnlock=!0,this.level=-1==e?this.level:e},t.prototype.setSprite=function(){this.isUnlock?this.isUnlock&&o.default.instance.curLevel==this.level?this.sprite.spriteFrame=this.resArr[1]:this.isUnlock&&o.default.instance.curLevel>this.level&&(this.sprite.spriteFrame=this.resArr[2]):this.sprite.spriteFrame=this.resArr[0]},__decorate([r({type:cc.Sprite,tooltip:"\u56fe\u7247"})],t.prototype,"sprite",void 0),__decorate([r({type:[cc.SpriteFrame],tooltip:"\u56fe\u7247\u8d44\u6e90"})],t.prototype,"resArr",void 0),t=__decorate([i],t)}(cc.Component);n.default=l,cc._RF.pop()},{"../../../code/manager/MyRoleDataManager":"MyRoleDataManager"}],BulletBase:[function(e,t,n){"use strict";cc._RF.push(t,"59c85Rkw6lMSZlVMxIk3jq2","BulletBase"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../code/basecode/EasyGetCompleteClass"),a=e("../../code/manager/BallManager"),i=cc._decorator,r=i.ccclass,l=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.iconImg=null,t.killNum=1,t.maxHeight=0,t.isInit=!1,t}return __extends(t,e),t.prototype.init=function(e,t){},t.prototype.isCollided=function(){if(!(this.node.x<0||this.node.x>750)&&this.isInit){for(var e=a.default.instance.quadTree.findObjects([],this),t=e.length,n=0;n<t;n++)for(var o=e[n],i=e[n].length,r=0;r<i;r++){var l=o[r];if(l&&l.isInit&&l.node.position.sub(this.node.position).mag()<=l.radius)return l}return!1}},t.prototype.remove=function(){this.isInit=!1,this.node.active=!1},t.prototype.setIcon=function(e){this.iconImg.spriteFrame=e},__decorate([l(cc.Sprite)],t.prototype,"iconImg",void 0),t=__decorate([r],t)}(o.default);n.default=s,cc._RF.pop()},{"../../code/basecode/EasyGetCompleteClass":"EasyGetCompleteClass","../../code/manager/BallManager":"BallManager"}],BulletBoom:[function(e,t,n){"use strict";cc._RF.push(t,"a72c7aQaPhHsoIlgoT4CnmC","BulletBoom"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./BulletBase"),a=e("../../code/manager/PanelManager"),i=e("../../code/manager/BallManager"),r=e("../../code/manager/MyRoleDataManager"),l=e("../../code/manager/EffectManager"),s=cc._decorator,c=s.ccclass,d=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.boomCircle=50,t}return __extends(t,e),t.prototype.onLoad=function(){this.EasyGetCompleteClassInit(),this.speed=15},t.prototype.update=function(){if(this.isCollided())return this.isBoomCollided(),l.default.instance.playEffect(l.EffectName.BoomBulletBoom,a.default.game.ballNode,this.node.position),void this.remove();r.default.instance.checkGameState([4,7])||(this.node.y+=this.ySpeed*r.default.instance.getTimeScale(),this.node.y>=this.maxHeight&&this.remove())},t.prototype.init=function(e){this.isInit=!0,this.node.rotation=0,this.ySpeed=this.speed,this.xSpeed=0,this.maxHeight=.5*(cc.Canvas.instance.designResolution.height-cc.winSize.height)+cc.winSize.height,this.killNum=e},t.prototype.isBoomCollided=function(){if(!(this.node.x<0||this.node.x>750)&&this.isInit){for(var e=!1,t=i.default.instance.quadTree.findObjects([],{node:{x:this.node.x,y:this.node.y,width:this.boomCircle,height:this.boomCircle,anchorX:.5,anchorY:.5}}),n=t.length,o=0;o<n;o++)for(var r=t[o],l=t[o].length,s=0;s<l;s++){var c=r[s];c&&c.isInit&&c.node.position.sub(this.node.position).mag()<=c.radius+this.boomCircle&&(a.default.game.addScore(this.killNum),c.beAttack(this.killNum,this.node.position),e=!0)}return e}},t.prototype.setIcon=function(e){},t=__decorate([c],t)}(o.default));n.default=d,cc._RF.pop()},{"../../code/manager/BallManager":"BallManager","../../code/manager/EffectManager":"EffectManager","../../code/manager/MyRoleDataManager":"MyRoleDataManager","../../code/manager/PanelManager":"PanelManager","./BulletBase":"BulletBase"}],BulletFollow:[function(e,t,n){"use strict";cc._RF.push(t,"50b0dCmCzhK+psWWLwhl2d0","BulletFollow"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./BulletBase"),a=e("../../code/manager/BallManager"),i=e("./BallPrefab"),r=e("../../code/manager/PanelManager"),l=e("../../code/manager/MyRoleDataManager"),s=e("../../code/manager/EffectManager"),c=cc._decorator,d=c.ccclass,u=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.maxChangeRotation=4,t}return __extends(t,e),t.prototype.onLoad=function(){this.EasyGetCompleteClassInit(),this.speed=15},t.prototype.update=function(){if(!l.default.instance.checkGameState([4,7])){if(!this.target||!this.target.active){this.target=null;var e=this.findTarget();e&&(this.target=e)}if(this.target){var t=this.target.position.sub(this.node.position).mag(),n=this.target.getComponent(i.default);if(t<=n.radius)return this.remove(),s.default.instance.playEffect(s.EffectName.BulletFollowBoom,r.default.game.ballNode,this.node.position),r.default.game.addScore(this.killNum),void n.beAttack(this.killNum,this.node.position);var o=this.target.x-this.node.x,a=this.target.y-this.node.y,c=GlobalFun.huToJiao*Math.acos(o/t);c=this.changeRotation(c,o,a),c=this.getTempRotation(c,this.node.rotation),this.xSpeed=this.speed*Math.sin(c/GlobalFun.huToJiao),this.ySpeed=this.speed*Math.cos(c/GlobalFun.huToJiao),this.node.rotation=c}else(this.node.y>=this.maxHeight||this.node.x<=0||this.node.x>=750)&&this.remove();this.node.x+=this.xSpeed*l.default.instance.getTimeScale(),this.node.y+=this.ySpeed*l.default.instance.getTimeScale()}},t.prototype.init=function(e){this.isInit=!0,this.node.rotation=0,this.ySpeed=this.speed,this.xSpeed=0,this.maxHeight=.5*(cc.Canvas.instance.designResolution.height-cc.winSize.height)+cc.winSize.height,this.killNum=e},t.prototype.findTarget=function(){var e=null,t=0;for(var n in a.default.instance.curBallArr){var o=a.default.instance.curBallArr[n];(0==t||o.curLife<t)&&(t=o.curLife,e=o)}return e?e.node:null},t.prototype.changeRotation=function(e,t,n){return t<=0&&n>=0?e=90-e:t<=0&&n<0?e=-(270-e):t>0&&n>=0?e=90-e:t>0&&n<0&&(e=90+e),e},t.prototype.setRotationZheng=function(e){return e>360?(e-=360,this.setRotationZheng(e)):e<0?(e+=360,this.setRotationZheng(e)):e},t.prototype.getTempRotation=function(e,t){return(e=this.setRotationZheng(e))-(t=this.setRotationZheng(t))>=180?e=(t+=360)-this.maxChangeRotation:e-t<=-180?e=(t-=360)+this.maxChangeRotation:e-t>=this.maxChangeRotation?e=t+this.maxChangeRotation:e-t<=-this.maxChangeRotation&&(e=t-this.maxChangeRotation),e},t.prototype.setIcon=function(e){},t=__decorate([d],t)}(o.default));n.default=u,cc._RF.pop()},{"../../code/manager/BallManager":"BallManager","../../code/manager/EffectManager":"EffectManager","../../code/manager/MyRoleDataManager":"MyRoleDataManager","../../code/manager/PanelManager":"PanelManager","./BallPrefab":"BallPrefab","./BulletBase":"BulletBase"}],BulletLaser:[function(e,t,n){"use strict";cc._RF.push(t,"27168fgAkVFDJqXRf6Zn4LQ","BulletLaser"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./BulletBase"),a=e("../../code/manager/PanelManager"),i=e("../../code/manager/BallManager"),r=e("../../code/manager/MyRoleDataManager"),l=cc._decorator,s=l.ccclass,c=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.attackImg=null,t.disappearTime=1,t}return __extends(t,e),t.prototype.onLoad=function(){this.EasyGetCompleteClassInit(),this.speed=0},t.prototype.init=function(e,t){this.connon=t,this.isInit=!0,this.node.rotation=0,this.ySpeed=this.speed,this.xSpeed=0,this.maxHeight=.5*(cc.Canvas.instance.designResolution.height-cc.winSize.height)+cc.winSize.height,this.killNum=Math.ceil(.3*e)},t.prototype.isCollided=function(){if(this.isInit){var e=!1,t=i.default.instance.curBallArr,n=null,o=2e3;for(var r in t){var l=i.default.instance.curBallArr[r];if(l&&l.isInit&&Math.abs(l.node.x-this.node.x)<=l.radius){var s=l.radius-Math.sqrt(Math.pow(l.radius,2)-Math.pow(l.node.x-this.node.x,2)),c=l.node.y-this.node.y-.5*l.node.height+s;c=c<=0?0:c,Math.min(c,o)==c&&(o=c,n=l),e=!0}}e?(a.default.game.addScore(this.killNum),n.beAttack(this.killNum,this.node.position),this.iconImg.node.height=o,this.node.height=o,this.attackImg.node.y=o):(this.iconImg.node.height=1300,this.node.height=1300,this.attackImg.node.y=1300)}},t.prototype.update=function(){this.node.x=this.connon.parent.parent.x+this.connon.parent.x},t.prototype.lateUpdate=function(){r.default.instance.checkGameState([4,7])||this.isCollided()},t.prototype.setIcon=function(e){},__decorate([c(cc.Sprite)],t.prototype,"attackImg",void 0),t=__decorate([s],t)}(o.default);n.default=d,cc._RF.pop()},{"../../code/manager/BallManager":"BallManager","../../code/manager/MyRoleDataManager":"MyRoleDataManager","../../code/manager/PanelManager":"PanelManager","./BulletBase":"BulletBase"}],BulletPrefab:[function(e,t,n){"use strict";cc._RF.push(t,"3c618IZ5VBBmKhXJvBRZJ0F","BulletPrefab"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../code/manager/PanelManager"),a=e("./BulletBase"),i=e("../../code/manager/MyRoleDataManager"),r=cc._decorator,l=r.ccclass,s=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.moveX=5,t.moveTimes=0,t.moveTemp=2,t.addXtime=0,t}return __extends(t,e),t.prototype.onLoad=function(){this.EasyGetCompleteClassInit()},t.prototype.update=function(){i.default.instance.checkGameState([4,7])||(this.addXtime++,this.moveTimes>0&&2==this.moveTemp&&(this.moveTemp=0,this.addXtime=0,this.moveTimes--,this.node.x+=this.moveX),this.moveTemp++,this.node.y+=this.ySpeed*i.default.instance.getTimeScale(),this.node.x+=this.xSpeed*i.default.instance.getTimeScale(),(this.node.y>=this.maxHeight||this.node.x<0||this.node.x>750)&&this.remove())},t.prototype.lateUpdate=function(){if(!i.default.instance.checkGameState([4,7])){var e=this.isCollided();e&&(o.default.game.addScore(this.killNum),e.beAttack(this.killNum,this.node.position),this.remove())}},t.prototype.init=function(e,t){this.isInit=!0,this.node.parent?this.maxHeight=this.node.parent.height:this.maxHeight=.5*(cc.Canvas.instance.designResolution.height-cc.winSize.height)+cc.winSize.height,this.addXtime=0,this.moveTimes=3,this.moveTemp=1,this.moveX=t/this.moveTimes,0==t&&(this.moveTimes=0),this.killNum=Math.floor(e),this.node.rotation=0,this.ySpeed=20,this.xSpeed=0},t.prototype.setSpeed=function(e,t){this.speed=e,this.xSpeed=this.speed*Math.sin(t/GlobalFun.huToJiao),this.ySpeed=this.speed*Math.cos(t/GlobalFun.huToJiao),this.node.rotation=t},t=__decorate([l],t)}(a.default));n.default=s,cc._RF.pop()},{"../../code/manager/MyRoleDataManager":"MyRoleDataManager","../../code/manager/PanelManager":"PanelManager","./BulletBase":"BulletBase"}],BulletTable:[function(e,t,n){"use strict";cc._RF.push(t,"833aa6xWhtAy5ClF4igRypw","BulletTable"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){this.bullettable=e,this.cointable=t}return e.prototype.getSourceById=function(e){for(var t=this.bullettable.length,n=0;n<t;n++){var o=this.bullettable[n];if(o&&o.bullet_id==e)return o.icon_id}return"icon1_94000"},e.prototype.getBulletSourceNum=function(e){for(var t=this.bullettable.length,n=0;n<t;n++){var o=this.bullettable[n];if(o&&o.bullet_id==e)return Number(o.sourceNum)}return 0},e.prototype.getCoinSourceByPrice=function(e){for(var t=this.cointable.length,n=0;n<t;n++){var o=this.cointable[n];if(o&&o.coins==e)return o.id}return"40000"},e}();n.default=o,cc._RF.pop()},{}],BulletThrough:[function(e,t,n){"use strict";cc._RF.push(t,"e5b94bXZvZK3KG5v53kza7h","BulletThrough"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./BulletBase"),a=e("../../code/manager/MyRoleDataManager"),i=e("../../code/manager/PanelManager"),r=cc._decorator,l=r.ccclass,s=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.EasyGetCompleteClassInit(),this.speed=20},t.prototype.update=function(){if(!a.default.instance.checkGameState([4,7])){var e=this.isCollided();e&&e.uuid!=this.lastCollidedBallId&&(this.lastCollidedBallId=e.uuid,i.default.game.addScore(this.killNum),e.beAttack(this.killNum,this.node.position)),this.node.y+=this.ySpeed*a.default.instance.getTimeScale(),this.node.y>=this.maxHeight&&this.remove()}},t.prototype.init=function(e){this.isInit=!0,this.node.rotation=0,this.ySpeed=this.speed,this.lastCollidedBallId="",this.xSpeed=0,this.maxHeight=.5*(cc.Canvas.instance.designResolution.height-cc.winSize.height)+cc.winSize.height,this.killNum=e},t.prototype.setIcon=function(){},t=__decorate([l],t)}(o.default));n.default=s,cc._RF.pop()},{"../../code/manager/MyRoleDataManager":"MyRoleDataManager","../../code/manager/PanelManager":"PanelManager","./BulletBase":"BulletBase"}],CheckBox:[function(e,t,n){"use strict";cc._RF.push(t,"e8f89gmXsBO4J8QRbImVpsz","CheckBox"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.toggle=null,t.checkedSprite=null,t.uncheckSprite=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.toggle.node.on("toggle",this.click,this)},t.prototype.setCheck=function(e){this.toggle.isChecked=e,this.click()},t.prototype.click=function(){this.toggle.isChecked?(this.uncheckSprite.node.active=!1,this.checkedSprite.node.active=!0):(this.uncheckSprite.node.active=!0,this.checkedSprite.node.active=!1)},__decorate([i(cc.Toggle)],t.prototype,"toggle",void 0),__decorate([i(cc.Sprite)],t.prototype,"checkedSprite",void 0),__decorate([i(cc.Sprite)],t.prototype,"uncheckSprite",void 0),t=__decorate([a],t)}(cc.Component);n.default=r,cc._RF.pop()},{}],CoinPrefab:[function(e,t,n){"use strict";cc._RF.push(t,"b892bMW+c5DyZn3TukwTddo","CoinPrefab"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../code/basecode/EasyGetCompleteClass"),a=e("../../code/manager/NodePoolMananger"),i=e("../../code/manager/MyRoleDataManager"),r=e("../../code/manager/PanelManager"),l=e("../../code/manager/SoundManager"),s=e("../../code/Lib/Global"),c=e("../../code/manager/MissionManger"),d=cc._decorator,u=d.ccclass,p=d.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.disappeatAni=null,t.iconArr=[],t.coinIcon=null,t.price=1,t.disappearTime=0,t.isInDisappear=!1,t.notUpdata=!1,t.moveToPlayer=!1,t.isBackToPool=!1,t}return __extends(t,e),t.prototype.onLoad=function(){this.EasyGetCompleteClassInit()},t.prototype.update=function(){i.default.instance.checkGameState([4,7])||this.notUpdata||(this.disappearTime--,this.disappearTime<=0?(this.remove(),this.disappeatAni.stop()):this.disappearTime<=300&&!this.isInDisappear&&(this.disappeatAni.play("coinDisappear"),this.isInDisappear=!0),this.curSpeed&&this.aSpeed&&(this.curSpeed=this.curSpeed.subSelf(this.aSpeed.mul(i.default.instance.getTimeScale()))),0!=this.curSpeed.x&&(this.node.position=this.node.position.subSelf(this.curSpeed.mul(i.default.instance.getTimeScale())),this.node.rotation+=2*i.default.instance.getTimeScale()),this.speedChange())},t.prototype.speedChange=function(){if(this.isBackToPool){if(this.moveToPlayer){t=this.node.position,n=r.default.game.Player;var e=t.sub(n.position);this.node.position=this.node.position.sub(e.normalizeSelf().mul(30*i.default.instance.getTimeScale())),Math.abs(n.x-t.x)<=.5*n.width&&Math.abs(n.y-t.y)<=.4*n.height&&(this.moveToPlayer=!1,this.contactEffect())}}else{var t=this.node.position,n=r.default.game.Player;Math.abs(n.x-t.x)<=.5*n.width&&Math.abs(n.y-t.y)<=.4*n.height?(this.aSpeed=cc.v2(0,0),this.curSpeed=cc.v2(0,0),this.isBackToPool=!0,this.disappeatAni.stop(),this.contactEffect()):i.default.instance.isInMagnet>0&&Math.abs(n.x-t.x)<=300&&Math.abs(n.y-t.y)<=300?(this.aSpeed=cc.v2(0,0),this.curSpeed=cc.v2(0,0),this.isBackToPool=!0,this.moveToPlayer=!0,this.disappeatAni.stop()):t.x<=.5*this.node.width&&this.curSpeed.x>0?(this.curSpeed.x=-1*this.curSpeed.x,this.aSpeed.x=-1*this.aSpeed.x):t.x>=750-.5*this.node.width&&this.curSpeed.x<0?(this.curSpeed.x=-1*this.curSpeed.x,this.aSpeed.x=-1*this.aSpeed.x):this.node.y<=441+.5*this.node.width&&this.curSpeed.y>0&&(this.curSpeed.y=-.5*this.curSpeed.y,this.curSpeed.x=.5*this.curSpeed.x,(this.curSpeed.x>0&&this.aSpeed.x<0||this.curSpeed.x<0&&this.aSpeed.x>0||Math.abs(this.curSpeed.y)<=1)&&(this.aSpeed=cc.v2(0,0),this.curSpeed=cc.v2(0,0)))}},t.prototype.init=function(e){this.notUpdata=!1,this.node.active=!0,this.isBackToPool=!1,this.isInDisappear=!1,this.node.rotation=0,this.disappeatAni.stop(),this.node.scale=1,this.disappearTime=780,this.price=Math.floor(e),this.setIcon(),this.node.opacity=255},t.prototype.remove=function(){this.node.active=!1,a.default.instance.push(this.node)},t.prototype.toTop=function(){var e=s.default.random();this.curSpeed=cc.v2((1.5*Math.random()+1)*e,s.default.Random(-5,-10)),this.aSpeed=cc.v2(0,-.3)},t.prototype.setIcon=function(){-1==this.price?this.coinIcon.spriteFrame=this.iconArr[1]:this.coinIcon.spriteFrame=this.iconArr[0]},t.prototype.setIconById=function(e){this.coinIcon.spriteFrame=this.iconArr[1]},t.prototype.contactEffect=function(){-1!=this.price?(l.default.playSoundEffect(l.default.getCoin),r.default.game.playCoinNumEffect(this.node.position,"+"+this.price),r.default.gameUi.moveGoldToLable(this.node),i.default.instance.curGold+=this.price,c.default.instance.collectMissionNum(6,this.price)):(l.default.playSoundEffect(l.default.getDiamod),i.default.instance.curDiamond+=1,this.remove())},__decorate([p(cc.Animation)],t.prototype,"disappeatAni",void 0),__decorate([p([cc.SpriteFrame])],t.prototype,"iconArr",void 0),__decorate([p(cc.Sprite)],t.prototype,"coinIcon",void 0),t=__decorate([u],t)}(o.default);n.default=h,cc._RF.pop()},{"../../code/Lib/Global":"Global","../../code/basecode/EasyGetCompleteClass":"EasyGetCompleteClass","../../code/manager/MissionManger":"MissionManger","../../code/manager/MyRoleDataManager":"MyRoleDataManager","../../code/manager/NodePoolMananger":"NodePoolMananger","../../code/manager/PanelManager":"PanelManager","../../code/manager/SoundManager":"SoundManager"}],ColorMaterial:[function(e,t,n){"use strict";cc._RF.push(t,"2c2f2MI2XpCgb8Ij3JIvPT/","ColorMaterial"),cc.game.once(cc.game.EVENT_ENGINE_INITED,function(){var t=cc.renderer.renderEngine,n=(cc.vmath,t.renderer),o=t.gfx,a=t.Material;e("colorChange");function i(){a.call(this,!1);var e=new n.Pass("colorchage");e.setDepth(!1,!1),e.setCullMode(o.CULL_NONE),e.setBlend(o.BLEND_FUNC_ADD,o.BLEND_SRC_ALPHA,o.BLEND_ONE_MINUS_SRC_ALPHA,o.BLEND_FUNC_ADD,o.BLEND_SRC_ALPHA,o.BLEND_ONE_MINUS_SRC_ALPHA);var t=new n.Technique(["transparent"],[{name:"iTexture",type:n.PARAM_TEXTURE_2D},{name:"u_dH",type:n.PARAM_FLOAT},{name:"u_dS",type:n.PARAM_FLOAT},{name:"u_dL",type:n.PARAM_FLOAT}],[e]);this._texture=null,this.u_dH=10,this.u_dS=0,this.u_dL=0,this._effect=this.effect=new n.Effect([t],{u_dH:this.u_dH,u_dS:this.u_dS,u_dL:this.u_dL}),this._mainTech=t}cc.js.extend(i,a),cc.js.mixin(i.prototype,{getTexture:function(){return this._texture},setTexture:function(e){this._texture!==e&&(this._texture=e,this.effect.setProperty("iTexture",e.getImpl()),this._texIds.iTexture=e.getId())},setU_dH:function(e){this.u_dH=e,this.effect.setProperty("u_dH",this.u_dH)},setU_dS:function(e){this.u_dS=e,this.effect.setProperty("u_dS",this.u_dS)},setU_dL:function(e){this.u_dL=e,this.effect.setProperty("u_dL",this.u_dL)},setU_dHSL:function(e,t,n){this.u_dH=e,this.u_dS=t,this.u_dL=n,this.effect.setProperty("u_dH",this.u_dH),this.effect.setProperty("u_dS",this.u_dS),this.effect.setProperty("u_dL",this.u_dL)}}),window.ColorMaterial=i}.bind(void 0)),cc._RF.pop()},{colorChange:"colorChange"}],CompletePanel:[function(e,t,n){"use strict";cc._RF.push(t,"d148eJRJt9NKpTr9pOEk3DT","CompletePanel"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../code/basecode/BasePanel"),a=e("../../../code/manager/UiAniManager"),i=e("../../../code/manager/PanelManager"),r=e("../../../code/Config/Config"),l=e("../../../code/manager/MissionManger"),s=e("../../../code/manager/MyRoleDataManager"),c=e("../../../code/manager/SoundManager"),d=e("../MissionPanel/RewardItem"),u=e("../../../code/manager/TableManager"),p=e("../../../code/manager/BallManager"),h=e("../../../code/manager/GuideManager"),f=e("../../../code/ads/AdsGroupController"),g=cc._decorator,m=g.ccclass,y=g.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rewardPrefab=null,t.completeLabel=null,t.levelPro=null,t.proSprite=null,t.curLevel=null,t.nextLevel=null,t.missionPro=null,t.missionProLabel=null,t.missIonNumLabel=null,t.missionIcon=null,t.panelNode=null,t.backGround=null,t.nameLable=null,t.adsLable=null,t.levelNode=null,t.rewardNode=null,t.adsBtn=null,t.moreRewardMap=new Map,t.actionStep=0,t.isInBlack=!1,t._aniType=a.UiAniType.TopToDown,t}return __extends(t,e),t.prototype.openPanel=function(){this.playUIAni(a.InOrOut.IN),this.moreRewardMap=new Map,this.setState(),this.levelNode.x=0,this.rewardNode.x=-635,this.isInBlack=!1,this.levelPro.progress=0,this.adsBtn.node.opacity=0,this.rewardPrefab.y=-206,s.default.instance.maxScore<s.default.instance.curScore&&(s.default.instance.maxScore=s.default.instance.curScore),this.missionPro.progress=(l.default.instance.curSpecilMission.pro-l.default.instance.itemCollectNum)/l.default.instance.curSpecilMission.quest,this.actionStep=0,this.setLable(),l.default.instance.maxMissionNum(2,s.default.instance.curScore),l.default.instance.saveMission(),c.default.stopBackGroudMusic()},t.prototype.closePanel=function(){this.unscheduleAllCallbacks(),this.playUIAni(a.InOrOut.OUT),this.dleEvent()},t.prototype.panelIn=function(){this.addEvent(),i.default.game.playerScript.outFunnel(),i.default.game.playerScript.clearEfect(),this.completeAction()},t.prototype.panelOut=function(){this.dleEvent(),i.default.instance.deleteOpen(r.PanelName.CompletePanel),this.node.removeFromParent()},t.prototype.setLable=function(){this.completeLabel.string=GlobalFun.i18n.t("lable.10185"),this.nameLable.string=GlobalFun.i18n.t("lable.10184"),this.adsLable.string=GlobalFun.i18n.t("lable.10191")},t.prototype.addEvent=function(){this.panelNode.on(cc.Node.EventType.TOUCH_START,this.closeBtnTap,this)},t.prototype.dleEvent=function(){this.panelNode.off(cc.Node.EventType.TOUCH_START,this.closeBtnTap,this),this.adsBtn.node.off("click",this.adsBtnTap,this)},t.prototype.setState=function(){this.missionProLabel.string=l.default.instance.curSpecilMission.pro+"/"+l.default.instance.curSpecilMission.quest,this.missIonNumLabel.string="+"+l.default.instance.itemCollectNum,this.missionIcon.spriteFrame=i.default.gameUi.iconAtlas.getSpriteFrame(u.default.instance.propTable.getIcon(l.default.instance.curSpecilMission.collectPropId)),s.default.instance.checkGameState([5])?(this.curLevel.string=s.default.instance.curLevel-1+"",this.nextLevel.string=s.default.instance.curLevel+"",s.default.instance.isFromComplete=!0):(s.default.instance.isFromComplete=!1,this.curLevel.string=s.default.instance.curLevel+"",this.nextLevel.string=s.default.instance.curLevel+1+"");var e=new Map;e.set(r.CurrencyType.Gold,s.default.instance.curGold),s.default.instance.curGold=0,s.default.instance.curDiamond>0&&e.set(r.CurrencyType.Diamond,s.default.instance.curDiamond),s.default.instance.curDiamond=0,this.rewardPrefab.getComponent(d.default).init(e),s.default.instance.curDiamond<2||h.default.instance.checkCanGuide(10002,0)?(this.moreRewardMap=new Map,this.moreRewardMap=u.default.instance.mapLevelTable.getGameEndReward(s.default.instance.curLevel-1),this.moreRewardMap.has(r.CurrencyType.Diamond)&&!e.has(r.CurrencyType.Diamond)&&e.set(r.CurrencyType.Diamond,0),this.moreRewardMap.has(r.CurrencyType.Chip)&&!e.has(r.CurrencyType.Chip)&&e.set(r.CurrencyType.Chip,0),this.guideReward(e),this.rewardPrefab.getComponent(d.default).init(e)):this.moreRewardMap=e,e.forEach(function(e,t){s.default.instance.addCurrency(e,t)})},t.prototype.beBlack=function(){this.dleEvent(),this.panelNode.y=1691,this.backGround.opacity=0,this.panelOut(),i.default.gameUi.playUiInAni(),i.default.game.Player.x=376,i.default.gameUi.setBackGroud(),p.default.instance.clearAllBallBullet(),i.default.gameUi.handSprite.node.x=-141},t.prototype.completeAction=function(){var e=this;if(0==this.actionStep){var t=i.default.gameUi.pro.progress,n=t/50,o=(this.levelPro.totalLength,l.default.instance.curSpecilMission.pro/l.default.instance.curSpecilMission.quest),a=o/50;this.missionProLabel.string=l.default.instance.curSpecilMission.pro+"/"+l.default.instance.curSpecilMission.quest,this.missIonNumLabel.string="+"+l.default.instance.itemCollectNum,this.missionIcon.spriteFrame=i.default.gameUi.iconAtlas.getSpriteFrame(u.default.instance.propTable.getIcon(l.default.instance.curSpecilMission.collectPropId));var r=0;this.schedule(function(){r++,e.levelPro.progress+=n,t<=e.levelPro.progress&&(e.levelPro.progress=t),e.proSprite.x=e.levelPro.totalLength*e.levelPro.progress,e.missionPro.progress+=a,o<=e.missionPro.progress&&(e.missionPro.progress=o),r>=51&&e.actionStep++},.01,50)}else 1==this.actionStep&&(this.actionStep++,this.panelAni.play("completeAni"),this.panelAni.once("stop",function(){e.actionStep++,0==e.moreRewardMap.size?e.adsCanTap():e.rewardPrefab.getComponent(d.default).moreRewardIn(e.moreRewardMap,function(){e.panelAni.play("completeBtnAni"),e.panelAni.once("stop",function(){e.adsCanTap()})})}))},t.prototype.completeQuick=function(){var e=this;0==this.actionStep?(this.unscheduleAllCallbacks(),this.levelPro.progress=i.default.gameUi.pro.progress,this.proSprite.x=this.levelPro.totalLength*this.levelPro.progress,this.missionPro.progress=l.default.instance.curSpecilMission.pro/l.default.instance.curSpecilMission.quest,this.actionStep++,this.completeAction()):2==this.actionStep&&(this.panelAni.play("completeAni",.9),this.panelAni.off("stop"),this.panelAni.once("stop",function(){e.actionStep++,0==e.moreRewardMap.size?e.adsCanTap():e.rewardPrefab.getComponent(d.default).moreRewardIn(e.moreRewardMap,function(){e.panelAni.play("completeBtnAni"),e.panelAni.once("stop",function(){e.adsCanTap()})})}))},t.prototype.closeBtnTap=function(){if(0==this.actionStep||2==this.actionStep)this.completeQuick();else if(1==this.actionStep)this.completeAction();else if(this.actionStep>=4){if(this.isInBlack)return;this.isInBlack=!0,i.default.gameUi.beBlack(),this.schedule(this.beBlack.bind(this),.37,0)}},t.prototype.adsCanTap=function(){this.actionStep++,this.adsBtn.node.on("click",this.adsBtnTap,this),!s.default.instance.checkGameState([5])||5!=s.default.instance.curLevel&&10!=s.default.instance.curLevel||s.default.instance.isRate||i.default.instance.openPanel(r.PanelName.FiveStarPanel,i.default.gameUi.middleNode)},t.prototype.adsBtnTap=function(){if(!this.isInBlack){f.default.instance.waitAdsReady("GameComplete",function(){i.default.gameUi.openMask(),f.default.instance.showAds("GameComplete",function(e,t){t&&(this.moreRewardMap.forEach(function(e,t){s.default.instance.addCurrency(e,t)}),this.isInBlack=!0,i.default.gameUi.beBlack(),this.schedule(this.beBlack.bind(this),.37,0))}.bind(this))},function(){console.log("GameComplete"),i.default.gameUi.openMask(!0),f.default.instance.loadAds("GameComplete",!0)},this,120,function(){i.default.gameUi.openMask()},this,0,2)}},t.prototype.guideReward=function(e){h.default.instance.checkCanGuide(10001,0)?e.set(r.CurrencyType.Gold,e.get(r.CurrencyType.Gold)+500):h.default.instance.checkCanGuide(10002,0)&&e.set(r.CurrencyType.Chip,50)},__decorate([y({type:cc.Node,tooltip:"\u5956\u52b1\u8282\u70b9"})],t.prototype,"rewardPrefab",void 0),__decorate([y({type:cc.Label,tooltip:"\u5b8c\u6210lable"})],t.prototype,"completeLabel",void 0),__decorate([y({type:cc.ProgressBar,tooltip:"\u5b8c\u6210pro"})],t.prototype,"levelPro",void 0),__decorate([y({type:cc.Node,tooltip:"\u5173\u5361\u8fdb\u5ea6\u6807\u5fd7"})],t.prototype,"proSprite",void 0),__decorate([y({type:cc.Label,tooltip:"\u5f53\u524d\u5173"})],t.prototype,"curLevel",void 0),__decorate([y({type:cc.Label,tooltip:"\u4e0b\u4e00\u5173"})],t.prototype,"nextLevel",void 0),__decorate([y({type:cc.ProgressBar,tooltip:"\u4efb\u52a1pro"})],t.prototype,"missionPro",void 0),__decorate([y({type:cc.Label,tooltip:"\u4efb\u52a1proLabel"})],t.prototype,"missionProLabel",void 0),__decorate([y({type:cc.Label,tooltip:"\u4efb\u52a1\u6570\u91cflabel"})],t.prototype,"missIonNumLabel",void 0),__decorate([y({type:cc.Sprite,tooltip:"\u4efb\u52a1icon"})],t.prototype,"missionIcon",void 0),__decorate([y({type:cc.Node,tooltip:"\u754c\u9762\u8282\u70b9"})],t.prototype,"panelNode",void 0),__decorate([y({type:cc.Node,tooltip:"\u80cc\u666f\u8282\u70b9"})],t.prototype,"backGround",void 0),__decorate([y({type:cc.Label,tooltip:""})],t.prototype,"nameLable",void 0),__decorate([y({type:cc.Label,tooltip:""})],t.prototype,"adsLable",void 0),__decorate([y({type:cc.Node,tooltip:"\u8fdb\u5ea6\u8282\u70b9"})],t.prototype,"levelNode",void 0),__decorate([y({type:cc.Node,tooltip:"\u989d\u5916\u5956\u52b1\u8282\u70b9"})],t.prototype,"rewardNode",void 0),__decorate([y({type:cc.Button,tooltip:"\u5e7f\u544a\u6309\u94ae"})],t.prototype,"adsBtn",void 0),t=__decorate([m],t)}(o.default);n.default=b,cc._RF.pop()},{"../../../code/Config/Config":"Config","../../../code/ads/AdsGroupController":"AdsGroupController","../../../code/basecode/BasePanel":"BasePanel","../../../code/manager/BallManager":"BallManager","../../../code/manager/GuideManager":"GuideManager","../../../code/manager/MissionManger":"MissionManger","../../../code/manager/MyRoleDataManager":"MyRoleDataManager","../../../code/manager/PanelManager":"PanelManager","../../../code/manager/SoundManager":"SoundManager","../../../code/manager/TableManager":"TableManager","../../../code/manager/UiAniManager":"UiAniManager","../MissionPanel/RewardItem":"RewardItem"}],CompleteRewardPanel:[function(e,t,n){"use strict";cc._RF.push(t,"cfd3fLfvp5AQoerwTogDxuB","CompleteRewardPanel"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../code/basecode/BasePanel"),a=e("../../code/manager/UiAniManager"),i=e("../../code/manager/PanelManager"),r=e("../../code/Config/Config"),l=e("../../code/manager/MyRoleDataManager"),s=e("./MissionPanel/RewardItem"),c=cc._decorator,d=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nameLabel=null,t.completeLabel=null,t.prizesLabel=null,t.rewardPrefab=null,t.closeBtn=null,t.connonNode=null,t._aniType=a.UiAniType.TopToDown,t}return __extends(t,e),t.prototype.openPanel=function(e){this.playUIAni(a.InOrOut.IN),this.setLable(),this.rewardPrefab.getComponent(s.default).init(e)},t.prototype.closePanel=function(){this.playUIAni(a.InOrOut.OUT),this.dleEvent()},t.prototype.panelIn=function(){this.addEvent()},t.prototype.panelOut=function(){i.default.instance.deleteOpen(r.PanelName.CompleteRewardPanel),this.node.removeFromParent()},t.prototype.addEvent=function(){this.closeBtn.node.on("click",this.closeBtnTap,this),this.node.on(cc.Node.EventType.TOUCH_END,this.closeBtnTap,this)},t.prototype.dleEvent=function(){this.closeBtn.node.off("click",this.closeBtnTap,this),this.node.off(cc.Node.EventType.TOUCH_END,this.closeBtnTap,this)},t.prototype.setLable=function(){this.nameLabel.string=GlobalFun.i18n.t("lable.10231").replace("%d",l.default.instance.curLevel-1),this.completeLabel.string=GlobalFun.i18n.t("lable.10185"),this.prizesLabel.string=GlobalFun.i18n.t("lable.10190")},t.prototype.closeBtnTap=function(){i.default.instance.closePanel(r.PanelName.CompleteRewardPanel),this.rewardPrefab.getComponent(s.default).rewardFly()},__decorate([u({type:cc.Label,tooltip:"\u6807\u9898label"})],t.prototype,"nameLabel",void 0),__decorate([u({type:cc.Label,tooltip:"\u5b8c\u6210label"})],t.prototype,"completeLabel",void 0),__decorate([u({type:cc.Label,tooltip:"\u5956\u52b1label"})],t.prototype,"prizesLabel",void 0),__decorate([u({type:cc.Node,tooltip:"\u5956\u52b1label"})],t.prototype,"rewardPrefab",void 0),__decorate([u({type:cc.Button,tooltip:"\u5173\u95ed\u6309\u94ae"})],t.prototype,"closeBtn",void 0),__decorate([u({type:cc.Node,tooltip:"\u70ae\u8282\u70b9"})],t.prototype,"connonNode",void 0),t=__decorate([d],t)}(o.default);n.default=p,cc._RF.pop()},{"../../code/Config/Config":"Config","../../code/basecode/BasePanel":"BasePanel","../../code/manager/MyRoleDataManager":"MyRoleDataManager","../../code/manager/PanelManager":"PanelManager","../../code/manager/UiAniManager":"UiAniManager","./MissionPanel/RewardItem":"RewardItem"}],Config:[function(e,t,n){"use strict";cc._RF.push(t,"be318l8aC5HfYe0prsRe2iY","Config"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(){function e(){}return e.APKChannel="Apk",e=__decorate([a],e)}());n.default=i,function(e){e.AdsGroupController="org/cocos2dx/AdsGroupController",e.Um_Fb_SDKManger="org/cocos2dx/statistics/Um_Fb_SDKManger",e.AppActivity="org/cocos2dx/javascript/AppActivity",e.ToolManager="org/cocos2dx/statistics/ToolManager",e.GoogleSDKManger="org/cocos2dx/statistics/GoogleSDKManger"}(n.JavaClassName||(n.JavaClassName={})),function(e){e.AdsGroupController="AdsClass",e.SDKManager="NativeOcClass",e.Um_SDKManger="UmSDKManager",e.InAppPurchass="InAppPurchase"}(n.IosClassName||(n.IosClassName={})),function(e){e.openMall="openMall"}(n.SelfEvent||(n.SelfEvent={})),function(e){e.ResurgenceUi="ResurgenceUi",e.FiveStarPanel="FiveStarPanel",e.CompletePanel="CompletePanel",e.MapPanel="MapPanel",e.RefitShopPanel="RefitShopPanel",e.SetPanel="SetPanel",e.AircraftPanel="AircraftPanel",e.WorkShopPanel="WorkShopPanel",e.MissionPanel="MissionPanel",e.PausePanel="PausePanel",e.ShopPanel="ShopPanel",e.GuidePanel="GuidePanel",e.GoShopPanel="GoShopPanel",e.CompleteRewardPanel="CompleteRewardPanel",e.TestPanel="TestPanel"}(n.PanelName||(n.PanelName={})),function(e){e[e.LEFT=0]="LEFT",e[e.Right=1]="Right"}(n.FunnelConnonDirection||(n.FunnelConnonDirection={})),function(e){e.BulletPrefab="bulletPrefab",e.BulletFollow="bulletFollowPrefab",e.BulletThrough="bulletThroughPrefab",e.BulletLaser="bulletLaserPrefab",e.BulletBoom="bulletBoomPrefab",e.LifeShield="LifeShield"}(n.BulletType||(n.BulletType={})),function(e){e.FunnelConnon="FunnelConnon"}(n.FunnelType||(n.FunnelType={})),function(e){e[e.MainGunLevel=0]="MainGunLevel",e[e.ExtraGun=1]="ExtraGun",e[e.LifeLevel=2]="LifeLevel"}(n.RoleAttribute||(n.RoleAttribute={})),function(e){e[e.Gold=51e4]="Gold",e[e.Diamond=510001]="Diamond",e[e.Chip=510002]="Chip"}(n.CurrencyType||(n.CurrencyType={})),cc._RF.pop()},{}],ConnonBase:[function(e,t,n){"use strict";cc._RF.push(t,"50fddl3fdlO247do89dlcG6","ConnonBase"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletNode=null,t.connonSprite=null,t.connonId=0,t.shootSpeed=1,t.bulletHit=1,t.isInShoot=!1,t.minShootTemp=.1,t.bulletNum=1,t.shootTemp=1,t}return __extends(t,e),t.prototype.init=function(e){this.connonId=e},__decorate([i(cc.Node)],t.prototype,"bulletNode",void 0),__decorate([i(cc.Sprite)],t.prototype,"connonSprite",void 0),t=__decorate([a],t)}(cc.Component);n.default=r,cc._RF.pop()},{}],ConnonTable:[function(e,t,n){"use strict";cc._RF.push(t,"5f4c7fpORJN16NUO4G4S18X","ConnonTable"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../code/manager/MyRoleDataManager"),a=e("../../code/Config/Config"),i=function(){function e(e){this.table=e}return e.prototype.getScourceId=function(e,t){void 0===t&&(t=0);for(var n=0;n<this.table.length;n++){var o=this.table[n];if(o&&Number(o.id)==e){if(0==t)return o.image_cannon;if(1==t)return o.image_machine;if(2==t)return o.image_basis;if(4==t)return[o.image_cannon,o.image_machine,o.image_basis]}}return cc.warn("connonTable getScourceId: Do not have id "+e),""},e.prototype.getDataById=function(e){for(var t=0;t<this.table.length;t++){var n=this.table[t];if(n&&Number(n.id)==e)return n}return cc.warn("connonTable: Do not have id "+e),{}},e.prototype.getBulletSource=function(e,t){for(var n=0;n<this.table.length;n++){var o=this.table[n];if(o&&Number(o.id)==e)return 0==t?o.image_bullet_c:1==t?o.image_bullet_m:[o.image_bullet_c,o.image_bullet_m]}return["94000","Bullet_G_301000_"]},e.prototype.getGoldMore=function(e){for(var t=0;t<this.table.length;t++){var n=this.table[t];if(n&&Number(n.id)==e)return.01*Number(n.coins)}return cc.warn("ConnonTable getGoldMore do not have"+e),1},e.prototype.getLife=function(e,t){for(var n=0;n<this.table.length;n++){var o=this.table[n];if(o&&Number(o.id)==e)return Number(o.armor_basis)+(t-1)*o.armor_up_b}return cc.warn("ConnonTable getLife do not have"+e),0},e.prototype.getConnonName=function(e){for(var t=0;t<this.table.length;t++){var n=this.table[t];if(n&&Number(n.id)==e)return n.name}return""},e.prototype.getBestConnon=function(){for(var e=this.table.length-1;e>=0;e--){var t=this.table[e];if(t&&o.default.instance.checkConnonUnlocked(t.id))return t}},e.prototype.countUpgradeMoney=function(e,t,n){var o=0;return n==a.RoleAttribute.MainGunLevel?o=Math.pow(e.c_price_b,t)*e.c_price:n==a.RoleAttribute.ExtraGun?o=Math.pow(e.m_price_b,t)*e.m_price:n==a.RoleAttribute.LifeLevel&&(o=Math.pow(e.armor_price_b,t)*e.armor_price),Math.floor(o)},e.prototype.getBestTenUpgradeMoney=function(){var e=this.getBestConnon();return Math.pow(e.c_price_b,10)*e.c_price},e.prototype.getConnonType=function(e){for(var t=0;t<this.table.length;t++){var n=this.table[t];if(n&&Number(n.id)==e)return Number(n.type)}},e.prototype.getConnonAttribute=function(e,t){for(var n=0;n<this.table.length;n++){var o=this.table[n];if(o&&Number(Number(o.id))==e)return this.attribute(o.attribute,t)}return 0},e.prototype.attribute=function(e,t){if(""==e)return 0;for(var n=e.split(";"),o=n.length,a=0;a<o;a++){var i=n[a];if(i)for(var r=i.split(":"),l=r.length,s=0;s<l;s++)if(Number(r[0])==t)return Number(r[1])}return 0},e}();n.default=i,cc._RF.pop()},{"../../code/Config/Config":"Config","../../code/manager/MyRoleDataManager":"MyRoleDataManager"}],Connon:[function(e,t,n){"use strict";cc._RF.push(t,"787f2nl5z5GwrbamdjnghA1","Connon"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../code/manager/NodePoolMananger"),a=e("../../code/manager/MyRoleDataManager"),i=e("../../code/manager/TableManager"),r=e("../../code/manager/SoundManager"),l=e("./ConnonBase"),s=e("../../code/Lib/Global"),c=e("../../code/Config/Config"),d=e("../../code/manager/PanelManager"),u=e("../../code/manager/EffectManager"),p=cc._decorator,h=p.ccclass,f=p.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletPrefab=[],t.wheelSprite=null,t.connonAtlas=null,t.fire=null,t.subConnon=null,t.funnelLeftNode=null,t.funnelRightNode=null,t.invincibleAin=null,t.invincibleTime=5e3,t.maxSpeed=0,t.aSpeed=0,t.funnelPrefabArr=[],t.mainGunHit=0,t.extraGunHit=0,t.goldMore=1,t.maxLife=0,t.life=0,t.curASpeed=0,t.curSpeed=0,t._showType=!1,t.invincibleEndTime=0,t.bulletSourceNum=0,t.maxBulletNum=5,t.ballKill=[200,400,600,1e3],t.effectMap=new Map,t}return __extends(t,e),t.prototype.onLoad=function(){this.subConnonScript=this.subConnon.getComponent("SubConnon")},t.prototype.onBeginContact=function(e,t,n){s.default.getTime()<this.invincibleEndTime||-1!=n.name.search("Prefab<PhysicsCircleCollider>")&&1==a.default.instance.gameState&&this.dleLife(this.ballKill[n.node.ECScript.size])},t.prototype.init=function(e){this.connonId=e},t.prototype.reLife=function(e){if(void 0===e&&(e=-1),-1==e)this.maxLife=this.life=i.default.instance.connonTable.getLife(this.connonId,a.default.instance.getConnonLevel(c.RoleAttribute.LifeLevel,this.connonId));else if(0==e){var t=i.default.instance.connonTable.getLife(this.connonId,a.default.instance.getConnonLevel(c.RoleAttribute.LifeLevel,this.connonId));this.life+=t-this.maxLife,this.maxLife=t}else{var n=Math.floor(this.maxLife*e);this.life=this.life+n<=this.maxLife?this.life+n:this.maxLife}d.default.gameUi.updateLife(this.life,this.maxLife)},t.prototype.shoot=function(){if(!a.default.instance.checkGameState([0,2,3,4])||this.showType){this.showType||r.default.playSoundEffect(r.default.shoot);var e=this.bulletNum;if(e%2==1){var t=17*-Math.floor((e-1)/2);this.setBulletPos(t);for(var n=1;n<e;n++)this.setBulletPos(t+17*n)}else for(t=17*-(Math.floor((e-1)/2)+1)+5,n=0;n<e;n++)this.setBulletPos(t+17*n+5)}},t.prototype.setBulletPos=function(e){var t=o.default.instance.pop("bulletPrefab");t&&!t.parent&&this.bulletNode.addChild(t),t.active=!0,t.ECScript.init(this.bulletHit,e),t.ECScript.setIcon(this.mainConnonBulletIcon),t.setPosition(this.node.position.x,this.node.position.y+50)},t.prototype.startShoot=function(){this.isInShoot||(this.isInShoot=!0,this.connonShack(),this.node.opacity=255,this.invincibleAin.play("connonFire"),this.setShoot(),this.shoot(),this.subConnonScript.startShoot(this.subConnonBulletIcon),this.funnelLeftScript&&this.funnelLeftScript.startShoot(this.mainConnonBulletIcon),this.funnelRightScript&&this.funnelRightScript.startShoot(this.mainConnonBulletIcon))},t.prototype.setShoot=function(){var e=a.default.instance.getConnonInfo(this.connonId),t=i.default.instance.connonTable.getDataById(this.connonId);this.goldMore=s.default.accMul(t.coins,.01),this.mainGunHit=e.mainGunLevel*t.c_att_b,this.bulletHit=this.mainGunHit+a.default.instance.addTempBulletHit(0),this.bulletNum=Math.floor((e.mainGunLevel-1)/3)+1,this.bulletNum=this.bulletNum>this.maxBulletNum?this.maxBulletNum:this.bulletNum,this.bulletNum=a.default.instance.isInHit>0?this.bulletNum+1:this.bulletNum,this.subConnonScript.init(this.connonId),this.shootTemp=1/this.minShootTemp,this.schedule(this.shoot,this.minShootTemp,cc.macro.REPEAT_FOREVER)},t.prototype.addBulletHit=function(e,t,n){var o=this;void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=-1);var i=0==t?e:Math.ceil(this.mainGunHit*e);console.log("\u589e\u52a0\u5b50\u5f39\u4f24\u5bb3 "+i),this.bulletHit=this.mainGunHit+a.default.instance.addTempBulletHit(i),-1!=n&&this.scheduleOnce(function(){a.default.instance.checkGameState([0,3,4,5])||(o.bulletHit=o.mainGunHit+a.default.instance.addTempBulletHit(-i))},n)},t.prototype.cancelShoot=function(){this.isInShoot=!1,this.invincibleAin.stop("connonFire"),this.fire.spriteFrame=null,this.unschedule(this.shoot),this.stopShack(),this.subConnonScript.cancelShoot(),this.funnelLeftScript&&this.funnelLeftScript.cancelShoot(),this.funnelRightScript&&this.funnelRightScript.cancelShoot()},t.prototype.resurgenceInvincible=function(){var e=cc.repeatForever(cc.sequence(cc.fadeTo(.6,100),cc.fadeTo(.6,255)));this.node.runAction(e),this.invincibleEndTime=s.default.getTime()+this.invincibleTime;var t=function(){this.node.stopAction(e);var t=cc.fadeIn(.1);this.node.runAction(t)}.bind(this);this.unschedule(t),this.schedule(t,5,0)},t.prototype.setConnonSkin=function(e){this.connonId=e;var t=i.default.instance.connonTable.getScourceId(e,4),n=t[0],o=t[1],r=t[2],l=a.default.instance.getConnonInfo(this.connonId);this.connonSprite.spriteFrame=this.connonAtlas.getSpriteFrame(n+a.default.instance.getSourceNum(l.mainGunLevel-1)),this.wheelSprite.spriteFrame=this.connonAtlas.getSpriteFrame(r+"0"),this.subConnonScript.setConnonIcon(-1==l.extraGun?null:this.connonAtlas.getSpriteFrame(o+a.default.instance.getSourceNum(l.extraGun-1)))},t.prototype.setBullet=function(){var e=a.default.instance.getConnonInfo(this.connonId),t=i.default.instance.connonTable.getBulletSource(this.connonId,2),n=t[0],o=t[1];this.mainConnonBulletIcon=this.connonAtlas.getSpriteFrame(n+a.default.instance.getSourceNum(e.mainGunLevel-1)),this.subConnonBulletIcon=this.connonAtlas.getSpriteFrame(o+a.default.instance.getSourceNum(e.extraGun-1))},t.prototype.getFunnel=function(e){if(!a.default.instance.checkGameState([2,3,4,5,6])||this.showType){var t=c.FunnelType.FunnelConnon;this.funnelLeftScript?this.funnelRightScript?this.funnelLeftScript.endTime<this.funnelRightScript.endTime?this.funnelLeftScript.setEndTime():this.funnelRightScript.setEndTime():(this.funnelRight=cc.instantiate(d.default.game.funnelPrefabArr[0]),this.funnelRightNode.addChild(this.funnelRight),this.funnelRightScript=this.funnelRight.getComponent(t),this.funnelRightScript.funnelInit(e,this,this.bulletNode,c.FunnelConnonDirection.Right,this.showType)):(this.funnelLeft=cc.instantiate(d.default.game.funnelPrefabArr[0]),this.funnelLeftNode.addChild(this.funnelLeft),this.funnelLeftScript=this.funnelLeft.getComponent(t),this.funnelLeftScript.funnelInit(e,this,this.bulletNode,c.FunnelConnonDirection.LEFT,this.showType)),this.isInShoot&&(this.funnelLeftScript&&this.funnelLeftScript.startShoot(this.mainConnonBulletIcon),this.funnelRightScript&&this.funnelRightScript.startShoot(this.mainConnonBulletIcon))}},t.prototype.funnelShow=function(e){e&&!isNaN(e)&&(this.getFunnel(e),this.getFunnel(e))},t.prototype.outFunnel=function(){this.funnelLeftScript&&this.funnelLeftScript.funnelOut(),this.funnelRightScript&&this.funnelRightScript.funnelOut(),this.funnelLeftScript=null,this.funnelRightScript=null},t.prototype.addEffect=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){switch(n.label){case 0:return this.effectMap.has(e)?[2]:[4,u.default.instance.playLoopEffect(e,this.node,cc.v2(0,0))];case 1:return t=n.sent(),this.effectMap.set(e,t),[2]}})})},t.prototype.delEffect=function(e){if(this.effectMap.has(e)){var t=this.effectMap.get(e);t.removeFromParent(),o.default.instance.push(t),this.effectMap.delete(e)}},t.prototype.clearEfect=function(){this.effectMap.forEach(function(e,t){e.removeFromParent(),o.default.instance.push(e)}),this.effectMap.clear()},t.prototype.dleLife=function(e){e=Number(e),isNaN(e)||(this.funnelLeftScript&&this.funnelLeftScript.bulletType==c.BulletType.LifeShield&&this.funnelLeftScript.leftLife>0?this.funnelLeftScript.dleLife(e):this.funnelRightScript&&this.funnelRightScript.bulletType==c.BulletType.LifeShield&&this.funnelRightScript.leftLife>0?this.funnelRightScript.dleLife(e):this.life-=e,this.life<=0&&(r.default.playSoundEffect(r.default.death),a.default.instance.gameState=2,this.cancelShoot()),d.default.gameUi.redBlink(),d.default.gameUi.updateLife(this.life,this.maxLife))},t.prototype.connonShack=function(){this.shackAction&&this.connonSprite.node.stopAction(this.shackAction),this.shackAction1&&this.subConnon.node.stopAction(this.shackAction1);var e=this.minShootTemp;this.shackAction=cc.repeatForever(cc.sequence(cc.moveBy(.03,cc.v2(0,-8)),cc.moveBy(.03,cc.v2(0,8)),cc.moveTo(e-.06,cc.v2(0,0)))),this.connonSprite.node.runAction(this.shackAction),this.shackAction1=cc.repeatForever(cc.sequence(cc.moveBy(.03,cc.v2(0,-8)),cc.moveBy(.03,cc.v2(0,8)),cc.moveTo(e-.06,cc.v2(0,0)))),this.subConnon.node.runAction(this.shackAction1)},t.prototype.stopShack=function(){this.connonSprite.node.stopAction(this.shackAction),this.subConnon.node.stopAction(this.shackAction1);var e=1/this.shootSpeed,t=cc.moveTo(.5*e,cc.v2(0,0));this.connonSprite.node.runAction(t)},Object.defineProperty(t.prototype,"showType",{get:function(){return this._showType},set:function(e){this._showType=e,this.subConnonScript.showType=e},enumerable:!0,configurable:!0}),__decorate([f([cc.Prefab])],t.prototype,"bulletPrefab",void 0),__decorate([f(cc.Sprite)],t.prototype,"wheelSprite",void 0),__decorate([f(cc.SpriteAtlas)],t.prototype,"connonAtlas",void 0),__decorate([f(cc.Sprite)],t.prototype,"fire",void 0),__decorate([f(cc.Sprite)],t.prototype,"subConnon",void 0),__decorate([f(cc.Node)],t.prototype,"funnelLeftNode",void 0),__decorate([f(cc.Node)],t.prototype,"funnelRightNode",void 0),__decorate([f(cc.Animation)],t.prototype,"invincibleAin",void 0),__decorate([f(cc.Integer)],t.prototype,"invincibleTime",void 0),__decorate([f(cc.Integer)],t.prototype,"maxSpeed",void 0),__decorate([f(cc.Integer)],t.prototype,"aSpeed",void 0),__decorate([f({type:[cc.Prefab],tooltip:"\u526f\u70ae\u9884\u5236\u4f53"})],t.prototype,"funnelPrefabArr",void 0),t=__decorate([h],t)}(l.default);n.default=g,cc._RF.pop()},{"../../code/Config/Config":"Config","../../code/Lib/Global":"Global","../../code/manager/EffectManager":"EffectManager","../../code/manager/MyRoleDataManager":"MyRoleDataManager","../../code/manager/NodePoolMananger":"NodePoolMananger","../../code/manager/PanelManager":"PanelManager","../../code/manager/SoundManager":"SoundManager","../../code/manager/TableManager":"TableManager","./ConnonBase":"ConnonBase"}],DateUtils:[function(e,t,n){"use strict";cc._RF.push(t,"952f667vY9Bgq0Uf8vy8Ftd","DateUtils"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.getFormatBySecond=function(e,t){void 0===t&&(t=1);var n="";switch(t){case 1:n=this.getFormatBySecond1(e);break;case 2:n=this.getFormatBySecond2(e);break;case 3:n=this.getFormatBySecond3(e);break;case 4:n=this.getFormatBySecond4(e);break;case 5:n=this.getFormatBySecond5(e);break;case 6:n=this.getFormatBySecond6(e)}return n},e.prototype.getFormatBySecond1=function(e){void 0===e&&(e=0);var t,n=Math.floor(e/3600);t=0==n?"00":n<10?"0"+n:""+n;var o,a,i=Math.floor((e-3600*n)/60),r=Math.floor((e-3600*n)%60);return o=0==i?"00":i<10?"0"+i:""+i,a=0==r?"00":r<10?"0"+r:""+r,0==n?o+":"+a:t+":"+o+":"+a},e.prototype.getFormatBySecond3=function(e){void 0===e&&(e=0);var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),o=Math.floor((e-3600*t)%60);return(0==n?"00":n<10?"0"+n:""+n)+":"+(0==o?"00":o<10?"0"+o:""+o)},e.prototype.getFormatBySecond2=function(e){var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()},e.prototype.getFormatBySecond6=function(e){var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),o=Math.floor((e-3600*t)%60);return t>0?t+"h"+n+"m":o>0?n+"m"+o+"s":n+"m"},e.prototype.getFormatBySecond4=function(e){var t=Math.floor(e/36e5);return t>0?t>24?Math.floor(t/24)+"\u5929\u524d":t+"\u5c0f\u65f6\u524d":Math.floor(e/60)+"\u5206\u949f\u524d"},e.prototype.getFormatBySecond5=function(e){var t=Math.floor(e/86400),n=Math.floor(e%86400/3600),o=Math.floor((e-3600*n-86400*t)/60),a=Math.floor((e-3600*n-86400*t-o*o)%60),i="";return e>0?0==t?("",0==n?(i="",0==o?("",0==a?"":a+"S"):o+"M"+" "+(0==a?"":a+"S")):(i=n+"H",0==o?("",0==a?"":a+"S"):i+" "+(o+"M")+" "+(a+"S"))):t+"D"+" "+(i=0==n?"":n+"H")+" "+(0==o?"":o+"M"):""},e._instance=null,e}();n.default=o,cc._RF.pop()},{}],EasyGetCompleteClass:[function(e,t,n){"use strict";cc._RF.push(t,"f09bbsEyZxLdoSz/QOeQuvs","EasyGetCompleteClass"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.EasyGetCompleteClassInit()},Object.defineProperty(t.prototype,"ECScript",{get:function(){return this.getComponent(cc.js.getClassName(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ECBody",{get:function(){return this.getComponent(cc.RigidBody)},enumerable:!0,configurable:!0}),t.prototype.EasyGetCompleteClassInit=function(){this.node.ECScript=this.ECScript,this.node.ECBody=this.ECBody},t=__decorate([a],t)}(cc.Component));n.default=i,cc._RF.pop()},{}],EffectManager:[function(e,t,n){"use strict";cc._RF.push(t,"de6bau1X1xO7pyM/1hMvhnP","EffectManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./LoadManager"),a=e("./NodePoolMananger"),i=e("../../src/prefab/FlyRewardPrefab"),r=function(){function e(){this.url="/effectPrefab/",this.speedChanged={}}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.playEffect=function(e,t,n,o,i,r){return void 0===i&&(i=""),void 0===r&&(r=1),__awaiter(this,void 0,void 0,function(){var l,s,c=this;return __generator(this,function(d){switch(d.label){case 0:return(l=a.default.instance.popWithCheckExist(e))?[3,2]:[4,this.loadEffectPreFab(e)];case 1:l=d.sent(),d.label=2;case 2:return t.addChild(l),l.setPosition(n),l.active=!0,(s=l.getComponent(cc.Animation).play(i))&&(s.speed=r,1!=r&&(this.speedChanged[l.uuid]=s)),l.getComponent(cc.Animation).once("stop",function(){c.speedChanged.hasOwnProperty(l.uuid)&&delete c.speedChanged[l.uuid],l.removeFromParent(),a.default.instance.push(l),o&&o()}),[2,l]}})})},e.prototype.playLoopEffect=function(e,t,n,o){return void 0===o&&(o=""),__awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(r){switch(r.label){case 0:return(i=a.default.instance.popWithCheckExist(e))?[3,2]:[4,this.loadEffectPreFab(e)];case 1:i=r.sent(),r.label=2;case 2:return t.addChild(i),i.setPosition(n),i.getComponent(cc.Animation).play(o),[2,i]}})})},e.prototype.resetSpeed=function(){for(var e in this.speedChanged)this.speedChanged.hasOwnProperty(e)&&(this.speedChanged[e].speed=1,delete this.speedChanged[e])},e.prototype.loadEffectPreFab=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){switch(n.label){case 0:return(t=o.default.instance.getRes(this.url+e,cc.Prefab))?[3,2]:[4,o.default.instance.loadRes(this.url+e,cc.Prefab)];case 1:t=n.sent(),n.label=2;case 2:return a.default.instance.addPool(t),[2,cc.instantiate(t)]}})})},e.prototype.rewardFly=function(e,t){if(e instanceof Array)for(var n=0;n<e.length;n++){a.default.instance.pop("flyRewardPrefab").getComponent(i.default).init(e[n],t[n])}else a.default.instance.pop("flyRewardPrefab").getComponent(i.default).init(e,t)},e}();n.default=r,function(e){e.FunnelConnonBoom="funnelConnonBoom",e.Armor="302005",e.BoomBulletBoom="302002",e.BulletFollowBoom="302000",e.SubGunUnlockEffect="subGunUnlockEffect",e.BlickEffect="blickEffect",e.RewardFlyBoom="rewardFlyBoom",e.AddHpEffect="addHpEffect",e.AddAtkEffect="addAtkEffect"}(n.EffectName||(n.EffectName={})),cc._RF.pop()},{"../../src/prefab/FlyRewardPrefab":"FlyRewardPrefab","./LoadManager":"LoadManager","./NodePoolMananger":"NodePoolMananger"}],FiveStarPanel:[function(e,t,n){"use strict";cc._RF.push(t,"a0176DKbPZKcprngHE0I3mM","FiveStarPanel"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../code/manager/SDKManager"),a=e("../../code/manager/MyRoleDataManager"),i=e("../../code/Lib/LocalStorage"),r=e("../../code/manager/SoundManager"),l=e("../../code/basecode/BasePanel"),s=e("../../code/manager/PanelManager"),c=e("../../code/manager/UiAniManager"),d=e("../../code/Config/Config"),u=cc._decorator,p=u.ccclass,h=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nameLable=null,t.infoLable=null,t.questionLable=null,t.rateLabelShadow=null,t.rateLabel=null,t.endLabelShadow=null,t.endLabel=null,t.rateBtn=null,t.endBtn=null,t.closeBtn=null,t._aniType=c.UiAniType.TopToDown,t}return __extends(t,e),t.prototype.openPanel=function(){this.playUIAni(c.InOrOut.IN),this.setLable(),this.addEvent()},t.prototype.closePanel=function(){this.playUIAni(c.InOrOut.OUT)},t.prototype.addEvent=function(){this.rateBtn.node.on("click",this.rateBtnTap,this),this.closeBtn.node.on("click",this.closeBtnTap,this),this.endBtn.node.on("click",this.closeBtnTap,this)},t.prototype.dleEvent=function(){this.rateBtn.node.off("click",this.rateBtnTap,this),this.closeBtn.node.off("click",this.closeBtnTap,this),this.endBtn.node.off("click",this.closeBtnTap,this)},t.prototype.setLable=function(){this.nameLable.string=GlobalFun.i18n.t("lable.10226"),this.infoLable.string=GlobalFun.i18n.t("lable.10227"),this.questionLable.string=GlobalFun.i18n.t("lable.10228"),this.rateLabel.string=GlobalFun.i18n.t("lable.10229"),this.rateLabelShadow.string=GlobalFun.i18n.t("lable.10229"),this.endLabel.string=GlobalFun.i18n.t("lable.10230"),this.endLabelShadow.string=GlobalFun.i18n.t("lable.10230")},t.prototype.closeBtnTap=function(){r.default.playSoundEffect(r.default.btnSound),s.default.instance.closePanel(d.PanelName.FiveStarPanel)},t.prototype.rateBtnTap=function(){this.closeBtnTap(),a.default.instance.isRate=!0,i.default.saveItem("isRate",a.default.instance.isRate.toString()),o.default.instance.rate()},t.prototype.panelOut=function(){this.node.removeFromParent()},__decorate([h(cc.Label)],t.prototype,"nameLable",void 0),__decorate([h(cc.Label)],t.prototype,"infoLable",void 0),__decorate([h(cc.Label)],t.prototype,"questionLable",void 0),__decorate([h(cc.Label)],t.prototype,"rateLabelShadow",void 0),__decorate([h(cc.Label)],t.prototype,"rateLabel",void 0),__decorate([h(cc.Label)],t.prototype,"endLabelShadow",void 0),__decorate([h(cc.Label)],t.prototype,"endLabel",void 0),__decorate([h({type:cc.Button,tooltip:"\u8bc4\u4ef7\u6309\u94ae"})],t.prototype,"rateBtn",void 0),__decorate([h({type:cc.Button,tooltip:"\u62d2\u7edd\u6309\u94ae"})],t.prototype,"endBtn",void 0),__decorate([h({type:cc.Button,tooltip:"\u5173\u95ed\u6309\u94ae"})],t.prototype,"closeBtn",void 0),t=__decorate([p],t)}(l.default);n.default=f,cc._RF.pop()},{"../../code/Config/Config":"Config","../../code/Lib/LocalStorage":"LocalStorage","../../code/basecode/BasePanel":"BasePanel","../../code/manager/MyRoleDataManager":"MyRoleDataManager","../../code/manager/PanelManager":"PanelManager","../../code/manager/SDKManager":"SDKManager","../../code/manager/SoundManager":"SoundManager","../../code/manager/UiAniManager":"UiAniManager"}],FlyRewardPrefab:[function(e,t,n){"use strict";cc._RF.push(t,"a3d07da4TdEQ7IuKkzL2n5e","FlyRewardPrefab"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../code/Config/Config"),a=e("../../code/manager/PanelManager"),i=e("../../code/manager/NodePoolMananger"),r=e("../../code/manager/EffectManager"),l=e("../../code/manager/SoundManager"),s=e("../../code/manager/TableManager"),c=e("../../code/manager/MyRoleDataManager"),d=e("../../code/Lib/Global"),u=cc._decorator,p=u.ccclass,h=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.particle=null,t.iconArr=[],t.connonNode=null,t.connon=null,t.wheel=null,t.sub=null,t.arr=[-336,-112,109.1],t}return __extends(t,e),t.prototype.init=function(e,t){this.rewadrType=t,this.fly(e)},t.prototype.fly=function(e){var t=this;if(c.default.instance.isConnon(this.rewadrType)){this.connonNode.active=!0,this.icon.node.active=!1;var n=s.default.instance.connonTable.getScourceId(this.rewadrType,4),u=n[0],p=n[1],h=n[2];this.connon.spriteFrame=a.default.game.playerScript.connonAtlas.getSpriteFrame(u+"0"),this.wheel.spriteFrame=a.default.game.playerScript.connonAtlas.getSpriteFrame(h+"0"),this.sub.spriteFrame=a.default.game.playerScript.connonAtlas.getSpriteFrame(p+"0");var f=a.default.gameUi.downNode.y-759;a.default.gameUi.node.addChild(this.node),this.particle.resetSystem();var g=e.parent.convertToWorldSpaceAR(e.position);g=this.node.parent.convertToNodeSpaceAR(g);var m=d.default.convertNodePosToTargetNodePos(e,this.node),y=this.rewadrType-51e4;this.icon.spriteFrame=this.iconArr[y],this.node.setPosition(m);var b=cc.sequence(cc.moveTo(.5,cc.v2(-270,f)),cc.callFunc(function(){r.default.instance.playEffect(r.EffectName.RewardFlyBoom,t.node,cc.v2(0,0),function(){t.node.stopAction(b),t.node.removeFromParent(),i.default.instance.push(t.node),a.default.instance.openPanel(o.PanelName.RefitShopPanel,a.default.gameUi.middleNode)})}));this.node.runAction(b)}else{this.connonNode.active=!1,this.icon.node.active=!0;f=a.default.gameUi.highTopUiNode.y-32;a.default.gameUi.node.addChild(this.node),this.particle.resetSystem();g=e.parent.convertToWorldSpaceAR(e.position),m=this.node.parent.convertToNodeSpaceAR(g),y=this.rewadrType-51e4;this.icon.spriteFrame=this.iconArr[y],this.node.setPosition(m);var v=cc.sequence(cc.moveTo(1,cc.v2(this.arr[y],f)),cc.callFunc(function(){a.default.gameUi.updataGold(),(t.rewadrType=51e4)?l.default.playSoundEffect(l.default.getCoinEnd):l.default.playSoundEffect(l.default.getDiamod),r.default.instance.playEffect(r.EffectName.RewardFlyBoom,t.node,cc.v2(0,0),function(){t.node.stopAction(v),t.node.removeFromParent(),i.default.instance.push(t.node)})}));this.node.runAction(v)}},__decorate([h({type:cc.Sprite,tooltip:"\u5956\u52b1icon"})],t.prototype,"icon",void 0),__decorate([h({type:cc.ParticleSystem,tooltip:"\u5956\u52b1icon"})],t.prototype,"particle",void 0),__decorate([h({type:[cc.SpriteFrame],tooltip:"\u5956\u52b1\u8d44\u6e90icon"})],t.prototype,"iconArr",void 0),__decorate([h({type:cc.Node,tooltip:"\u70ae"})],t.prototype,"connonNode",void 0),__decorate([h({type:cc.Sprite,tooltip:"\u70ae"})],t.prototype,"connon",void 0),__decorate([h({type:cc.Sprite,tooltip:"\u8f66\u8f6e"})],t.prototype,"wheel",void 0),__decorate([h({type:cc.Sprite,tooltip:"\u526f\u70ae"})],t.prototype,"sub",void 0),t=__decorate([p],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../../code/Config/Config":"Config","../../code/Lib/Global":"Global","../../code/manager/EffectManager":"EffectManager","../../code/manager/MyRoleDataManager":"MyRoleDataManager","../../code/manager/NodePoolMananger":"NodePoolMananger","../../code/manager/PanelManager":"PanelManager","../../code/manager/SoundManager":"SoundManager","../../code/manager/TableManager":"TableManager"}],FreeConnonItem:[function(e,t,n){"use strict";cc._RF.push(t,"c21e3Wfr8pCLLwSmVTxPaU7","FreeConnonItem"),cc._RF.pop()},{}],FunnelConnon:[function(e,t,n){"use strict";cc._RF.push(t,"5344dpZxfhMf48rFEL1VaE5","FunnelConnon"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./ConnonBase"),a=e("../../code/manager/NodePoolMananger"),i=e("../../code/manager/PanelManager"),r=e("../../code/Lib/Global"),l=e("../../code/Config/Config"),s=e("../../code/manager/TableManager"),c=e("../../code/manager/MyRoleDataManager"),d=e("../../code/manager/EffectManager"),u=cc._decorator,p=u.ccclass,h=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.connonAtlas=null,t.leftLife=0,t.bulletType=l.BulletType.BulletLaser,t.isAni=!1,t.showType=!1,t.effect=null,t.endTime=-1,t}return __extends(t,e),t.prototype.funnelInit=function(e,t,n,o,a){void 0===a&&(a=!1),this.node.y=-500,this.showType=a,this.isAni=!0,this.direction=o,this.funnelId=e,this.bulletNode=n,this.setBulletType(),this.parent=t,this.connonSprite.spriteFrame=this.connonAtlas.getSpriteFrame(s.default.instance.aircraftTable.getSource(e)),this.inAni(),this.funnelData=s.default.instance.aircraftTable.getInfo(this.funnelId);var r=c.default.instance.getFunnelInfo(this.funnelId);this.showType?this.bulletHit=1:this.bulletType==l.BulletType.LifeShield&&r?this.leftLife=s.default.instance.aircraftTable.countAtk(this.funnelId,r.level):r&&(this.bulletHit=Math.ceil(i.default.game.playerScript.mainGunHit*s.default.instance.aircraftTable.countAtk(this.funnelId,r.level)))},t.prototype.startShoot=function(e){void 0===e&&(e=null),this.isInShoot||(e&&(this.bulletIcon=e),this.isInShoot=!0,this.bulletType!=l.BulletType.LifeShield&&(this.isAni||(this.node.opacity=255,this.setShoot())))},t.prototype.setShoot=function(){this.bulletType==l.BulletType.BulletLaser?this.laserShoot():this.bulletType==l.BulletType.LifeShield||(this.bulletType==l.BulletType.BulletFollow?this.shootTemp=.5:this.bulletType==l.BulletType.BulletThrough?(this.shootTemp=.2,this.bulletNum=2):this.bulletType==l.BulletType.BulletBoom&&(this.shootTemp=.05),this.shoot(),this.schedule(this.shoot,this.shootTemp,cc.macro.REPEAT_FOREVER))},t.prototype.shoot=function(){var e=this.bulletNum,t=this.node.parent.parent.position;if(t.x+=this.node.parent.x,e%2==1){var n=17*-Math.floor((e-1)/2);this.setBulletPos(n+t.x,t.y);for(var o=1;o<e;o++)this.setBulletPos(n+17*o+t.x,t.y+10)}else for(n=17*-(Math.floor((e-1)/2)+1)+5,o=0;o<e;o++)this.setBulletPos(n+17*o+5+t.x-3,t.y+10)},t.prototype.laserShoot=function(){this.lasetBullet&&this.lasetBullet.parent&&this.lasetBullet.removeFromParent();var e=this.node.parent.parent.position;e.x+=this.node.parent.x;var t=a.default.instance.pop(this.bulletType);this.showType?this.node.parent.parent.parent.addChild(t):i.default.game.ballNode.addChild(t),t.active=!0;r.default.exactSub(this.bulletHit,Math.floor(this.bulletHit));t.ECScript.init(this.bulletHit,this.node),t.ECScript.setIcon(this.bulletIcon),t.setPosition(e.x,e.y),this.lasetBullet=t},t.prototype.cancelShoot=function(){this.isInShoot=!1,this.unschedule(this.shoot),this.lasetBullet&&(this.lasetBullet.removeFromParent(),a.default.instance.push(this.lasetBullet),this.lasetBullet=null)},t.prototype.funnelOut=function(){this.parent&&(this.direction==l.FunnelConnonDirection.LEFT&&this.parent.funnelLeftScript&&this.uuid==this.parent.funnelLeftScript.uuid?this.parent.funnelLeftScript=null:this.parent.funnelRightScript&&this.uuid==this.parent.funnelRightScript.uuid&&(this.parent.funnelRightScript=null)),this.unscheduleAllCallbacks(),this.cancelShoot(),this.outAni()},t.prototype.setEndTime=function(){var e=s.default.instance.aircraftTable.getTime(this.funnelId)+1,t=r.default.getTime();t>this.endTime?this.endTime=t+1e3*e:this.endTime+=1e3*e,this.unschedule(this.funnelOut),this.showType||this.scheduleOnce(this.funnelOut,.001*(this.endTime-t))},t.prototype.dleLife=function(e){this.leftLife-=e,this.leftLife<=0&&this.funnelOut()},t.prototype.setBulletPos=function(e,t){var n=a.default.instance.pop(this.bulletType);n&&!n.parent&&this.bulletNode.addChild(n),n.active=!0;r.default.exactSub(this.bulletHit,Math.floor(this.bulletHit));n.ECScript.init(this.bulletHit,e),n.ECScript.setIcon(this.bulletIcon),n.setPosition(e,t+.5*this.node.width)},t.prototype.setBulletType=function(){switch(this.funnelId){case 302e3:this.bulletType=l.BulletType.BulletFollow;break;case 302001:this.bulletType=l.BulletType.BulletThrough;break;case 302002:this.bulletType=l.BulletType.BulletBoom;break;case 302003:this.bulletType=l.BulletType.BulletLaser;break;case 302005:this.bulletType=l.BulletType.LifeShield;break;default:this.bulletType=r.default.arrRandom([l.BulletType.BulletFollow,l.BulletType.BulletLaser,l.BulletType.BulletBoom])}},t.prototype.inAni=function(){var e=this;this.node.stopAllActions();var t=cc.sequence(cc.moveTo(.3,cc.v2(0,0)),cc.callFunc(function(){return __awaiter(e,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return this.isAni=!1,this.bulletType!=l.BulletType.LifeShield?[3,2]:(e=this,[4,d.default.instance.playLoopEffect(d.EffectName.Armor,this.node,cc.v2(0,8))]);case 1:e.effect=t.sent(),t.label=2;case 2:return this.isInShoot&&(this.isInShoot=!1,this.setEndTime(),this.startShoot()),[2]}})})}));this.node.runAction(t)},t.prototype.outAni=function(){var e=this;this.isAni=!0,this.effect&&(this.effect.removeFromParent(),a.default.instance.push(this.effect)),this.connonSprite.spriteFrame=null,d.default.instance.playEffect(d.EffectName.FunnelConnonBoom,this.node,cc.v2(0,0),function(){e.isAni=!1,e.node.removeFromParent(),a.default.instance.push(e.node)},this.funnelId+"BoomClip",1)},__decorate([h({type:cc.SpriteAtlas,tooltip:"\u70ae\u8d44\u6e90\u96c6"})],t.prototype,"connonAtlas",void 0),t=__decorate([p],t)}(o.default);n.default=f,cc._RF.pop()},{"../../code/Config/Config":"Config","../../code/Lib/Global":"Global","../../code/manager/EffectManager":"EffectManager","../../code/manager/MyRoleDataManager":"MyRoleDataManager","../../code/manager/NodePoolMananger":"NodePoolMananger","../../code/manager/PanelManager":"PanelManager","../../code/manager/TableManager":"TableManager","./ConnonBase":"ConnonBase"}],GameUI:[function(e,t,n){"use strict";cc._RF.push(t,"a806cTywOlLcJcuDWy7Qlc7","GameUI"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../code/manager/PanelManager"),a=e("../../code/manager/MyRoleDataManager"),i=e("../../code/manager/MissionManger"),r=e("../../code/manager/LoadManager"),l=e("../../code/Lib/LocalStorage"),s=e("../../code/manager/SDKManager"),c=e("../../code/manager/SoundManager"),d=e("../../code/Config/Config"),u=e("../../code/Lib/Global"),p=e("../../code/manager/GuideManager"),h=e("../../code/manager/EffectManager"),f=e("../../code/manager/NodePoolMananger"),g=e("../../code/manager/TableManager"),m=cc._decorator,y=m.ccclass,b=m.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.uiInAni=[],t.uiOutAni=[],t.handMoveAni=null,t.scoreLable=null,t.startLab=null,t.handSprite=null,t.levelCompleteNode=null,t.backGroud=null,t.maxScoreLable=null,t.goldLable=null,t.diamondLable=null,t.chipLable=null,t.goldLableAni=null,t.goldImg=null,t.backgroundShackAni=null,t.blackAni=null,t.middleNode=null,t.effectPrefabArr=[],t.effectNode=null,t.goldLayout=null,t.goldLayoutLable=null,t.lifeNode=null,t.lowTopUiNode=null,t.highTopUiNode=null,t.downNode=null,t.singleColor=null,t.maskNode=null,t.curLevel=null,t.nextLevel=null,t.pro=null,t.maxscoreLayout=null,t.levelLable=null,t.setBtn=null,t.aircraftBtn=null,t.refitBtn=null,t.shopBtn=null,t.workBtn=null,t.missionBtn=null,t.goldBtn=null,t.diamondBtn=null,t.chipBtn=null,t.blueLife=null,t.redLife=null,t.currencyIcon=[],t.flyRewardPrefab=null,t.iconAtlas=null,t.redNode=null,t.missionNode=null,t.missionIcon=null,t.missionLabel=null,t.curEffect=null,t.isInShack=!1,t}return __extends(t,e),t.prototype.onLoad=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return f.default.instance.addPool(this.flyRewardPrefab),o.default.initPanel(o.default.PanelStr.gameui,this),this.setLable(),this.addEvent(),i.default.instance,[2]})})},t.prototype.start=function(){a.default.instance.isFullScreen&&(this.lowTopUiNode.getComponent(cc.Widget).top=a.default.instance.fringeNum,this.middleNode.getComponent(cc.Widget).top=a.default.instance.fringeNum,this.highTopUiNode.getComponent(cc.Widget).top=a.default.instance.fringeNum),s.default.instance.onResume(),this.handMoveAni.playAdditive("handMove"),this.handMoveAni.playAdditive("levelScoreChange"),this.setBackGroud(),this.randomBlink(),this.btnTishi(),i.default.instance.init()&&a.default.instance.curLevel>1&&(this.downNode.getComponent(cc.Widget).updateAlignment(),p.default.instance.startGuide(10004))},t.prototype.update=function(){1==a.default.instance.gameState&&this.setScore(u.default.setNum(a.default.instance.curScore))},t.prototype.addEvent=function(){this.setBtn.node.on("click",this.setBtnTap,this),this.aircraftBtn.node.on("click",this.aircraftBtnTap,this),this.refitBtn.node.on("click",this.refitShopBtnTap,this),this.shopBtn.node.on("click",this.shopBtnTAp,this),this.workBtn.node.on("click",this.workBtnTap,this),this.missionBtn.node.on("click",this.missionBtnTap,this),this.goldBtn.node.on("click",this.shopBtnTAp,this),this.diamondBtn.node.on("click",this.shopBtnTAp,this),this.chipBtn.node.on("click",this.shopBtnTAp,this)},t.prototype.gameStart=function(){this.playStartAni(),this.scoreLable.getComponent("MyLable").string="0",i.default.instance.itemCollectNum=0,this.updateCurGold(),i.default.instance.curSpecilMission.pro>=i.default.instance.curSpecilMission.quest?this.missionNode.active=!1:(this.missionNode.scale=1,this.missionNode.active=!0,this.missionIcon.spriteFrame=this.iconAtlas.getSpriteFrame(g.default.instance.propTable.getIcon(i.default.instance.curSpecilMission.collectPropId)),this.missionLabel.string=i.default.instance.curSpecilMission.pro+"/"+i.default.instance.curSpecilMission.quest),o.default.gameUi.uiOutAni[0].play("uiOut0"),o.default.gameUi.uiOutAni[1].play("uiOut1"),o.default.gameUi.uiOutAni[5].play("uiOut5"),this.playGoldLabAni(0),this.curLevel.string=a.default.instance.curLevel.toString(),this.nextLevel.string=(a.default.instance.curLevel+1).toString(),this.pro.progress=0},t.prototype.handShow=function(){1!=a.default.instance.gameState&&(this.maxscoreLayout.active=!1,this.levelLable.node.active=!1,this.handMoveAni.playAdditive("uiIn3"),this.handMoveAni.once("stop",function(){this.handMoveAni.playAdditive("handMove")}.bind(this)))},t.prototype.concelHandShow=function(){this.maxscoreLayout.active?this.unschedule(this.handShow):(this.handMoveAni.stop("handMove"),this.handMoveAni.play("uiOut3"))},t.prototype.skipResurgence=function(){o.default.game.endGame(!0)},t.prototype.setScore=function(e){this.scoreLable.getComponent("MyLable").string=e.toString()},t.prototype.setLable=function(){this.startLab.string=GlobalFun.i18n.t("lable.10002"),this.maxScoreLable.string=a.default.instance.maxScore.toString(),this.levelLable.string=GlobalFun.i18n.t("lable.10231").replace("%d",a.default.instance.curLevel),this.updataGold()},t.prototype.playStartAni=function(){this.handMoveAni.stop("handMove"),this.playGoldLabAni(0);for(var e=0;e<this.uiOutAni.length;e++){var t=this.uiOutAni[e];t&&t.play("uiOut"+e)}},t.prototype.playUiInAni=function(){this.goldLayout.node.stopAllActions(),this.maxscoreLayout.active=!0,this.levelLable.node.active=!0,this.handMoveAni.setCurrentTime(1,"levelScoreChange"),this.levelLable.node.opacity=255,this.maxscoreLayout.getChildByName("New Sprite").opacity=0,this.maxscoreLayout.getChildByName("maxScoreLable").opacity=0,this.unscheduleAllCallbacks(),this.randomBlink(),this.goldLableAni.stop("goldLableBig"),this.playGoldLabAni(1),this.updataGold(),this.maxScoreLable.string=a.default.instance.maxScore.toString();for(var e=0;e<this.uiInAni.length;e++){var t=this.uiInAni[e];t&&t.play("uiIn"+e)}this.btnTishi(),this.schedule(function(){var e=!0;if(p.default.instance.checkCanGuide(10001,0)?p.default.instance.startGuide(10001):p.default.instance.checkCanGuide(10002,0)?p.default.instance.startGuide(10002):p.default.instance.checkCanGuide(10003,0)?p.default.instance.startGuide(10003):e=!1,a.default.instance.isFromComplete){a.default.instance.isFromComplete=!1;var t=g.default.instance.mapLevelTable.getLevelCompleteReward(a.default.instance.curLevel-1);t.forEach(function(e,t){a.default.instance.addCurrency(e,t)}),e?this.updataGold():o.default.instance.openPanel(d.PanelName.CompleteRewardPanel,this.middleNode,t)}this.handMoveAni.playAdditive("handMove"),this.handMoveAni.playAdditive("levelScoreChange"),a.default.instance.gameState=0},.5,0)},t.prototype.btnTishi=function(){i.default.instance.getCompleteMission(2)?this.missionBtn.node.getChildByName("tishi").active=!0:this.missionBtn.node.getChildByName("tishi").active=!1,a.default.instance.refitCanUp()?this.refitBtn.node.getChildByName("tishi").active=!0:this.refitBtn.node.getChildByName("tishi").active=!1,a.default.instance.workCanUp()?this.workBtn.node.getChildByName("tishi").active=!0:this.workBtn.node.getChildByName("tishi").active=!1,a.default.instance.aircraftCanUp()?this.aircraftBtn.node.getChildByName("tishi").active=!0:this.aircraftBtn.node.getChildByName("tishi").active=!1},t.prototype.setBackGroud=function(){return __awaiter(this,void 0,void 0,function(){var e,t,n,o,i;return __generator(this,function(s){switch(s.label){case 0:return e=["90001","90002","90003","90004","90000"],t=u.default.arrRandom(e),a.default.instance.curScenceID=Number(t)-7e4,(n=r.default.instance.getRes("/mapRes/"+t,cc.SpriteFrame))?[3,2]:[4,r.default.instance.loadRes(t,cc.SpriteFrame)];case 1:s.sent(),n=r.default.instance.getRes(t,cc.SpriteFrame),s.label=2;case 2:return n&&(this.backGroud.spriteFrame=n,l.default.saveItem("curScenceID",a.default.instance.curScenceID.toString())),this.curEffect&&(o=this.curEffect,this.curEffect=null,o.removeFromParent(!1),o.destroy()),(i=this.effectPrefabArr[a.default.instance.curScenceID-2e4])&&(this.curEffect=cc.instantiate(i),this.effectNode.addChild(this.curEffect)),[2]}})})},t.prototype.updataGold=function(e){void 0===e&&(e=null),e==d.CurrencyType.Gold?this.goldLable.string=u.default.setNum(a.default.instance.Gold):e==d.CurrencyType.Diamond?this.diamondLable.string=u.default.setNum(a.default.instance.Diamond):e==d.CurrencyType.Chip?this.chipLable.string=u.default.setNum(a.default.instance.Chip):(this.goldLable.string=u.default.setNum(a.default.instance.Gold),this.diamondLable.string=u.default.setNum(a.default.instance.Diamond),this.chipLable.string=u.default.setNum(a.default.instance.Chip))},t.prototype.updateCurGold=function(){this.goldLayoutLable.string=u.default.setNum(a.default.instance.curGold)},t.prototype.playGoldLabAni=function(e){switch(e){case 0:this.goldLayout.node.stopAllActions(),this.lifeNode.stopAllActions();var t=cc.moveTo(.25,375,0),n=cc.moveTo(.25,-375,0);this.goldLayout.node.runAction(t),this.lifeNode.runAction(n);break;case 1:this.goldLayout.node.stopAllActions(),this.lifeNode.stopAllActions();var o=cc.moveTo(.25,cc.v2(375,200)),a=cc.moveTo(.25,cc.v2(-375,200));this.goldLayout.node.runAction(o),this.lifeNode.runAction(a)}},t.prototype.playBigComplete=function(){this.unschedule(this.playGoldLabAni.bind(this,1)),this.schedule(this.playGoldLabAni.bind(this,1),5,0)},t.prototype.moveGoldToLable=function(e){var t=this.goldImg.node.parent.convertToWorldSpaceAR(this.goldImg.node.position),n=cc.sequence(cc.spawn(cc.moveTo(.5,t.x,t.y+100),cc.scaleTo(.5,.3)),cc.callFunc(function(){e.ECScript.remove.bind(e.ECScript)(),this.updateCurGold()},this));e.runAction(n)},t.prototype.movePropToLable=function(e){var t=this,n=u.default.convertNodePosToTargetNodePos(this.missionIcon.node,o.default.game.ballNode),a=cc.sequence(cc.spawn(cc.moveTo(.5,n.x,n.y),cc.scaleTo(.5,.3)),cc.callFunc(function(){if(e.removeFromParent(),f.default.instance.push(e),t.missionLabel.string=i.default.instance.curSpecilMission.pro+"/"+i.default.instance.curSpecilMission.quest,i.default.instance.curSpecilMission.pro>=i.default.instance.curSpecilMission.quest){var n=cc.sequence(cc.scaleTo(.5,1.3).easing(cc.easeQuarticActionOut()),cc.scaleTo(.3,0),cc.callFunc(function(){t.missionNode.active=!1}));t.missionNode.runAction(n)}}));e.runAction(a)},t.prototype.openMask=function(e){void 0===e&&(e=!1),this.maskNode.active=e},t.prototype.backGroudShack=function(e){var t=this;this.isInShack||(this.backgroundShackAni.once("stop",function(){t.isInShack=!1},this),this.isInShack=!0,this.backgroundShackAni.play("backGroudShack"+e))},t.prototype.beBlack=function(){this.blackAni.play("black")},t.prototype.updateLife=function(e,t){var n=this;if(e==t)this.redLife.unscheduleAllCallbacks(),this.blueLife.node.width=136,this.redLife.node.width=136;else{var o=e/t*136;o=o<0?0:o,this.blueLife.node.width=o,this.redLife.unscheduleAllCallbacks();var a=this.redLife.node.width,i=(o-a)/20;this.redLife.schedule(function(){if(i>=0&&n.redLife.node.width>=n.blueLife.node.width||i<0&&n.redLife.node.width<=n.blueLife.node.width)return n.redLife.node.width=o,void n.redLife.unscheduleAllCallbacks();var e=n.redLife.node.width+i;n.redLife.node.width=e<0?0:e},.001,cc.macro.REPEAT_FOREVER)}},t.prototype.redBlink=function(){var e=this;this.redNode.active=!0,this.redNode.opacity=255,this.redNode.getComponent(cc.Animation).playAdditive("redBlink",0),this.redNode.getComponent(cc.Animation).once("stop",function(){e.redNode.active=!1})},t.prototype.randomBlink=function(){var e=u.default.arrRandom([0,1,2]);h.default.instance.playEffect(h.EffectName.BlickEffect,this.currencyIcon[e],cc.v2(0,0),null,["blinkChip","blinkDiamond","blinkGold"][e]);var t=4*Math.random()+1;this.scheduleOnce(this.randomBlink.bind(this),t)},t.prototype.setBtnTap=function(){c.default.playSoundEffect(c.default.btnSound),o.default.instance.openPanel(d.PanelName.SetPanel,this.middleNode)},t.prototype.aircraftBtnTap=function(){c.default.playSoundEffect(c.default.clickAircraft),o.default.instance.openPanel(d.PanelName.AircraftPanel,this.middleNode)},t.prototype.refitShopBtnTap=function(){c.default.playSoundEffect(c.default.clickModifiedshop),o.default.instance.openPanel(d.PanelName.RefitShopPanel,this.middleNode)},t.prototype.shopBtnTAp=function(){c.default.playSoundEffect(c.default.btnSound),o.default.instance.openPanel(d.PanelName.ShopPanel,this.middleNode)},t.prototype.workBtnTap=function(){c.default.playSoundEffect(c.default.clickWorkShop),o.default.instance.openPanel(d.PanelName.WorkShopPanel,this.middleNode)},t.prototype.missionBtnTap=function(){c.default.playSoundEffect(c.default.btnSound),o.default.instance.openPanel(d.PanelName.MissionPanel,this.middleNode)},t.prototype.noAdsBtnTap=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return c.default.playSoundEffect(c.default.btnSound),this.backGroud.spriteFrame=this.singleColor,this.curEffect.removeFromParent(),[2]})})},t.prototype.orderBtnTap=function(){cc.sys.platform!=cc.sys.IPHONE&&cc.sys.platform!=cc.sys.IPAD||(o.default.gameUi.openMask(!0),s.default.instance.startRestore())},__decorate([b([cc.Animation])],t.prototype,"uiInAni",void 0),__decorate([b([cc.Animation])],t.prototype,"uiOutAni",void 0),__decorate([b(cc.Animation)],t.prototype,"handMoveAni",void 0),__decorate([b(cc.Node)],t.prototype,"scoreLable",void 0),__decorate([b(cc.Label)],t.prototype,"startLab",void 0),__decorate([b(cc.Sprite)],t.prototype,"handSprite",void 0),__decorate([b(cc.Node)],t.prototype,"levelCompleteNode",void 0),__decorate([b(cc.Sprite)],t.prototype,"backGroud",void 0),__decorate([b(cc.Label)],t.prototype,"maxScoreLable",void 0),__decorate([b({type:cc.Label,tooltip:"\u6e38\u620f\u5e01lable"})],t.prototype,"goldLable",void 0),__decorate([b({type:cc.Label,tooltip:"\u94bb\u77f3lable"})],t.prototype,"diamondLable",void 0),__decorate([b({type:cc.Label,tooltip:"\u82af\u7247lable"})],t.prototype,"chipLable",void 0),__decorate([b(cc.Animation)],t.prototype,"goldLableAni",void 0),__decorate([b(cc.Sprite)],t.prototype,"goldImg",void 0),__decorate([b(cc.Animation)],t.prototype,"backgroundShackAni",void 0),__decorate([b(cc.Animation)],t.prototype,"blackAni",void 0),__decorate([b(cc.Node)],t.prototype,"middleNode",void 0),__decorate([b([cc.Prefab])],t.prototype,"effectPrefabArr",void 0),__decorate([b(cc.Node)],t.prototype,"effectNode",void 0),__decorate([b(cc.Layout)],t.prototype,"goldLayout",void 0),__decorate([b({type:cc.Label,tooltip:"\u6e38\u620f\u5e01lable"})],t.prototype,"goldLayoutLable",void 0),__decorate([b({type:cc.Node,tooltip:"\u751f\u547d\u503cnode"})],t.prototype,"lifeNode",void 0),__decorate([b({type:cc.Node,tooltip:"\u4f4e\u5c42\u7ea7\u9760\u4e0a\u8282\u70b9"})],t.prototype,"lowTopUiNode",void 0),__decorate([b({type:cc.Node,tooltip:"\u9ad8\u5c42\u7ea7\u9760\u4e0a\u8282\u70b9"})],t.prototype,"highTopUiNode",void 0),__decorate([b({type:cc.Node,tooltip:"\u9760\u4e0b\u8282\u70b9"})],t.prototype,"downNode",void 0),__decorate([b(cc.SpriteFrame)],t.prototype,"singleColor",void 0),__decorate([b(cc.Node)],t.prototype,"maskNode",void 0),__decorate([b(cc.Label)],t.prototype,"curLevel",void 0),__decorate([b(cc.Label)],t.prototype,"nextLevel",void 0),__decorate([b(cc.ProgressBar)],t.prototype,"pro",void 0),__decorate([b(cc.Node)],t.prototype,"maxscoreLayout",void 0),__decorate([b(cc.Label)],t.prototype,"levelLable",void 0),__decorate([b({type:cc.Button,tooltip:"\u8bbe\u7f6e\u6309\u94ae"})],t.prototype,"setBtn",void 0),__decorate([b({type:cc.Button,tooltip:"\u98de\u884c\u5668\u6309\u94ae"})],t.prototype,"aircraftBtn",void 0),__decorate([b({type:cc.Button,tooltip:"\u6539\u88c5\u6309\u94ae"})],t.prototype,"refitBtn",void 0),__decorate([b({type:cc.Button,tooltip:"\u5546\u5e97\u6309\u94ae"})],t.prototype,"shopBtn",void 0),__decorate([b({type:cc.Button,tooltip:"\u6280\u80fd\u5347\u7ea7\u6309\u94ae"})],t.prototype,"workBtn",void 0),__decorate([b({type:cc.Button,tooltip:"\u4efb\u52a1\u6309\u94ae"})],t.prototype,"missionBtn",void 0),__decorate([b({type:cc.Button,tooltip:"\u91d1\u5e01\u6309\u94ae"})],t.prototype,"goldBtn",void 0),__decorate([b({type:cc.Button,tooltip:"\u94bb\u77f3\u6309\u94ae"})],t.prototype,"diamondBtn",void 0),__decorate([b({type:cc.Button,tooltip:"\u82af\u7247\u6309\u94ae"})],t.prototype,"chipBtn",void 0),__decorate([b({type:cc.Sprite,tooltip:"\u7eff\u8272\u751f\u547d\u503c"})],t.prototype,"blueLife",void 0),__decorate([b({type:cc.Sprite,tooltip:"\u7ea2\u8272\u751f\u547d\u503c"})],t.prototype,"redLife",void 0),__decorate([b({type:[cc.Node],tooltip:"\u94b1icon"})],t.prototype,"currencyIcon",void 0),__decorate([b({type:cc.Prefab,tooltip:"\u5956\u52b1\u98de\u9884\u5236\u4f53"})],t.prototype,"flyRewardPrefab",void 0),__decorate([b({type:cc.SpriteAtlas,tooltip:"icon\u8d44\u6e90"})],t.prototype,"iconAtlas",void 0),__decorate([b({type:cc.Node,tooltip:"\u7ea2\u8272\u95ea\u70c1\u8282\u70b9"})],t.prototype,"redNode",void 0),__decorate([b({type:cc.Node,tooltip:"\u4efb\u52a1\u8282\u70b9"})],t.prototype,"missionNode",void 0),__decorate([b({type:cc.Sprite,tooltip:"\u4efb\u52a1icon\u8282\u70b9"})],t.prototype,"missionIcon",void 0),__decorate([b({type:cc.Label,tooltip:"\u4efb\u52a1\u8fdb\u5ea6label"})],t.prototype,"missionLabel",void 0),t=__decorate([y],t)}(cc.Component);n.default=v,cc._RF.pop()},{"../../code/Config/Config":"Config","../../code/Lib/Global":"Global","../../code/Lib/LocalStorage":"LocalStorage","../../code/manager/EffectManager":"EffectManager","../../code/manager/GuideManager":"GuideManager","../../code/manager/LoadManager":"LoadManager","../../code/manager/MissionManger":"MissionManger","../../code/manager/MyRoleDataManager":"MyRoleDataManager","../../code/manager/NodePoolMananger":"NodePoolMananger","../../code/manager/PanelManager":"PanelManager","../../code/manager/SDKManager":"SDKManager","../../code/manager/SoundManager":"SoundManager","../../code/manager/TableManager":"TableManager"}],Game:[function(e,t,n){"use strict";cc._RF.push(t,"ffe53b0itZK+oNT6j9xUSbg","Game"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../code/basecode/EasyGetCompleteClass"),a=e("../../code/manager/BallManager"),i=e("../../code/manager/NodePoolMananger"),r=e("../../code/manager/MyRoleDataManager"),l=e("../../code/manager/PanelManager"),s=e("../../code/manager/MissionManger"),c=e("../../code/manager/TableManager"),d=e("../../code/manager/SDKManager"),u=e("../../code/Config/Config"),p=e("../../code/manager/SoundManager"),h=e("../../code/Lib/Global"),f=e("../../code/Lib/TimeCount"),g=e("../../code/Lib/LocalStorage"),m=e("../../code/manager/EffectManager"),y=cc._decorator,b=y.ccclass,v=y.property,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletPrefabArr=[],t.funnelPrefabArr=[],t.ballNode=null,t.bulletNode=null,t.Player=null,t.wall=null,t.ballPreArr=[],t.coinPre=null,t.boomPrefab=null,t.funnulBommPrefab=null,t.smokePrefab=null,t.bloodPrefab=null,t.coinNumPrefab=null,t.completeEffect=null,t.propPrefab=null,t.showPrefab=null,t.ballSpriteAtlas=null,t.playerScript=null,t.resurgenceTimes=0,t.failedTimes=0,t.lastTime=0,t.isInPaused=!1,t.maxNum=20,t.curNum=0,t}return __extends(t,e),t.prototype.onLoad=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(n){for(this.EasyGetCompleteClassInit(),cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().gravity=cc.v2(0,-640),this.playerScript=this.Player.getComponent("Connon"),l.default.initPanel(l.default.PanelStr.game,this),i.default.instance.addPool(this.coinPre),i.default.instance.addPool(this.boomPrefab),i.default.instance.addPool(this.smokePrefab),i.default.instance.addPool(this.bloodPrefab),i.default.instance.addPool(this.coinNumPrefab),i.default.instance.addPool(this.completeEffect),i.default.instance.addPool(this.propPrefab),i.default.instance.addPool(this.showPrefab),i.default.instance.addPool(this.funnulBommPrefab),e=0,t=this.bulletPrefabArr.length;e<t;e++)i.default.instance.addPool(this.bulletPrefabArr[e]);for(e=0,t=this.funnelPrefabArr.length;e<t;e++)i.default.instance.addPool(this.funnelPrefabArr[e]);return this.node.on("touchstart",this.onTouchBegin,this),this.node.on("touchmove",this.onTouchMove,this),this.node.on("touchend",this.onTouchEnd,this),[2]})})},t.prototype.start=function(){this.playerScript.setConnonSkin(r.default.instance.curCannonID),a.default.instance.init(this.ballPreArr,this.ballNode),a.default.instance.checkBallPos()},t.prototype.update=function(){if(2==r.default.instance.gameState&&(d.default.instance.phoneLongShack(),this.endGame(!1)),a.default.instance.checkBallPos(),this.Player.x>=this.endX-.5*this.playerScript.maxSpeed&&this.Player.x<=this.endX+.5*this.playerScript.maxSpeed||!r.default.instance.checkGameState([1]))this.playerScript.curSpeed=0;else{this.playerScript.curSpeed+=this.playerScript.curASpeed;var e=this.playerScript.curSpeed;if(e){var t=e/Math.abs(e);this.playerScript.curSpeed=Math.abs(e)>=this.playerScript.maxSpeed?this.playerScript.maxSpeed*t:e,Math.abs(this.endX-this.Player.x)<5?(this.Player.x+=Math.abs(this.endX-this.Player.x)*t,this.playerScript.curSpeed=Math.abs(this.endX-this.Player.x)*t):Math.abs(this.endX-this.Player.x)<20?(this.Player.x+=5*t,this.playerScript.curSpeed=5*t):Math.abs(this.endX-this.Player.x)<50?(this.Player.x+=10*t,this.playerScript.curSpeed=10*t):this.Player.x+=this.playerScript.curSpeed}}},t.prototype.addScore=function(e){e&&(r.default.instance.curScore+=parseInt(e))},t.prototype.startNewGame=function(){f.default.instance.startCount("inGameTime");var e=h.default.arrRandom(p.default.bgmArr);p.default.playBackGroudMusic(e),this.playerScript.setBullet(),cc.director.getPhysicsManager().enabled=!0,l.default.gameUi.gameStart(),this.resurgenceTimes=0,r.default.instance.startGame(),this.playerScript.init(r.default.instance.curCannonID),this.playerScript.reLife(),a.default.instance.startNewGame(this.ballSpriteAtlas.getSpriteFrame(c.default.instance.scenceTable.getBallIcon(r.default.instance.curScenceID))),this.schedule(a.default.instance.createBallByTime.bind(a.default.instance),.25,cc.macro.REPEAT_FOREVER)},t.prototype.pauseGame=function(){r.default.instance.gameState=4,cc.director.getPhysicsManager().enabled=!1},t.prototype.gameContinue=function(){r.default.instance.gameState=1,cc.director.getPhysicsManager().enabled=!0},t.prototype.endGame=function(e){cc.director.getPhysicsManager().enabled=!1,r.default.instance.gameState=3,e?(f.default.instance.endCount("inGameTime"),s.default.instance.maxMissionNum(4,Math.round(.001*f.default.instance.getTimeCount("inGameTime"))),r.default.instance.hpLess=l.default.gameUi.pro.progress>=.4?.2:0,this.failedTimes++,d.default.instance.callJava("trackLevel","(Ljava/lang/String;Ljava/lang/String;)V","EndGame",r.default.instance.curLevel.toString()),this.unscheduleAllCallbacks(),l.default.instance.openPanel(u.PanelName.CompletePanel,l.default.gameUi.levelCompleteNode)):(f.default.instance.pauseCount("inGameTime"),l.default.instance.openPanel(u.PanelName.ResurgenceUi,l.default.gameUi.middleNode))},t.prototype.levelComplete=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){return 4==r.default.instance.gameState?(r.default.instance.gameState=7,[2]):(r.default.instance.isSlowAction=!0,r.default.instance.magnetProp(5),f.default.instance.pauseCount("inGameTime"),r.default.instance.gameState=5,this.playerScript.cancelShoot(),this.failedTimes=0,s.default.instance.collectMissionNum(7,1),d.default.instance.callJava("trackLevel","(Ljava/lang/String;Ljava/lang/String;)V","CompleteGame",r.default.instance.curLevel.toString()),e=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return r.default.instance.curLevel++,g.default.saveItem("curLevel",r.default.instance.curLevel.toString()),this.unscheduleAllCallbacks(),l.default.gameUi.updataGold(),l.default.instance.openPanel(u.PanelName.CompletePanel,l.default.gameUi.levelCompleteNode),l.default.gameUi.unscheduleAllCallbacks(),[2]})})}.bind(this),p.default.stopBackGroudMusic(),this.scheduleOnce(function(){r.default.instance.isSlowAction=!1,m.default.instance.resetSpeed()},1.13),this.scheduleOnce(this.playCompete.bind(this,e),2.5),[2])})})},t.prototype.onResurgenceTap=function(){p.default.setvolumeNum(1),this.resurgenceTimes++,this.playerScript.reLife(),f.default.instance.resumeCount("inGameTime"),s.default.instance.collectMissionNum(5,1),this.playerScript.resurgenceInvincible(),cc.director.getPhysicsManager().enabled=!0,r.default.instance.gameState=1},t.prototype.onTouchBegin=function(e){if(7==r.default.instance.gameState)this.levelComplete();else if(0==r.default.instance.gameState)this.startNewGame();else if(4==r.default.instance.gameState){if(h.default.getTime()<this.lastTime+300)return;cc.director.getPhysicsManager().enabled=!0,l.default.instance.getExistPanel(u.PanelName.PausePanel).touchStart(),this.lastTime=h.default.getTime(),r.default.instance.gameState=1}1!=r.default.instance.gameState||this.playerScript.isInShoot||(this.playerScript.startShoot(),this.endX=e.getLocation().x,this.playerScript.curASpeed=0,this.playerScript.curSpeed=this.playerScript.maxSpeed*((this.endX-this.Player.x)/Math.abs(this.Player.x-this.endX)),this.lastMoveX=-1,this.touchId=e.getID())},t.prototype.onTouchMove=function(e){if(this.touchId==e.getID())if(-1!=this.lastMoveX){var t=e.getLocation().x,n=t-this.lastMoveX;n>0&&this.Player.x<t?this.playerScript.curASpeed=n<this.playerScript.aSpeed?n:this.playerScript.aSpeed:n<0&&this.Player.x>t&&(this.playerScript.curASpeed=n>-this.playerScript.aSpeed?n:-this.playerScript.aSpeed),this.lastMoveX=t,this.endX=t}else this.lastMoveX=e.getLocation().x},t.prototype.onTouchEnd=function(e){this.touchId==e.getID()&&(1==r.default.instance.gameState&&(this.lastTime=h.default.getTime(),r.default.instance.gameState=4,cc.director.getPhysicsManager().enabled=!1,this.isInPaused?l.default.instance.getExistPanel(u.PanelName.PausePanel).touchEnd():l.default.instance.openPanel(u.PanelName.PausePanel,l.default.gameUi.middleNode),this.isInPaused=!0),this.playerScript.cancelShoot(),this.playerScript.curSpeed=0,this.playerScript.curASpeed=0)},t.prototype.setWallPos=function(){for(var e=this.wall._components.length,t=0;t<e;t++){var n=this.wall._components[t];n&&n instanceof cc.PhysicsBoxCollider&&(0==n.tag?n.offset.x=100:1==n.tag&&(n.offset.x=this.node.width+100))}},t.prototype.playBoomEffect=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,o,a,i,l;return __generator(this,function(s){switch(s.label){case 0:return n=1,0==t?n=1.2:1==t?n=1.4:2==t?n=1.8:3==t&&(n=2.2),o=r.default.instance.getTimeScale(),a=c.default.instance.scenceTable.getEffectId(r.default.instance.curScenceID),[4,m.default.instance.playEffect(this.boomPrefab.name,this.bulletNode,e,function(){i.active=!1},a,o)];case 1:return(i=s.sent()).scale=n,l=c.default.instance.scenceTable.getColor(r.default.instance.curScenceID),i.color=new cc.Color(Number(l[0]),Number(l[1]),Number(l[2])),[2]}})})},t.prototype.playSmokeEffect=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,o;return __generator(this,function(a){switch(a.label){case 0:return n=r.default.instance.getTimeScale(),c.default.instance.scenceTable.getEffectId(r.default.instance.curScenceID),[4,m.default.instance.playEffect(this.smokePrefab.name,this.bulletNode,e,function(){o.active=!1},"smoke"+t,n)];case 1:return o=a.sent(),[2]}})})},t.prototype.playCoinNumEffect=function(e,t){},t.prototype.playGoldOut=function(e){e=e>=100?100:e;for(var t=function(e){var t=i.default.instance.pop("coinPrefab");n.node.parent.addChild(t),t.scale=1,t.getComponent("CoinPrefab").setIconById(h.default.Random(4e4,40015).toString()),t.setPosition(cc.v2(375,812)),t.getComponent("CoinPrefab").notUpdata=!0;var o=cc.v2(h.default.Random(0,n.node.width),h.default.Random(0,n.node.height)),a=cc.sequence(cc.moveTo(.6*Math.random(),o),cc.moveTo(.6*Math.random()+.3,o),cc.scaleTo(.2,0),cc.callFunc(function(){t.removeFromParent(),i.default.instance.push(t)},n));t.runAction(a)},n=this,o=0;o<e;o++)t()},t.prototype.playCompete=function(e){void 0===e&&(e=null),p.default.playSoundEffect(p.default.win);var t=i.default.instance.pop(this.completeEffect.name);l.default.gameUi.middleNode.addChild(t);var n=t.getComponent(cc.Animation);this.scheduleOnce(function(){l.default.gameUi.uiInAni[0].play("uiIn0")},1),n.once("stop",function(){r.default.instance.isSlowAction=!1,e(),t.removeFromParent(),i.default.instance.push(t)}),n.play("completeEffect")},__decorate([v({type:[cc.Prefab],tooltip:"\u5b50\u5f39\u9884\u5236\u4f53"})],t.prototype,"bulletPrefabArr",void 0),__decorate([v({type:[cc.Prefab],tooltip:"\u526f\u70ae\u9884\u5236\u4f53"})],t.prototype,"funnelPrefabArr",void 0),__decorate([v(cc.Node)],t.prototype,"ballNode",void 0),__decorate([v(cc.Node)],t.prototype,"bulletNode",void 0),__decorate([v(cc.Node)],t.prototype,"Player",void 0),__decorate([v(cc.Node)],t.prototype,"wall",void 0),__decorate([v([cc.Prefab])],t.prototype,"ballPreArr",void 0),__decorate([v(cc.Prefab)],t.prototype,"coinPre",void 0),__decorate([v(cc.Prefab)],t.prototype,"boomPrefab",void 0),__decorate([v(cc.Prefab)],t.prototype,"funnulBommPrefab",void 0),__decorate([v(cc.Prefab)],t.prototype,"smokePrefab",void 0),__decorate([v(cc.Prefab)],t.prototype,"bloodPrefab",void 0),__decorate([v(cc.Prefab)],t.prototype,"coinNumPrefab",void 0),__decorate([v(cc.Prefab)],t.prototype,"completeEffect",void 0),__decorate([v(cc.Prefab)],t.prototype,"propPrefab",void 0),__decorate([v({type:cc.Prefab,tooltip:"\u70ae\u5c55\u793a\u9884\u5236\u4f53"})],t.prototype,"showPrefab",void 0),__decorate([v({type:cc.SpriteAtlas,tooltip:"\u7403\u8d44\u6e90"})],t.prototype,"ballSpriteAtlas",void 0),t=__decorate([b],t)}(o.default);n.default=S,cc._RF.pop()},{"../../code/Config/Config":"Config","../../code/Lib/Global":"Global","../../code/Lib/LocalStorage":"LocalStorage","../../code/Lib/TimeCount":"TimeCount","../../code/basecode/EasyGetCompleteClass":"EasyGetCompleteClass","../../code/manager/BallManager":"BallManager","../../code/manager/EffectManager":"EffectManager","../../code/manager/MissionManger":"MissionManger","../../code/manager/MyRoleDataManager":"MyRoleDataManager","../../code/manager/NodePoolMananger":"NodePoolMananger","../../code/manager/PanelManager":"PanelManager","../../code/manager/SDKManager":"SDKManager","../../code/manager/SoundManager":"SoundManager","../../code/manager/TableManager":"TableManager"}],GiftItem:[function(e,t,n){"use strict";cc._RF.push(t,"2148bbbMUdD4qq5tE4+G++B","GiftItem"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../code/Lib/Global"),a=e("../../../code/manager/TableManager"),i=e("../../../code/manager/SDKManager"),r=e("../../../code/Config/Config"),l=e("../../../code/Lib/Secret"),s=e("../../../code/manager/PanelManager"),c=e("../../../code/manager/EffectManager"),d=cc._decorator,u=d.ccclass,p=d.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nameLabel=null,t.infoLabel=null,t.rewardNode=[],t.iconSource=[],t.buyBtn=null,t.buyBtnLable=null,t.shadowBuyBtnLable=null,t.icon=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.buyBtn.node.on("click",this.buyBtnTap,this)},t.prototype.init=function(e){this.payId=e},t.prototype.setLable=function(){var e=a.default.instance.shopTable.getData(this.payId);this.icon.spriteFrame=s.default.gameUi.iconAtlas.getSpriteFrame(e.icon),this.buyBtnLable.string=this.shadowBuyBtnLable.string="$"+e.cost,this.nameLabel.string=GlobalFun.i18n.t("lable."+e.name),this.infoLabel.string=GlobalFun.i18n.t("lable."+e.des);var t=a.default.instance.shopTable.getreward(this.payId);if(0!=t.length){var n=this.rewardNode[t.length-1];n.active=!0;for(var i=t.length,r=0;r<i;r++){n.children[r].getChildByName("icon").getComponent(cc.Sprite).spriteFrame=this.iconSource[t[r][0]-51e4],n.children[r].getChildByName("num").getComponent(cc.Label).string=o.default.setNum(t[r][1])+""}}},t.prototype.successFly=function(){var e=a.default.instance.shopTable.getreward(this.payId);if(0!=e.length){var t=this.rewardNode[e.length-1];t.active=!0;for(var n=e.length,o=0;o<n;o++)c.default.instance.rewardFly(t.children[o].children[0],e[o][0])}},t.prototype.buyBtnTap=function(){-1!=i.default.instance.getNetState()&&(i.default.instance.checkUnConsumedGoods()?i.default.instance.reConsumeGood():(s.default.instance.getExistPanel(r.PanelName.ShopPanel).curItem=this,i.default.instance.callJava("trackPay","(Ljava/lang/String;Ljava/lang/String;)V","startPay",this.payId.toString()),l.default.setKeyValue("Buy"),i.default.instance.startPay(this.payId)))},__decorate([p({type:cc.Label,tooltip:"\u540d\u5b57lable"})],t.prototype,"nameLabel",void 0),__decorate([p({type:cc.Label,tooltip:"\u4fe1\u606flable"})],t.prototype,"infoLabel",void 0),__decorate([p({type:[cc.Node],tooltip:"\u5546\u54c1\u663e\u793a\u8282\u70b9"})],t.prototype,"rewardNode",void 0),__decorate([p({type:[cc.SpriteFrame],tooltip:"icon\u8d44\u6e90"})],t.prototype,"iconSource",void 0),__decorate([p({type:cc.Button,tooltip:"\u8d2d\u4e70\u6309\u94ae"})],t.prototype,"buyBtn",void 0),__decorate([p({type:cc.Label,tooltip:"\u8d2d\u4e70\u6309\u94aelable"})],t.prototype,"buyBtnLable",void 0),__decorate([p({type:cc.Label,tooltip:"\u8d2d\u4e70\u6309\u94aelable shadow"})],t.prototype,"shadowBuyBtnLable",void 0),__decorate([p({type:cc.Sprite,tooltip:"\u8d2d\u4e70\u6309\u94aelable shadow"})],t.prototype,"icon",void 0),t=__decorate([u],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../../../code/Config/Config":"Config","../../../code/Lib/Global":"Global","../../../code/Lib/Secret":"Secret","../../../code/manager/EffectManager":"EffectManager","../../../code/manager/PanelManager":"PanelManager","../../../code/manager/SDKManager":"SDKManager","../../../code/manager/TableManager":"TableManager"}],GlobalFun:[function(e,t,n){"use strict";cc._RF.push(t,"d9fddqUJ5FDerzzAspWvenh","GlobalFun");var o=e("LanguageData"),a=e("ShaderUtils");e("QuadTree");window.GlobalFun={i18n:null,shaderUtils:null,bloodColorArr:[],whiteColor1:null,whiteColor2:null,blackColor1:null,blackColor2:null,huToJiao:null,init:function(){this.i18n=o,this.shaderUtils=a,this.shaderUtils.init(),this.bloodColorArr=[];for(var e=[[239,31,31],[239,31,31],[239,31,137],[239,31,237],[191,31,239],[127,60,226],[19,155,251],[19,194,251],[19,251,161],[19,251,107],[19,251,42],[19,251,42]],t=e.length,n=0;n<t;n++){var i=e[n];this.bloodColorArr[11-n]=cc.color(i[0],i[1],i[2])}this.blackColor1=cc.color(24,106,105),this.blackColor2=cc.color(93,96,96),this.whiteColor1=cc.color(196,215,218),this.whiteColor2=cc.color(208,225,225),this.huToJiao=180/Math.PI},log:function(){var e;(e=console).log.apply(e,arguments)}},cc._RF.pop()},{LanguageData:"LanguageData",QuadTree:"QuadTree",ShaderUtils:"ShaderUtils"}],Global:[function(e,t,n){"use strict";cc._RF.push(t,"6efbc37k7pHPYcG/WhzGeBK","Global"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.convertNodePosToTargetNodePos=function(e,t){var n=e.parent.convertToWorldSpaceAR(e.position);return t.parent.convertToNodeSpaceAR(n)},e.randomFix=function(e,t,n){return void 0===n&&(n=1),Number((Math.random()*Number(t-e)+e).toFixed(n))},e.Random=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=1),Math.floor(Math.random()*(t-e+1))+e},e.arrRandom=function(t,n,o){if(void 0===n&&(n=!1),void 0===o&&(o=0),!t)return 0;var a=t.length,i=e.Random(0,a-1);return n?t[i]!=o?t[i]:e.arrRandom(t,n,o):t[i]},e.Length1=function(e,t,n,o){return Math.sqrt((e-n)*(e-n)+(t-o)*(t-o))},e.getAngle=function(t,n){var o=e.Length1(t[0],t[1],n[0],n[1]);return 180*Math.asin((n[0]-t[0])/o)/Math.PI},e.getAngle2=function(t,n,o,a){var i=e.Length1(t,n,o,a);return 180*Math.asin((o-t)/i)/Math.PI},e.random=function(){return 0==e.Random()?-1:1},e.disorderArr=function(t){for(var n,o,a=t.length,i=0;i<a;i++)o=e.Random(0,a-1),n=t[i],t[i]=t[o],t[o]=n;for(;--i>=0;)o=e.Random(0,a-1),n=t[i],t[i]=t[o],t[o]=n;return t},e.getTime=function(){return(new Date).getTime()},e.getTomorrowTime=function(){var t=new Date;t.setTime(this.getTime());var n=t.setHours(0,0,0,0)+864e5;return n<e.getTime()&&(n+=864e5),n},e.getTodayTime=function(){var e=new Date;e.setTime(this.getTime());var t=e.setHours(0,0,0,0);return t>this.getTime()&&(t-=864e5),t},e.getNextWeek=function(){var t=this.getServerWeek(),n=7-(t=0==t?6:t-1);return e.getTodayTime()+864e5*n},e.getServerWeek=function(){var e=new Date(this.getTime()).getDay();return Number(e)},e.numToHundred=function(e){return this.accMul(e,100)+"%"},e.setNumToKMB=function(e){var t=e.toString();return e>=1e8?t=(e/1e8).toFixed(2)+"B":e>=1e6?t=(e/1e6).toFixed(2)+"M":e>=1e3&&(t=(e/1e3).toFixed(2)+"K"),"00"==t.slice(-3,-1)&&(t=t.replace(/\.00/,"")),t},e.setNum=function(e){var t="",n=e;e>=1e11?(n=Math.floor(e/1e8),t="B"):e>=1e9?(n=Math.floor(e/1e6),t="M"):e>=1e6&&(n=Math.floor(e/1e3),t="K"),n+="";for(var o="";n.length>3;)o=","+n.slice(-3)+o,n=n.slice(0,n.length-3);return n&&(o=n+o),o+t},e.exactSub=function(e,t){var n=e.toString().split("."),o=n[1]?n[1].length:0,a=t.toString().split("."),i=a[1]?a[1].length:0,r=Math.max(o,i),l=Number("1"+new Array(r+1).join("0"));return(e*l-t*l)/l},e.exactAdd=function(e){for(var t=0,n=0;n<e.length;n++){var o=e[n].toString().split("."),a=o[1]?o[1].length:0;t=Math.max(t,a)}var i="1";for(n=0;n<t;n++)i+="0";var r=0;for(n=0;n<e.length;n++){r+=e[n]*Number(i)}return r/Number(i)},e.accDiv=function(e,t){var n=0,o=0;try{n=e.toString().split(".")[1].length}catch(e){}try{o=t.toString().split(".")[1].length}catch(e){}return Number(e.toString().replace(".",""))/Number(t.toString().replace(".",""))*Math.pow(10,o-n)},e.accMul=function(e,t){var n=0,o=e.toString(),a=t.toString();try{n+=o.split(".")[1].length}catch(e){}try{n+=a.split(".")[1].length}catch(e){}return Number(o.replace(".",""))*Number(a.replace(".",""))/Math.pow(10,n)},e.mapToJsonString=function(e){new Object;var t="{";return e.forEach(function(e,n){t+='"'+n+'":"'+e+'",'}),t=t.slice(0,t.length-1),t+="}"},e.jsonStringToMap=function(e){var t=new Map,n=JSON.parse(e);for(var o in n)t.set(o,n[o]);return t},e}();n.default=o,cc._RF.pop()},{}],GoShopPanel:[function(e,t,n){"use strict";cc._RF.push(t,"47b852fbB5Czq+QcSbNMxZr","GoShopPanel"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../code/basecode/BasePanel"),a=e("../../code/manager/UiAniManager"),i=e("../../code/manager/PanelManager"),r=e("../../code/Config/Config"),l=cc._decorator,s=l.ccclass,c=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nameLabel=null,t.docLabel=null,t.okBtn=null,t.okLabel=null,t.okLabelShadow=null,t.closeBtn=null,t.backNode=null,t._aniType=a.UiAniType.TopToDown,t}return __extends(t,e),t.prototype.openPanel=function(){this.playUIAni(a.InOrOut.IN),this.setLable(),this.addEvent()},t.prototype.closePanel=function(){this.playUIAni(a.InOrOut.OUT),this.dleEvent()},t.prototype.addEvent=function(){this.closeBtn.node.on("click",this.closeBtnTap,this),this.okBtn.node.on("click",this.okBtnTap,this)},t.prototype.dleEvent=function(){this.closeBtn.node.off("click",this.closeBtnTap,this),this.okBtn.node.off("click",this.okBtnTap,this),this.backNode.node.off("click",this.closeBtnTap,this)},t.prototype.setLable=function(){this.nameLabel.string=GlobalFun.i18n.t("lable.10223"),this.docLabel.string=GlobalFun.i18n.t("lable.10224"),this.okLabel.string=GlobalFun.i18n.t("lable.10225"),this.okLabelShadow.string=GlobalFun.i18n.t("lable.10225")},t.prototype.panelIn=function(){this.backNode.node.on("click",this.closeBtnTap,this)},t.prototype.panelOut=function(){i.default.instance.deleteOpen(r.PanelName.GoShopPanel),this.node.removeFromParent()},t.prototype.closeBtnTap=function(){i.default.instance.closePanel(r.PanelName.GoShopPanel),i.default.instance.checkPanelIsOpen(r.PanelName.ResurgenceUi)&&i.default.instance.getExistPanel(r.PanelName.ResurgenceUi).resumeTime()},t.prototype.okBtnTap=function(){i.default.instance.closePanel(r.PanelName.GoShopPanel),i.default.instance.openPanel(r.PanelName.ShopPanel,i.default.gameUi.middleNode)},__decorate([c({type:cc.Label,tooltip:"nameLabel"})],t.prototype,"nameLabel",void 0),__decorate([c({type:cc.Label,tooltip:"docLabel"})],t.prototype,"docLabel",void 0),__decorate([c({type:cc.Button,tooltip:"ok\u6309\u94ae"})],t.prototype,"okBtn",void 0),__decorate([c({type:cc.Label,tooltip:"okLabel"})],t.prototype,"okLabel",void 0),__decorate([c({type:cc.Label,tooltip:"okLabelShadow"})],t.prototype,"okLabelShadow",void 0),__decorate([c({type:cc.Button,tooltip:"close\u6309\u94ae"})],t.prototype,"closeBtn",void 0),__decorate([c({type:cc.Button,tooltip:"close\u6309\u94ae"})],t.prototype,"backNode",void 0),t=__decorate([s],t)}(o.default);n.default=d,cc._RF.pop()},{"../../code/Config/Config":"Config","../../code/basecode/BasePanel":"BasePanel","../../code/manager/PanelManager":"PanelManager","../../code/manager/UiAniManager":"UiAniManager"}],GuideManager:[function(e,t,n){"use strict";cc._RF.push(t,"ee3214c2P5MTao/Wk0TzKmW","GuideManager"),Object.defineProperty(n,"__esModule",{value:!0});var o,a=e("./PanelManager"),i=e("../Config/Config"),r=e("./MyRoleDataManager"),l=e("./TableManager"),s=e("../../src/ui/RefitShopPanel/RefitItem"),c=e("../Lib/LocalStorage"),d=e("./MissionManger"),u=e("../../src/ui/MissionPanel/MissionItem"),p=cc._decorator,h=p.ccclass,f=(p.property,function(){function e(){this.guideStep=0,this.isInGuide=0,this.maxStep=0,this.curGuideId=0,this.guideHistory={},this.guideHistory=JSON.parse(c.default.getItem("guideHistory","{}"))}var t;return t=e,Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),e.prototype.startGuide=function(e){this.isInGuide||(this.curGuideId=e,this.maxStep=l.default.instance.guideTable.getStep(e),this.guideStep=0),10001==e?this.refitShopGuide():10002==e?this.aircraftGuide():10003==e?this.missionGuide():10004==e&&this.specialGuide()},e.prototype.completeGuide=function(){this.guideStep>=this.maxStep&&this.endGuide()},e.prototype.endGuide=function(){this.isInGuide=0,this.guideStep=0,this.maxStep=0,this.curGuideId=0},e.prototype.checkCanGuide=function(e,t){return 10001==e?(!this.guideHistory[e]&&1==r.default.instance.curLevel||this.isInGuide==e)&&1==r.default.instance.getattributeLevel(r.default.instance.curCannonID)&&this.guideStep==t:10002==e?(!this.guideHistory[e]&&3==r.default.instance.curLevel||this.isInGuide==e)&&this.guideStep==t:10003==e?!((this.guideHistory[e]||!d.default.instance.getCompleteMission(0))&&this.isInGuide!=e||this.guideStep!=t):10004==e?this.isInGuide==e&&this.guideStep==t:void 0},e.prototype.setGuideState=function(e,t){this.guideHistory[e]=t,c.default.saveItem("guideHistory",JSON.stringify(this.guideHistory))},e.prototype.refitShopGuide=function(){if(this.guideHistory[10001]=!0,this.isInGuide=10001,0==this.guideStep){c.default.saveItem("guideHistory",JSON.stringify(this.guideHistory)),this.guideStep++;var e=a.default.gameUi.refitBtn.node.parent.convertToWorldSpaceAR(a.default.gameUi.refitBtn.node.position);a.default.instance.openPanel(i.PanelName.GuidePanel,a.default.gameUi.node,a.default.gameUi.refitBtn.node,e,"click",o.ClickTarget,l.default.instance.guideTable.getWord(10001,0))}else if(1==this.guideStep){this.guideStep++;var t=a.default.instance.getExistPanel(i.PanelName.RefitShopPanel).itemNodeArr[1],n=(e=t.parent.convertToWorldSpaceAR(t.position),t.getComponent(s.default).levelUpBtn.node);a.default.instance.openPanel(i.PanelName.GuidePanel,a.default.gameUi.node,n,e,"click",o.ClickTarget,-1,{width:t.width,height:t.height})}},e.prototype.aircraftGuide=function(){if(this.guideHistory[10002]=!0,this.isInGuide=10002,0==this.guideStep){c.default.saveItem("guideHistory",JSON.stringify(this.guideHistory)),this.guideStep++;var e=a.default.gameUi.aircraftBtn.node.parent.convertToWorldSpaceAR(a.default.gameUi.aircraftBtn.node.position);a.default.instance.openPanel(i.PanelName.GuidePanel,a.default.gameUi.node,a.default.gameUi.aircraftBtn.node,e,"click",o.ClickTarget,l.default.instance.guideTable.getWord(10002,0))}else if(1==this.guideStep){this.guideStep++;var t=a.default.instance.getExistPanel(i.PanelName.AircraftPanel).openGiftNode,n=(e=t.parent.convertToWorldSpaceAR(t.position),a.default.instance.getExistPanel(i.PanelName.AircraftPanel).openBtn.node);a.default.instance.openPanel(i.PanelName.GuidePanel,a.default.gameUi.node,n,e,"click",o.ClickTarget,-1,{width:t.width,height:t.height})}},e.prototype.missionGuide=function(){if(this.guideHistory[10003]=!0,this.isInGuide=10003,0==this.guideStep){c.default.saveItem("guideHistory",JSON.stringify(this.guideHistory)),this.guideStep++;var e=a.default.gameUi.missionBtn.node.parent.convertToWorldSpaceAR(a.default.gameUi.missionBtn.node.position);a.default.instance.openPanel(i.PanelName.GuidePanel,a.default.gameUi.node,a.default.gameUi.missionBtn.node,e,"click",o.ClickTarget,l.default.instance.guideTable.getWord(10003,0))}else if(1==this.guideStep){this.guideStep++;var t=a.default.instance.getExistPanel(i.PanelName.MissionPanel).getCompleteNode(),n=(e=t.parent.convertToWorldSpaceAR(t.position),t.getComponent(u.default).completeBtn.node);a.default.instance.openPanel(i.PanelName.GuidePanel,a.default.gameUi.node,n,e,"click",o.ClickTarget,-1,{width:t.width,height:t.height})}},e.prototype.specialGuide=function(){if(this.isInGuide=10004,0==this.guideStep){c.default.saveItem("guideHistory",JSON.stringify(this.guideHistory)),this.guideStep++;var e=a.default.gameUi.missionBtn.node.parent.convertToWorldSpaceAR(a.default.gameUi.missionBtn.node.position);a.default.instance.openPanel(i.PanelName.GuidePanel,a.default.gameUi.node,a.default.gameUi.missionBtn.node,e,"click",o.ClickTarget,d.default.instance.curSpecilMission.missionStartDes)}else if(1==this.guideStep){this.guideStep++;var t=a.default.instance.getExistPanel(i.PanelName.MissionPanel).completeBtn.node,n=(e=t.parent.convertToWorldSpaceAR(t.position),a.default.instance.getExistPanel(i.PanelName.MissionPanel).completeBtn.node);a.default.instance.openPanel(i.PanelName.GuidePanel,a.default.gameUi.node,n,e,"click",o.ClickAny,-1,{width:t.width+10,height:t.height+10},function(){var e=cc.repeat(cc.sequence(cc.rotateTo(.1,2),cc.rotateTo(.2,-2),cc.rotateTo(.1,0)),2);t.runAction(e)})}},e=t=__decorate([h],e)}());n.default=f,function(e){e[e.ClickTarget=0]="ClickTarget",e[e.ClickAny=1]="ClickAny",e[e.JustShow=2]="JustShow"}(o=n.GuideType||(n.GuideType={})),cc._RF.pop()},{"../../src/ui/MissionPanel/MissionItem":"MissionItem","../../src/ui/RefitShopPanel/RefitItem":"RefitItem","../Config/Config":"Config","../Lib/LocalStorage":"LocalStorage","./MissionManger":"MissionManger","./MyRoleDataManager":"MyRoleDataManager","./PanelManager":"PanelManager","./TableManager":"TableManager"}],GuidePanel:[function(e,t,n){"use strict";cc._RF.push(t,"d1039iwb6BG/pweCNGC3X4U","GuidePanel"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../code/basecode/BasePanel"),a=e("../../code/manager/UiAniManager"),i=e("../../code/manager/PanelManager"),r=e("../../code/Config/Config"),l=e("../../code/manager/GuideManager"),s=cc._decorator,c=s.ccclass,d=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.showNode=null,t.maskNode=null,t.wordNode=null,t.wordLabel=null,t.jiantouNode=null,t.completeFun=null,t.targetNode=null,t.event=null,t.guideType=null,t._aniType=a.UiAniType.Null,t}return __extends(t,e),t.prototype.openPanel=function(e,t,n,o,i,r,l){void 0===i&&(i=-1),void 0===l&&(l=null),this.playUIAni(a.InOrOut.IN),this.jiantouNode.active=!1,this.init(e,t,n,o,i,r,l)},t.prototype.closePanel=function(){this.playUIAni(a.InOrOut.OUT),this.clear(),this.dleEvent()},t.prototype.panelIn=function(){},t.prototype.panelOut=function(){i.default.instance.deleteOpen(r.PanelName.GuidePanel),this.node.removeFromParent()},t.prototype.addEvent=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onNodeTouchStart,this),this.showNode.on(cc.Node.EventType.TOUCH_END,this.onShowTouchStart,this)},t.prototype.dleEvent=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onNodeTouchStart,this),this.showNode.off(cc.Node.EventType.TOUCH_END,this.onShowTouchStart,this)},t.prototype.init=function(e,t,n,o,a,i,r){var l=this;void 0===a&&(a=-1),void 0===r&&(r=null);var s=this.node.parent.convertToNodeSpaceAR(t);this.targetNode=e,this.event=n,this.guideType=o,this.showNode.width=750,this.showNode.height=1624,this.wordNode.active=!(-1==a),this.wordLabel.string=GlobalFun.i18n.t("lable."+a),this.showNode.x=s.x,this.showNode.y=s.y,this.completeFun=r,this.maskNode.getComponent(cc.Widget).updateAlignment(),console.log(s),this.guideAni(i&&i.width?i.width:this.targetNode.width,i&&i.height?i.height:this.targetNode.height,function(){l.completeFun&&l.completeFun()})},t.prototype.clear=function(){this.targetNode=null,this.event=null,this.guideType=null},t.prototype.onNodeTouchStart=function(){this.guideType==l.GuideType.ClickAny&&this.touchSuccess()},t.prototype.onShowTouchStart=function(){this.guideType!=l.GuideType.ClickAny&&this.guideType!=l.GuideType.ClickTarget||this.touchSuccess()},t.prototype.touchSuccess=function(){this.targetNode&&this.event&&this.targetNode.emit(this.event),i.default.instance.closePanel(r.PanelName.GuidePanel),l.default.instance.completeGuide()},t.prototype.guideAni=function(e,t,n){var o=this,a=(e-this.showNode.width)/25,i=(t-this.showNode.height)/25,r=0;this.schedule(function(){r++,o.showNode.width+=a,o.showNode.height+=i,r>=25&&(o.showNode.width=e,o.showNode.height=t,o.addEvent(),n())},.01,25)},__decorate([d({type:cc.Node,tooltip:"\u663e\u793a\u8282\u70b9"})],t.prototype,"showNode",void 0),__decorate([d({type:cc.Node,tooltip:"\u906e\u7f69\u8282\u70b9"})],t.prototype,"maskNode",void 0),__decorate([d({type:cc.Node,tooltip:"\u8bed\u8a00\u8282\u70b9"})],t.prototype,"wordNode",void 0),__decorate([d({type:cc.Label,tooltip:"\u6587\u5b57\u811a\u672c"})],t.prototype,"wordLabel",void 0),__decorate([d({type:cc.Node,tooltip:"\u7bad\u5934"})],t.prototype,"jiantouNode",void 0),t=__decorate([c],t)}(o.default);n.default=u,cc._RF.pop()},{"../../code/Config/Config":"Config","../../code/basecode/BasePanel":"BasePanel","../../code/manager/GuideManager":"GuideManager","../../code/manager/PanelManager":"PanelManager","../../code/manager/UiAniManager":"UiAniManager"}],GuideTable:[function(e,t,n){"use strict";cc._RF.push(t,"4a527vv/K1LXYxZtnDfLRbb","GuideTable"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e){this.table=e}return e.prototype.getData=function(e){for(var t=0;t<this.table.length;t++){var n=this.table[t];if(n&&Number(n.id)==e)return n}return cc.warn("GuideTable: Do not have id "+e),""},e.prototype.getStep=function(e){for(var t=0;t<this.table.length;t++){var n=this.table[t];if(n&&Number(n.id)==e)return Number(n.step)}return cc.warn("GuideTable: Do not have id "+e),0},e.prototype.getWord=function(e,t){for(var n=0;n<this.table.length;n++){var o=this.table[n];if(o&&Number(o.id)==e){var a=o.word.split(";");if(a[t])return a[t]}}return cc.warn("GuideTable: Do not have id "+e),-1},e}();n.default=o,cc._RF.pop()},{}],HttpManager:[function(e,t,n){"use strict";cc._RF.push(t,"1353czL1z9FVYyFrsby61YO","HttpManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../ads/AdsGroupController"),a=e("./PanelManager"),i=cc._decorator,r=i.ccclass,l=(i.property,function(e){function t(){var t=e.call(this)||this;return t.outTimeFun=null,t.gameServerIP="",t.postName="",t.adsRequest=new XMLHttpRequest,t.gameServerIP="",t.isSend=!1,t.outTimeFun=function(){a.default.gameUi&&a.default.gameUi.openMask(!1)},t}var n;return __extends(t,e),n=t,Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new n),this._instance},enumerable:!0,configurable:!0}),t.prototype.post=function(e,t,n,o){void 0===t&&(t=""),void 0===n&&(n=null),void 0===o&&(o=!0);var i=this.adsRequest;o&&a.default.gameUi&&a.default.gameUi.openMask(!0),i.responseType="text",i.open("POST",e),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.send(t),i.onload=n||this.onPostComplete,i.onerror=this.onPostIOError,i.onprogress=this.onPostProgress,i.ontimeout=this.onTimeOut,i.abort=this.onAbort,this.scheduleOnce(this.outTimeFun,1)},t.prototype.get=function(e,t,n,o){void 0===t&&(t=""),void 0===n&&(n=null),void 0===o&&(o=!1),o&&a.default.gameUi&&a.default.gameUi.openMask(!0);var i=new XMLHttpRequest;i.responseType="text",i.open("GET",e),i.send()},t.prototype.onPostComplete=function(e){n.instance.unschedule(n.instance.outTimeFun),n.instance.isSend=!1,a.default.gameUi&&a.default.gameUi.openMask(!1);var t=JSON.parse(this.response);if(1==t.resultCode)switch(t.data.interfaceName){case"advertis":n.instance.getAdsDataFromSeverComplete(t.data)}},t.prototype.onPostIOError=function(e){n.instance.unschedule(n.instance.outTimeFun),a.default.gameUi&&a.default.gameUi.openMask(!1),n.instance.isSend=!1,this==n.instance.adsRequest&&n.instance.getAdsDataFromSever(1)},t.prototype.onPostProgress=function(e){},t.prototype.onTimeOut=function(e){"advertisA"==n.instance.postName&&n.instance.getAdsDataFromSever(1)},t.prototype.onAbort=function(){"advertisA"==n.instance.postName&&n.instance.getAdsDataFromSever(1)},t.prototype.getAdsDataFromSeverComplete=function(e){GlobalFun.log("getAdsDataFromSeverComplete"),o.default.instance.dataFromSever(e)},t.prototype.getAdsDataFromSever=function(e,t){if(void 0===e&&(e=0),void 0===t&&(t=5),1!=this.adsRequest.type){o.default.instance.adsset||o.default.instance.initAdsSet(),this.postName="advertisA",this.adsRequest.type=e;var n="gameId="+o.default.instance.adsset.appId+"&table="+t,a=0==e?o.default.instance.adsset.mainServer:o.default.instance.adsset.secondServer;this.post(a+"/advertisA.json",n,null,!1)}else o.default.instance.init()},t._instance=null,t=n=__decorate([r],t)}(cc.Component));n.default=l,cc._RF.pop()},{"../ads/AdsGroupController":"AdsGroupController","./PanelManager":"PanelManager"}],Lancher:[function(e,t,n){"use strict";cc._RF.push(t,"3a1d6UJxG9HWaDLuwuWXs2G","Lancher"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../code/manager/LoadManager"),a=e("../code/Lib/LocalStorage"),i=e("../code/manager/TableManager"),r=e("../code/manager/MyRoleDataManager"),l=e("../code/Config/Config"),s=e("../code/manager/SDKManager"),c=e("../code/ads/AdsGroupController"),d=e("../code/manager/UiAniManager"),u=e("../code/Lib/Global"),p=cc._decorator,h=p.ccclass,f=p.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.loadLable=null,t.loadAni=null,t.loadTimes=1,t.openState=0,t}return __extends(t,e),t.prototype.onLoad=function(){GlobalFun.init(),cc.Canvas.prototype.applySettings=function(){var e=cc.view.getDesignResolutionSize(),t=cc.view.getCanvasSize();t.height/t.width<=1.35?cc.view.setDesignResolutionSize(e.width,e.height,cc.ResolutionPolicy.SHOW_ALL):cc.view.setDesignResolutionSize(e.width,e.height,cc.ResolutionPolicy.FIXED_WIDTH),t.height/t.width>2&&(r.default.instance.isFullScreen=!0)}},t.prototype.update=function(){},t.prototype.start=function(){this.gameConfig(),this.loadAni.play()},t.prototype.gameConfig=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return"true"==a.default.getItem("isNewPalyer","true")&&r.default.instance.startNewGame(),a.default.saveItem("isNewPalyer","false"),r.default.instance.gsChannel=l.default.APKChannel,cc.game.on(cc.game.EVENT_HIDE,s.default.instance.onPause),cc.game.on(cc.game.EVENT_SHOW,s.default.instance.onResume),this.loadRes(),this.openGame(),[2]})})},t.prototype.openGame=function(){var e=this;o.default.instance.preloadScene("gameScence",this,function(t,n){e.openState+=1,e.openState>=2&&cc.director.loadScene("gameScence")},function(e,t){})},t.prototype.loadRes=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(n){switch(n.label){case 0:return u.default.getTime(),[4,o.default.instance.loadResByUrl("json")];case 1:return n.sent(),[4,d.default.init()];case 2:return n.sent(),c.default.instance.initAdsSet(),c.default.instance.init(),i.default.instance.init(),r.default.instance.loadData(),e=s.default.instance.callJava("getSysLanguage","()Ljava/lang/String;"),t=s.default.instance.callJava("getSysCountry","()Ljava/lang/String;"),e=e?this.getLanguage(e,t):"en",r.default.instance.curLangue=a.default.getItem("language",e),GlobalFun.i18n.init(r.default.instance.curLangue),r.default.instance.gsChannel!=l.default.APKChannel?[3,6]:[4,o.default.instance.loadResByUrl("/soundSource")];case 3:return n.sent(),[4,o.default.instance.loadResByUrl("/prefab")];case 4:return n.sent(),[4,o.default.instance.loadResByUrl("/mapRes")];case 5:n.sent(),n.label=6;case 6:return this.openState+=1,this.openState>=2&&cc.director.loadScene("gameScence"),[2]}})})},t.prototype.getLanguage=function(e,t){return cc.sys.platform==cc.sys.ANDROID?"zh"==e?"CN"==t?"cn":"tw":e:cc.sys.platform==cc.sys.IPHONE||cc.sys.IPAD?-1!=e.search(/en/)?"en":-1!=e.search(/zh_Hans/)?"cn":-1!=e.search(/zh_Hant/)?"tw":e:void 0},__decorate([f(cc.Label)],t.prototype,"loadLable",void 0),__decorate([f(cc.Animation)],t.prototype,"loadAni",void 0),t=__decorate([h],t)}(cc.Component);n.default=g,cc._RF.pop()},{"../code/Config/Config":"Config","../code/Lib/Global":"Global","../code/Lib/LocalStorage":"LocalStorage","../code/ads/AdsGroupController":"AdsGroupController","../code/manager/LoadManager":"LoadManager","../code/manager/MyRoleDataManager":"MyRoleDataManager","../code/manager/SDKManager":"SDKManager","../code/manager/TableManager":"TableManager","../code/manager/UiAniManager":"UiAniManager"}],LanguageData:[function(e,t,n){"use strict";cc._RF.push(t,"61de062n4dJ7ZM9/Xdumozn","LanguageData");var o=e("polyglot.min"),a=[],i=null;function r(e){var t=window.i18n.languages.languageText;a=window.i18n.languages.languageArr;var n={lable:{}};t[0][e]||(e=function(e){if(!e)return"en";for(var t=0;t<a.length;t++)if(-1!=e.search(a[t]))return a[t];return"en"}(e));for(var o=0;o<t.length;o++){var i=t[o];i&&(n.lable[i.id]=i[e])}return n}function l(e){e&&(i?i.replace(e):i=new o({phrases:e,allowMissing:!0}))}window.i18n||(window.i18n={languages:{},curLang:""}),t.exports={init:function(e){if(e!==window.i18n.curLang){var t=r(e)||{};window.i18n.curLang=e,l(t),this.inst=i}},t:function(e,t){if(i)return i.t(e,t)},inst:i,updateSceneRenderers:function(){for(var e=cc.director.getScene().children,t=[],n=0;n<e.length;++n){var o=e[n].getComponentsInChildren("LocalizedLabel");Array.prototype.push.apply(t,o)}for(var a=0;a<t.length;++a){t[a].updateLabel()}for(var i=[],r=0;r<e.length;++r){var l=e[r].getComponentsInChildren("LocalizedSprite");Array.prototype.push.apply(i,l)}for(var s=0;s<i.length;++s){i[s].updateSprite(window.i18n.curLang)}}},cc._RF.pop()},{"polyglot.min":"polyglot.min"}],LatticeProgress:[function(e,t,n){"use strict";cc._RF.push(t,"5cc79fFoMJKmYTs8iBaKexI","LatticeProgress"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../code/manager/NodePoolMananger"),a=cc._decorator,i=a.ccclass,r=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.proNode=null,t.latticeNode=null,t.maxLatticeNum=0,t.lockNode=null,t._pro=0,t}return __extends(t,e),t.prototype.clear=function(){for(var e=this.proNode.children,t=e.length,n=0;n<t;n++){e[n].removeFromParent()}},t.prototype.lock=function(){this.lockNode&&(this.lockNode.active=!0),this.proNode.active=!1,this.clear()},t.prototype.setPro=function(){this.lockNode&&this.lockNode.active&&(this.lockNode.active=!1,this.proNode.active=!0);var e=this.proNode.children;if(this.pro!=e.length)if(this.pro>e.length)for(var t=this.pro-e.length,n=0;n<t;n++){(a=o.default.instance.popWithCheckExist(this.latticeNode.name))||(o.default.instance.addPool(this.latticeNode),a=o.default.instance.pop(this.latticeNode.name)),a.active=!0,this.proNode.addChild(a)}else for(t=e.length-this.pro,n=0;n<t;n++){var a;(a=e.pop())&&a.removeFromParent()}},Object.defineProperty(t.prototype,"pro",{get:function(){return this._pro},set:function(e){this._pro=e>=this.maxLatticeNum?this.maxLatticeNum:e,this.setPro()},enumerable:!0,configurable:!0}),__decorate([r({type:cc.Node,tooltip:"\u8fdb\u5ea6\u8282\u70b9"})],t.prototype,"proNode",void 0),__decorate([r({type:cc.Node,tooltip:"\u683c\u5b50\u8282\u70b9"})],t.prototype,"latticeNode",void 0),__decorate([r({type:cc.Integer,tooltip:"\u6700\u5927\u683c\u5b50\u6570\u91cf"})],t.prototype,"maxLatticeNum",void 0),__decorate([r({type:cc.Node,tooltip:"\u9501\u5b9a\u8282\u70b9"})],t.prototype,"lockNode",void 0),t=__decorate([i],t)}(cc.Component);n.default=l,cc._RF.pop()},{"../../code/manager/NodePoolMananger":"NodePoolMananger"}],ListView:[function(e,t,n){"use strict";cc._RF.push(t,"dda00QAWttNgYRt2l9DQQYI","ListView"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../code/basecode/EasyGetCompleteClass"),a=e("../../code/Lib/Global"),i=cc._decorator,r=i.ccclass,l=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scroll=null,t.itemPreFab=null,t.spriteAtlas=null,t.content=null,t.selectItem=null,t.itemArr=[],t.listLen=0,t.isLowSpeedStop=!1,t.itemPool=[],t.startTouch=!1,t}return __extends(t,e),t.prototype.onLoad=function(){this.listLen=6,this.scroll.node.on("touchstart",this.touchBegin,this),this.scroll.node.on("scroll-ended",this.scrollEnd,this),this.scroll.node.on("touchend",this.touchEnd,this),this.scroll.node.on("scrolling",this.scrolling,this),this.scroll.elastic=!1},t.prototype.start=function(){},t.prototype.init=function(e){this.clearList();for(var t=0,n=0;n<e.length;n++){var o=e[n];if(o){t++;var a=this.itemPool.shift();a||(a=cc.instantiate(this.itemPreFab)),this.scroll.content.addChild(a);var i=o.icon?this.spriteAtlas.getSpriteFrame(o.icon):null;a.ECScript.init({icon:i,data:o}),this.itemArr.push(a)}}this.listLen=t,this.content.updateLayout()},t.prototype.getItemByIndex=function(e){return this.itemArr[e]},t.prototype.setSelectItem=function(e,t){for(var n=this.itemArr.length,o=0;o<n;o++){var a=this.itemArr[o];if(a&&a.ECScript[e]==t)return this.selectItem=a,!0}return this.selectItem=this.itemArr[0],!1},t.prototype.getSelectItem=function(){return this.selectItem},t.prototype.getIcon=function(e){return this.spriteAtlas.getSpriteFrame(e)},t.prototype.getSelectItemSrcipt=function(){return this.selectItem.ECScript},t.prototype.moveItemToSelect=function(e){if(void 0===e&&(e=.05),this.selectItem){this.isLowSpeedStop=!1;var t=this.selectItem,n=[],o=cc.v2(0,0),a=cc.v2(0,0),i=this.scroll.getMaxScrollOffset();if(this.scroll.horizontal)n=this.chooseSelectItemW(this.scroll,this.listLen,this.content.paddingLeft,this.content.paddingLeft,this.content.spacingX),o.x=n[1]*t.ECScript.index+t.ECScript.index*this.content.spacingX,a.x=i.x<=o.x?i.x:o.x;else{if(!this.scroll.vertical)return;n=this.chooseSelectItemH(this.scroll,this.listLen,this.content.paddingTop,this.content.paddingBottom,this.content.spacingY),o.y=n[1]*t.ECScript.index+t.ECScript.index*this.content.spacingY,a.y=i.y<=o.y?i.y:o.y}this.scroll.scrollToOffset(a,e)}},t.prototype.clearList=function(){for(var e=0;e<this.itemArr.length;e++){var t=this.itemArr[e];t&&(t.removeFromParent(),this.itemPool.push(t))}this.itemArr=[]},t.prototype.touchBegin=function(){this.startTouch=!0},t.prototype.touchEnd=function(){this.isLowSpeedStop=!0},t.prototype.scrollEnd=function(e){if(this.startTouch){this.startTouch=!1;var t=[],n=this.scroll.getMaxScrollOffset(),o=cc.v2(0,0);if(this.scroll.horizontal)t=this.chooseSelectItemW(this.scroll,this.listLen,this.content.paddingLeft,this.content.paddingLeft,this.content.spacingX),o.x=t[0]==this.listLen-1?n.x:t[0]*t[1]+t[0]*this.content.spacingX;else{if(!this.scroll.vertical)return;t=this.chooseSelectItemH(this.scroll,this.listLen,this.content.paddingTop,this.content.paddingBottom,this.content.spacingY),o.y=t[0]==this.listLen-1?n.y:t[0]*t[1]+t[0]*this.content.spacingY}this.scroll.scrollToOffset(o,.5),this.isLowSpeedStop=!1,this.selectItem=this.itemArr[t[0]]}},t.prototype.scrolling=function(e){if(this.scroll.isAutoScrolling()&&this.isLowSpeedStop){var t=a.default.getTime(),n=this.scroll.getScrollOffset();this.lastPos&&Math.abs(n.x-this.lastPos.x)/(t-this.lastTime)<=.1&&(this.startTouch=!0,this.isLowSpeedStop=!1,this.scroll.stopAutoScroll()),this.lastPos=n,this.lastTime=t}},t.prototype.chooseSelectItemW=function(e,t,n,o,a){if(void 0===n&&(n=0),void 0===o&&(o=0),void 0===a&&(a=0),!e)return[0,0];var i=e.content.width,r=Math.abs(e.getScrollOffset().x),l=(i-n-o)/t,s=Math.round(r/l);return[s=(s=s>t?t:s)<0?0:s,(i-n-o-(t-1)*a)/t]},t.prototype.chooseSelectItemH=function(e,t,n,o,a){if(void 0===n&&(n=0),void 0===o&&(o=0),void 0===a&&(a=0),!e)return[0,0];var i=e.content.height,r=Math.abs(e.getScrollOffset().y),l=(i-n-o)/t,s=Math.round(r/l);return[s=(s=s>t?t:s)<0?0:s,(i-n-o-(t-1)*a)/t]},__decorate([l(cc.ScrollView)],t.prototype,"scroll",void 0),__decorate([l(cc.Prefab)],t.prototype,"itemPreFab",void 0),__decorate([l(cc.SpriteAtlas)],t.prototype,"spriteAtlas",void 0),__decorate([l(cc.Layout)],t.prototype,"content",void 0),t=__decorate([r],t)}(o.default);n.default=s,cc._RF.pop()},{"../../code/Lib/Global":"Global","../../code/basecode/EasyGetCompleteClass":"EasyGetCompleteClass"}],LoadManager:[function(e,t,n){"use strict";cc._RF.push(t,"16d6bOY4hJBgYO/54Hvsq1Z","LoadManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(){function e(){this.loadCount=0,this.completeCount=0}var t;return t=e,Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),e.prototype.preloadScene=function(e,t,n,o){var a=cc.director,i=a._getSceneUuid(e);if(i)a.emit(cc.Director.EVENT_BEFORE_SCENE_LOADING,e),cc.loader.load({uuid:i.uuid,type:"uuid"},null==o?null:function(e,n){o&&o.call(t,e,n)},function(t,o){t&&cc.errorID(1215,e,t.message),n&&n(t,o)});else{var r='Can not preload the scene "'+e+'" because it is not in the build settings.';n&&n(new Error(r)),cc.error("preloadScene: "+r)}},e.prototype.loadRes=function(e,t){return __awaiter(this,void 0,Promise,function(){var n=this;return __generator(this,function(o){return this.loadCount++,[2,new Promise(function(o,a){cc.loader.loadRes(e,t,function(e,t){n.completeCount++,o(t)})})]})})},e.prototype.loadResByUrl=function(e,t){return void 0===t&&(t=!1),__awaiter(this,void 0,Promise,function(){var n=this;return __generator(this,function(o){return this.loadCount++,[2,new Promise(function(o,a){cc.loader.loadResDir(e,function(e,a,i){n.completeCount++,o(t?a:1)})})]})})},e.prototype.getRes=function(e,t){return cc.loader.getRes(e,t)},e.prototype.checkLoadComplete=function(){return __awaiter(this,void 0,void 0,function(){var e=this;return __generator(this,function(t){return[2,new Promise(function(t,n){var o=setInterval(function(){e.completeCount>=e.loadCount&&(clearInterval(o),t(1))},50)})]})})},e=t=__decorate([a],e)}());n.default=i,cc._RF.pop()},{}],LocalStorage:[function(e,t,n){"use strict";cc._RF.push(t,"381445ec9xNYJ/FKVpy9TwP","LocalStorage"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(){function e(){}return e.saveItem=function(e,t){cc.sys.localStorage.setItem(e,t)},e.getItem=function(e,t){void 0===t&&(t="");var n=cc.sys.localStorage.getItem(e);return n||t},e.removeItem=function(e){cc.sys.localStorage.removeItem(e)},e.clear=function(){cc.sys.localStorage.clear()},e=__decorate([a],e)}());n.default=i,cc._RF.pop()},{}],LocalizedLabel:[function(e,t,n){"use strict";cc._RF.push(t,"744dcs4DCdNprNhG0xwq6FK","LocalizedLabel");var o=e("LanguageData");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,menu:"i18n/LocalizedLabel"},properties:{dataID:{get:function(){return this._dataID},set:function(e){this._dataID!==e&&(this._dataID=e,this.updateLabel())}},_dataID:""},onLoad:function(){o.inst||o.init(),this.fetchRender()},fetchRender:function(){var e=this.getComponent(cc.Label);if(e)return this.label=e,void this.updateLabel()},updateLabel:function(){this.label?o.t(this.dataID)&&(this.label.string=o.t(this.dataID)):cc.error("Failed to update localized label, label component is invalid!")}}),cc._RF.pop()},{LanguageData:"LanguageData"}],LocalizedSprite:[function(e,t,n){"use strict";cc._RF.push(t,"f34ac2GGiVOBbG6XlfvgYP4","LocalizedSprite");var o=e("SpriteFrameSet");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,inspector:"packages://i18n/inspector/localized-sprite.js",menu:"i18n/LocalizedSprite"},properties:{spriteFrameSet:{default:[],type:o}},onLoad:function(){this.fetchRender()},fetchRender:function(){var e=this.getComponent(cc.Sprite);if(e)return this.sprite=e,void this.updateSprite(window.i18n.curLang)},getSpriteFrameByLang:function(e){for(var t=0;t<this.spriteFrameSet.length;++t)if(this.spriteFrameSet[t].language===e)return this.spriteFrameSet[t].spriteFrame},updateSprite:function(e){if(this.sprite){var t=this.getSpriteFrameByLang(e);!t&&this.spriteFrameSet[0]&&(t=this.spriteFrameSet[0].spriteFrame),this.sprite.spriteFrame=t}else cc.error("Failed to update localized sprite, sprite component is invalid!")}}),cc._RF.pop()},{SpriteFrameSet:"SpriteFrameSet"}],MapItemPrefab:[function(e,t,n){"use strict";cc._RF.push(t,"23cddYpXodOEIOqctB42xD6","MapItemPrefab"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../code/manager/NodePoolMananger"),a=e("./NormalLevelBtn"),i=e("../../../code/manager/MyRoleDataManager"),r=e("./BossLevelBtn"),l=e("../../../code/Lib/Global"),s=cc._decorator,c=s.ccclass,d=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.levelNode=null,t.mapResourceArr=[],t.backSprite=null,t.stoneNodeArr=[],t.stoneNode=null,t.levelArr1=[[-26,67],[-225,173],[22,258],[227,326],[-23,443],[-225,535],[21,644],[226,743],[-22,844],[-235,956]],t.levelArr2=[[3,61],[238,168],[-25,268],[-254,384],[28,475],[241,553],[-12,668],[-240,769],[-12,865],[192,939]],t.curIndex=0,t.btnArr=[],t.bossBtn=null,t.first=!0,t}return __extends(t,e),t.prototype.init=function(e){this.curIndex=e,this.getBtn(),this.backSprite.spriteFrame=this.mapResourceArr[Math.abs(this.curIndex)%2];var t=Math.abs(this.curIndex)%2==0?this.levelArr1:this.levelArr2;if(!(this.curIndex<0)){for(var n=0,s=10*e;s<10*(e+1);s++){var c=s+1,d=i.default.instance.curLevel>=c,u=void 0;if(c%20==0){if(this.bossBtn=u=o.default.instance.pop("bossLevelBtn"),this.levelNode.addChild(u),u.getComponent(r.default).init(d,c),this.btnArr[n]){var p=this.btnArr[n];p.removeFromParent(),o.default.instance.push(p),this.btnArr[n]=null}}else this.btnArr[n]?u=this.btnArr[n]:(u=o.default.instance.pop("normalLevelBtn"),this.levelNode.addChild(u),this.btnArr[n]=u),u.getComponent(a.default).init(d,c);u.setPosition(cc.v2(t[n][0],t[n][1])),n++}this.first&&(this.scheduleOnce(this.randomStone,l.default.Random(0,10)),this.first=!1),this.schedule(this.randomStone,l.default.Random(20,30),cc.macro.REPEAT_FOREVER)}},t.prototype.getBtn=function(){if(this.curIndex<0){for(var e=0;e<this.levelNode.children.length;e++){var t=this.levelNode.children[e];e--,t.removeFromParent(),o.default.instance.push(t)}this.btnArr=[]}this.bossBtn&&(this.bossBtn.removeFromParent(),o.default.instance.push(this.bossBtn),this.bossBtn=null)},t.prototype.randomStone=function(){var e=l.default.arrRandom(this.stoneNodeArr),t=cc.instantiate(e);t.active=!0,this.stoneNode.addChild(t,1);var n=l.default.Random(650,1024);t.setPosition(cc.v2(420,n));var o=cc.sequence(cc.moveTo(l.default.Random(20,30),cc.v2(-420,n-650)),cc.callFunc(function(){t.removeFromParent()}));t.runAction(o)},__decorate([d({type:cc.Node,tooltip:"\u6309\u94ae\u8282\u70b9"})],t.prototype,"levelNode",void 0),__decorate([d({type:[cc.SpriteFrame],tooltip:"\u80cc\u666f\u8d44\u6e90\u6570\u7ec4"})],t.prototype,"mapResourceArr",void 0),__decorate([d({type:cc.Sprite,tooltip:"\u80cc\u666f"})],t.prototype,"backSprite",void 0),__decorate([d({type:[cc.Node],tooltip:"\u9668\u77f3"})],t.prototype,"stoneNodeArr",void 0),__decorate([d({type:cc.Node,tooltip:"\u9668\u77f3\u8282\u70b9"})],t.prototype,"stoneNode",void 0),t=__decorate([c],t)}(cc.Component);n.default=u,cc._RF.pop()},{"../../../code/Lib/Global":"Global","../../../code/manager/MyRoleDataManager":"MyRoleDataManager","../../../code/manager/NodePoolMananger":"NodePoolMananger","./BossLevelBtn":"BossLevelBtn","./NormalLevelBtn":"NormalLevelBtn"}],MapLevelTable:[function(e,t,n){"use strict";cc._RF.push(t,"f1227UXjd5N/7G2y5sB1LeS","MapLevelTable"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../code/Lib/Global"),a=e("../../code/Lib/StringUtils"),i=e("../../code/manager/TableManager"),r=e("../../code/manager/MyRoleDataManager"),l=function(){function e(e){this.levelNumInOneChap=20,this.table=e}return e.prototype.getDataByLevel=function(e){if(0==e)return{id:"202000",ball_complete:"15",ball_low:"1",basis_hp:"50",hp_rate_low:"0",hp_rate_high:"0",hp_rate_max:"0",ball_time:"6",reward_level:"510000:100:0;510002:10:0",reward_passage:"301001"};var t=Math.floor((e-1)/this.levelNumInOneChap);return t=t>=this.table.length?this.table.length-1:t,this.table[t]},e.prototype.getBaseHpByLevel=function(e){if(0==e)return 50;var t=Math.floor((e-1)/this.levelNumInOneChap),n=(t=t>=this.table.length?this.table.length-1:t)+1;n=n>=this.table.length?this.table.length-1:n;var o=Number(this.table[t].basis_hp);return(Number(this.table[n].basis_hp)-o)*((e-1)%this.levelNumInOneChap/this.levelNumInOneChap)+o},e.prototype.getCurChapter=function(e){return Math.floor((e-1)/this.levelNumInOneChap)+1},e.prototype.getCurLevelIndex=function(e){return(e-1)%this.levelNumInOneChap},e.prototype.getCurChapterId=function(e){var t=this.getDataByLevel(e);return Number(t.id)},e.prototype.getLevelCompleteReward=function(e){e=e<=1?1:e;var t=this.getCurLevelIndex(e),n=this.getDataByLevel(e),l=a.default.instance.strToArr4(n.reward_level),s=t%2,c=i.default.instance.connonTable.getBestTenUpgradeMoney(),d=new Map;if(t==this.levelNumInOneChap-1){for(var u=l.length,p=0;p<u;p++)51e4==l[p][0]?d.set(51e4,Math.floor(r.default.instance.allGoldCount(c*(.001*l[p][1])))):510001==l[p][0]?d.set(510001,Math.floor(l[p][2]*(.001*l[p][1]))):510002==l[p][0]&&d.set(510002,Math.floor(l[p][1]));d.set(Number(n.reward_passage),1)}else if(d.set(51e4,Math.floor(c*(.03+.001*t))),0==s)for(u=l.length,p=0;p<u;p++)510001==l[p][0]&&d.set(510001,Math.round(l[p][2]*(.02+.001*t)));else 1==s&&d.set(510002,o.default.Random(2,3));return d},e.prototype.getGameEndReward=function(e){e=e<=1?1:e;var t=this.getDataByLevel(e),n=i.default.instance.connonTable.getBestTenUpgradeMoney(),o=new Map;return 202e3==t.id?o.set(51e4,Math.floor(.3*n)):o.set(51e4,Math.floor(.05*n)),o.set(510001,2),o},e}();n.default=l,cc._RF.pop()},{"../../code/Lib/Global":"Global","../../code/Lib/StringUtils":"StringUtils","../../code/manager/MyRoleDataManager":"MyRoleDataManager","../../code/manager/TableManager":"TableManager"}],MapPanel:[function(e,t,n){"use strict";cc._RF.push(t,"5d699rjYk1DbrT+cU5CgYiH","MapPanel"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../code/manager/UiAniManager"),a=e("../../../code/manager/PanelManager"),i=e("../../../code/Config/Config"),r=e("../../../code/manager/NodePoolMananger"),l=e("./MapItemPrefab"),s=e("../../../code/manager/MyRoleDataManager"),c=e("../../../code/manager/SoundManager"),d=e("../../../code/basecode/BasePanel"),u=cc._decorator,p=u.ccclass,h=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeArr=[],t.scenceParent=null,t.closeButton=null,t.mapResourceArr=[],t.normalLevelBtn=null,t.bossLevelBtn=null,t.okBtnLable=null,t.okBtnLableShadow=null,t._aniType=o.UiAniType.AlphaChange,t.curIndex=0,t.touchId=-1,t}return __extends(t,e),t.prototype.onLoad=function(){r.default.instance.addPool(this.normalLevelBtn),r.default.instance.addPool(this.bossLevelBtn)},t.prototype.openPanel=function(){this.playUIAni(o.InOrOut.IN),this.addEvent(),this.setPos(s.default.instance.curLevel-1)},t.prototype.closePanel=function(){this.playUIAni(o.InOrOut.OUT),this.dleEvent()},t.prototype.panelIn=function(){},t.prototype.panelOut=function(){a.default.instance.deleteOpen(i.PanelName.MapPanel),this.node.removeFromParent()},t.prototype.addEvent=function(){this.scenceParent.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.scenceParent.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.scenceParent.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.closeButton.node.on("click",this.closeBtTap,this)},t.prototype.dleEvent=function(){this.scenceParent.off(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.scenceParent.off(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.scenceParent.off(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.closeButton.node.off("click",this.closeBtTap,this)},t.prototype.setLable=function(){this.okBtnLable.string=this.okBtnLableShadow.string=GlobalFun.i18n.t("lable.10009")},t.prototype.setPos=function(e){var t=Math.floor(e/10);this.curIndex=t,this.nodeArr[2].y=-824,this.nodeArr[1].y=200,this.nodeArr[0].y=1224,this.nodeArr[2].getComponent(l.default).init(this.curIndex-1),this.nodeArr[1].getComponent(l.default).init(this.curIndex),this.nodeArr[0].getComponent(l.default).init(this.curIndex+1)},t.prototype.touchStart=function(e){-1==this.touchId&&(this.touchId=e.getID())},t.prototype.touchMove=function(e){if(this.touchId==e.getID()){for(var t=Math.floor(e.getDelta().y),n=this.nodeArr.length,o=0;o<n;o++)this.nodeArr[o].y+=t;this.checkNodeChange(t)}},t.prototype.touchEnd=function(e){this.touchId==e.getID()&&(this.touchId=-1)},t.prototype.checkNodeChange=function(e){if(e>0){if(0==this.curIndex&&this.nodeArr[2].y>=-824)return this.nodeArr[2].y=-824,this.nodeArr[1].y=200,void(this.nodeArr[0].y=1224);if(this.nodeArr[2].y>0)this.nodeArr[2].y=0,this.nodeArr[1].y=1024,this.nodeArr[0].y=-1024,this.curIndex--,(t=this.nodeArr.shift()).getComponent(l.default).init(this.curIndex-1),this.nodeArr.push(t)}else if(e<0){var t,n=this.scenceParent.height-this.nodeArr[0].height;if(this.nodeArr[0].y<=n)this.curIndex++,this.nodeArr[0].y=n,this.nodeArr[1].y=-(1024-n),this.nodeArr[2].y=this.scenceParent.height,(t=this.nodeArr.pop()).getComponent(l.default).init(this.curIndex+1),this.nodeArr.unshift(t)}},t.prototype.closeBtTap=function(){c.default.playSoundEffect(c.default.btnSound),a.default.instance.closePanel(i.PanelName.MapPanel)},__decorate([h([cc.Node])],t.prototype,"nodeArr",void 0),__decorate([h(cc.Node)],t.prototype,"scenceParent",void 0),__decorate([h(cc.Button)],t.prototype,"closeButton",void 0),__decorate([h({type:[cc.SpriteFrame],tooltip:"\u5730\u56fe\u80cc\u666f"})],t.prototype,"mapResourceArr",void 0),__decorate([h({type:cc.Prefab,tooltip:"\u666e\u901a\u5173\u5361\u6309\u94ae"})],t.prototype,"normalLevelBtn",void 0),__decorate([h({type:cc.Prefab,tooltip:"boss\u5173\u5361\u6309\u94ae"})],t.prototype,"bossLevelBtn",void 0),__decorate([h({type:cc.Label,tooltip:"ok\u6309\u94aeLable"})],t.prototype,"okBtnLable",void 0),__decorate([h({type:cc.Label,tooltip:"ok\u6309\u94aeLable\u9634\u5f71"})],t.prototype,"okBtnLableShadow",void 0),t=__decorate([p],t)}(d.default);n.default=f,cc._RF.pop()},{"../../../code/Config/Config":"Config","../../../code/basecode/BasePanel":"BasePanel","../../../code/manager/MyRoleDataManager":"MyRoleDataManager","../../../code/manager/NodePoolMananger":"NodePoolMananger","../../../code/manager/PanelManager":"PanelManager","../../../code/manager/SoundManager":"SoundManager","../../../code/manager/UiAniManager":"UiAniManager","./MapItemPrefab":"MapItemPrefab"}],MissionItem:[function(e,t,n){"use strict";cc._RF.push(t,"91adfNDjrNItqUdhlv902W3","MissionItem"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../code/manager/MissionManger"),a=e("../../../code/manager/TableManager"),i=e("../../../code/Lib/DateUtils"),r=e("../../../code/Lib/Global"),l=e("./RewardItem"),s=e("../../../code/manager/SoundManager"),c=e("../../../code/manager/PanelManager"),d=e("../../../code/manager/MyRoleDataManager"),u=e("../../../code/manager/GuideManager"),p=e("../../../code/manager/SDKManager"),h=cc._decorator,f=h.ccclass,g=h.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.missionNode=null,t.waitNode=null,t.missionIcon=null,t.infoLable=null,t.rewardNode=null,t.proLable=null,t.completeBtn=null,t.refreshLable=null,t.waitLable=null,t.missionAni=null,t.completeNode=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.completeBtn&&this.completeBtn.node.on("click",this.completeMission,this)},t.prototype.update=function(){if(this.isInWait){var e=this.missionData.refreshTime-r.default.getTime();e>0?this.refreshLable.string=i.default.instance.getFormatBySecond(.001*e,1):this.refreshMission()}},t.prototype.init=function(e){this.missionData=e,this.missionId=e.id;var t=r.default.getTime();if(0!=e.type&&(this.missionIcon.spriteFrame=c.default.gameUi.iconAtlas.getSpriteFrame(a.default.instance.propTable.getIcon(e.collectPropId))),e.isComplete&&e.refreshTime-t>0)this.waitLable.string=GlobalFun.i18n.t("lable.10222"),this.waitNode.active=!0,this.missionNode.active=!1,this.isInWait=!0,this.refreshLable.string=i.default.instance.getFormatBySecond(.001*(e.refreshTime-r.default.getTime()),1);else{e.isComplete&&e.refreshTime-t<0&&(this.missionData=e=o.default.instance.refreshMission(this.missionId),this.missionId=e.id),this.waitNode.active=!1,this.missionNode.active=!0,this.isInWait=!1,this.refreshLable.string=GlobalFun.i18n.t("lable."+e.nameId);var n=GlobalFun.i18n.t("lable."+e.decId);this.infoLable.string=n.replace("%d",e.quest+""),this.proLable.string=e.pro+"/"+e.quest;var s=a.default.instance.missionTable.getReward(e.id);this.rewardNode.getComponent(l.default).init(s),e.pro>=e.quest?(this.completeNode.active=!0,this.proLable.node.active=!1):(this.completeNode.active=!1,this.proLable.node.active=!0)}},t.prototype.refreshMission=function(){this.state=1,this.isInWait=!1,this.missionData=o.default.instance.refreshMission(this.missionId),this.missionId=this.missionData.id,this.missionAni.play("missionItemMove")},t.prototype.completeMission=function(){o.default.instance.checkMissionComplete(this.missionId)&&(u.default.instance.checkCanGuide(10003,0)&&u.default.instance.setGuideState(10003,!0),p.default.instance.callJava("trackEvent","(Ljava/lang/String;)V","NormalMissionComplete"),this.state=0,s.default.playSoundEffect(s.default.btnSound),this.rewardNode.getComponent(l.default).rewardFly(),this.missionData=o.default.instance.completeMission(this.missionId),a.default.instance.missionTable.getReward(this.missionId).forEach(function(e,t){d.default.instance.addCurrency(e,t)}),this.missionAni.play("missionItemMove"))},t.prototype.refreshShow=function(){this.node.zIndex=3,this.init(this.missionData)},__decorate([g({type:cc.Node,tooltip:"\u663e\u793a\u4efb\u52a1\u8be6\u60c5\u8282\u70b9"})],t.prototype,"missionNode",void 0),__decorate([g({type:cc.Node,tooltip:"\u51b7\u5374\u663e\u793a\u8282\u70b9"})],t.prototype,"waitNode",void 0),__decorate([g({type:cc.Sprite,tooltip:"\u4efb\u52a1\u56fe\u6807"})],t.prototype,"missionIcon",void 0),__decorate([g({type:cc.Label,tooltip:"\u4efb\u52a1\u4fe1\u606f"})],t.prototype,"infoLable",void 0),__decorate([g({type:cc.Node,tooltip:"\u5956\u52b1\u8282\u70b9"})],t.prototype,"rewardNode",void 0),__decorate([g({type:cc.Label,tooltip:"\u4efb\u52a1\u8fdb\u5ea6"})],t.prototype,"proLable",void 0),__decorate([g({type:cc.Button,tooltip:"\u5b8c\u6210\u6309\u94ae"})],t.prototype,"completeBtn",void 0),__decorate([g({type:cc.Label,tooltip:"\u51b7\u5374\u65f6\u95f4"})],t.prototype,"refreshLable",void 0),__decorate([g({type:cc.Label,tooltip:"\u51b7\u5374lable"})],t.prototype,"waitLable",void 0),__decorate([g({type:cc.Animation,tooltip:"\u52a8\u753b"})],t.prototype,"missionAni",void 0),__decorate([g({type:cc.Node,tooltip:"\u5b8c\u6210\u8282\u70b9"})],t.prototype,"completeNode",void 0),t=__decorate([f],t)}(cc.Component);n.default=m,cc._RF.pop()},{"../../../code/Lib/DateUtils":"DateUtils","../../../code/Lib/Global":"Global","../../../code/manager/GuideManager":"GuideManager","../../../code/manager/MissionManger":"MissionManger","../../../code/manager/MyRoleDataManager":"MyRoleDataManager","../../../code/manager/PanelManager":"PanelManager","../../../code/manager/SDKManager":"SDKManager","../../../code/manager/SoundManager":"SoundManager","../../../code/manager/TableManager":"TableManager","./RewardItem":"RewardItem"}],MissionManger:[function(e,t,n){"use strict";cc._RF.push(t,"88124MJH6lNM4zVhlytfqdB","MissionManger"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Lib/LocalStorage"),a=e("./TableManager"),i=e("../Lib/Global"),r=cc._decorator,l=r.ccclass,s=(r.property,function(){function e(){this.curMission=[],this.itemCollectNum=0;var e=o.default.getItem("curMission","[]");this.curSpecilMission=JSON.parse(o.default.getItem("specialMission","{}")),this.curMission=JSON.parse(e)}var t;return t=e,Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){if(this.curMission.length<3)for(var e=0,t=3-this.curMission.length;e<t;e++)this.addMission(0);i.default.getServerWeek();var n=i.default.getTime();return!(!(this.curSpecilMission.id&&n>this.curSpecilMission.refreshTime)&&this.curSpecilMission.id)&&(this.addMission(1),!0)},e.prototype.addMission=function(e){if(0==e){if(this.curMission.length>=3)return;if(!(n=a.default.instance.missionTable.getRandomMission()))return;var t=this.normalMission(n);this.curMission.push(t)}else{var n;if(!(n=a.default.instance.missionTable.getRandomSpecialMission()))return;this.curSpecilMission=this.specialMission(n)}this.saveMission()},e.prototype.completeMission=function(e){for(var t,n=this.curMission.length,o=0;o<n;o++)if(this.curMission[o].id==e){(t=this.curMission[o]).isComplete=!0,t.refreshTime=i.default.getTime()+1e3*t.refreshTime,this.curMission.splice(o,1);break}return this.curMission.push(t),this.saveMission(),t},e.prototype.refreshMission=function(e){for(var t=this.curMission.length,n=0;n<t;n++)if(this.curMission[n].id==e)return this.curMission[n]=null,this.curMission[n]=this.normalMission(a.default.instance.missionTable.getRandomMission()),this.saveMission(),this.curMission[n]},e.prototype.collectMissionNum=function(e,t){for(var n=this.curMission.length,o=0;o<n;o++)this.curMission[o].questType==e&&(this.curMission[o].pro+=t)},e.prototype.collectSpecialProp=function(e,t){this.curSpecilMission.collectPropId==e&&(this.itemCollectNum++,this.curSpecilMission.pro+=t)},e.prototype.maxMissionNum=function(e,t){for(var n=this.curMission.length,o=0;o<n;o++)this.curMission[o].questType==e&&t>=this.curMission[o].quest&&(this.curMission[o].pro=t)},e.prototype.saveMission=function(){for(var e="[",t=this.curMission.length,n=0;n<t;n++){var a=this.curMission[n];e+=JSON.stringify(a),n!=t-1&&(e+=",")}e+="]",o.default.saveItem("curMission",e),o.default.saveItem("specialMission",JSON.stringify(this.curSpecilMission))},e.prototype.normalMission=function(e){var t=e.complete.split(":");return{id:e.id,nameId:e.name,decId:e.des1,type:e.type,questType:Number(t[0]),pro:0,quest:Number(t[1]),refreshTime:e.refresh_time,isComplete:!1}},e.prototype.specialMission=function(e){var t=e.complete.split(":");return{id:e.id,nameId:e.name,decId:e.des2,missionStartDes:e.des1,type:e.type,questType:Number(t[0]),collectPropId:Number(t[1]),pro:0,quest:Number(t[2]),refreshTime:this.specialMissionRefreshTime(Number(e.refresh_time)),isComplete:!1,nextId:e.next_job,totalPro:1,totalNumber:a.default.instance.missionTable.getSpecialTotal(e.type),isCompleteAll:!1}},e.prototype.specialMissionRefreshTime=function(e){var t=i.default.getServerWeek(),n=0;return 1==e||3==e?n=i.default.getTodayTime()+24*(e-t+2)*60*60*1e3:5==e&&0==t?n=i.default.getTomorrowTime():5!=e||5!=t&&6!=t||(n=i.default.getTodayTime()+24*(e-t+3)*60*60*1e3),n},e.prototype.completeSpecial=function(){var e=this.curSpecilMission.id,t=0!=this.curSpecilMission.nextId?this.curSpecilMission.nextId:this.curSpecilMission.id,n=this.curSpecilMission.totalPro;return this.curSpecilMission=this.specialMission(a.default.instance.missionTable.getData(t)),this.curSpecilMission.totalPro=n+1<=this.curSpecilMission.totalNumber?n+1:this.curSpecilMission.totalNumber,o.default.saveItem("specialMission",JSON.stringify(this.curSpecilMission)),e},e.prototype.getCompleteMission=function(e){for(var t=this.curMission.length,n=0;n<t;n++){var o=this.curMission[n];if(o.pro>=o.quest&&!o.isComplete&&1!=e)return o.id}return this.curSpecilMission.pro>=this.curSpecilMission.quest&&!this.curSpecilMission.isCompleteAll&&0!=e&&this.curSpecilMission.id},e.prototype.checkMissionComplete=function(e){if(this.curSpecilMission.id==e&&this.curSpecilMission.pro>=this.curSpecilMission.quest&&!this.curSpecilMission.isComplete)return!0;for(var t=this.curMission.length,n=0;n<t;n++){var o=this.curMission[n];if(o.id==e&&o.pro>=o.quest&&!o.isComplete)return!0}return!1},e=t=__decorate([l],e)}());n.default=s,cc._RF.pop()},{"../Lib/Global":"Global","../Lib/LocalStorage":"LocalStorage","./TableManager":"TableManager"}],MissionPanel:[function(e,t,n){"use strict";cc._RF.push(t,"5ba4deKJzZKhIkkVd/jZeW4","MissionPanel"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../code/manager/UiAniManager"),a=e("../../../code/basecode/BasePanel"),i=e("../../../code/manager/TableManager"),r=e("../../../code/manager/MissionManger"),l=e("../../../code/manager/PanelManager"),s=e("../../../code/Config/Config"),c=e("../../../code/manager/MyRoleDataManager"),d=e("./RewardItem"),u=e("../../../code/manager/SoundManager"),p=e("../../../code/manager/GuideManager"),h=e("../../../code/manager/SDKManager"),f=e("../../../code/Lib/Global"),g=e("../../../code/Lib/DateUtils"),m=cc._decorator,y=m.ccclass,b=m.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nameLabel=null,t.okBtn=null,t.specialNameLabel=null,t.specialInfoLabel=null,t.leftTimeLabel=null,t.proLabel=null,t.pro=null,t.rewardNode=null,t.specialAni=null,t.completeBtn=null,t.missionNode=null,t.missionItemPrefab=null,t.missionShowNode=null,t.missionCompleteNode=null,t.icon=null,t.missioncompleteNode=null,t.downNode=null,t.viewNode=null,t.missionScriptArr=[],t._aniType=o.UiAniType.TopToDown,t.isHaveSpecialMission=!0,t}return __extends(t,e),t.prototype.onLoad=function(){this.node.getComponent(cc.Widget).updateAlignment(),this.node.height<=1320&&(this.node.getChildByName("panel").getComponent(cc.Widget).updateAlignment(),this.downNode.getComponent(cc.Widget).isAlignTop=!0,this.downNode.getComponent(cc.Widget).isAlignBottom=!0,this.downNode.getComponent(cc.Widget).top=200,this.downNode.getComponent(cc.Widget).bottom=90,this.downNode.getComponent(cc.Widget).updateAlignment())},t.prototype.update=function(){if(this.isHaveSpecialMission){var e=f.default.getTime();this.leftTimeLabel.string=GlobalFun.i18n.t("lable.10004")+g.default.instance.getFormatBySecond((r.default.instance.curSpecilMission.refreshTime-e)/1e3,5)}},t.prototype.openPanel=function(){this.updateInfo(),this.playUIAni(o.InOrOut.IN),this.setLable(),this.addEvent()},t.prototype.closePanel=function(){l.default.gameUi.btnTishi(),this.playUIAni(o.InOrOut.OUT),this.dleEvent()},t.prototype.panelIn=function(){this.viewNode.active=!0,p.default.instance.checkCanGuide(10003,1)?p.default.instance.startGuide(10003):p.default.instance.checkCanGuide(10004,1)&&p.default.instance.startGuide(10004)},t.prototype.panelOut=function(){this.viewNode.active=!1,this.node.removeFromParent()},t.prototype.addEvent=function(){this.okBtn.node.on("click",this.okBtnTap,this),this.completeBtn.node.on("click",this.completeSpecialMission,this)},t.prototype.dleEvent=function(){this.okBtn.node.off("click",this.okBtnTap,this),this.completeBtn.node.off("click",this.completeSpecialMission,this)},t.prototype.setLable=function(){this.nameLabel.string=GlobalFun.i18n.t("lable.10113"),this.specialMissionShow();for(var e=this.missionScriptArr.length,t=0;t<e;t++){var n=r.default.instance.curMission[t],o=this.missionScriptArr[t];n&&o.init(n)}},t.prototype.getCompleteNode=function(){for(var e=r.default.instance.curMission,t=e.length,n=0;n<t;n++)if(e[n].pro>=e[n].quest&&!e[n].isComplete)return this.missionNode.children[n+1]},t.prototype.updateInfo=function(){this.missionScriptArr=[];for(var e=0,t=this.missionNode.childrenCount;e<t;e++)if("MissionItem"==this.missionNode.children[e].name){var n=this.missionNode.children[e].getComponent("MissionItem");n&&this.missionScriptArr.push(n)}var o=this.missionScriptArr.length;for(e=0;e<o;e++){var a=r.default.instance.curMission[e],i=this.missionScriptArr[e];a?i.init(a):i.node.active=!1}},t.prototype.specialMissionShow=function(){var e=r.default.instance.curSpecilMission;this.specialNameLabel.string="("+e.totalPro+"/"+e.totalNumber+")"+GlobalFun.i18n.t("lable."+e.nameId),this.specialInfoLabel.string=GlobalFun.i18n.t("lable."+e.decId),this.specialStr=GlobalFun.i18n.t("lable.10004"),this.proLabel.string=e.pro+"/"+e.quest,this.pro.progress=e.pro/e.quest;var t=i.default.instance.missionTable.getReward(e.id);this.icon.spriteFrame=l.default.gameUi.iconAtlas.getSpriteFrame(i.default.instance.propTable.getIcon(e.collectPropId)),this.rewardNode.getComponent(d.default).init(t),this.missionCompleteNode.active=!1,this.missionShowNode.active=!0,e.pro>=e.quest&&!e.isCompleteAll?this.missioncompleteNode.active=!0:e.pro<e.quest&&!e.isCompleteAll?this.missioncompleteNode.active=!1:e.isCompleteAll&&(this.missionCompleteNode.active=!0,this.missionShowNode.active=!1)},t.prototype.completeSpecialMission=function(){if(r.default.instance.checkMissionComplete(r.default.instance.curSpecilMission.id)){h.default.instance.callJava("trackEvent","(Ljava/lang/String;)V","SpecialMissionComplete"),u.default.playSoundEffect(u.default.btnSound);var e=r.default.instance.completeSpecial();i.default.instance.missionTable.getReward(e).forEach(function(e,t){c.default.instance.addCurrency(e,t)}),this.rewardNode.getComponent(d.default).rewardFly(),this.specialAni.play("specialMissionItemMove")}},t.prototype.okBtnTap=function(){u.default.playSoundEffect(u.default.btnSound),l.default.instance.closePanel(s.PanelName.MissionPanel)},t.prototype.refreshShow=function(){this.specialMissionShow()},__decorate([b({type:cc.Label,tooltip:"\u754c\u9762\u540d"})],t.prototype,"nameLabel",void 0),__decorate([b({type:cc.Button,tooltip:"okBtn"})],t.prototype,"okBtn",void 0),__decorate([b({type:cc.Label,tooltip:"\u7279\u6b8a\u4efb\u52a1\u540d\u5b57"})],t.prototype,"specialNameLabel",void 0),__decorate([b({type:cc.Label,tooltip:"\u7279\u6b8a\u4efb\u52a1\u4fe1\u606f"})],t.prototype,"specialInfoLabel",void 0),__decorate([b({type:cc.Label,tooltip:"\u7279\u6b8a\u4efb\u52a1\u5269\u4f59\u65f6\u95f4"})],t.prototype,"leftTimeLabel",void 0),__decorate([b({type:cc.Label,tooltip:"\u7279\u6b8a\u4efb\u52a1\u8fdb\u5ea6"})],t.prototype,"proLabel",void 0),__decorate([b({type:cc.ProgressBar,tooltip:"\u7279\u6b8a\u4efb\u52a1\u8fdb\u5ea6"})],t.prototype,"pro",void 0),__decorate([b({type:cc.Node,tooltip:"\u7279\u6b8a\u4efb\u52a1\u5956\u52b1"})],t.prototype,"rewardNode",void 0),__decorate([b({type:cc.Animation,tooltip:"\u7279\u6b8a\u4efb\u52a1\u8fdb\u5ea6"})],t.prototype,"specialAni",void 0),__decorate([b({type:cc.Button,tooltip:"\u7279\u6b8a\u4efb\u52a1\u5b8c\u6210Btn"})],t.prototype,"completeBtn",void 0),__decorate([b({type:cc.Node,tooltip:"\u4efb\u52a1item\u8282\u70b9"})],t.prototype,"missionNode",void 0),__decorate([b({type:cc.Prefab,tooltip:"\u4efb\u52a1item\u8282\u70b9\u9884\u5236\u4f53"})],t.prototype,"missionItemPrefab",void 0),__decorate([b({type:cc.Node,tooltip:"\u4efb\u52a1\u663e\u793a\u8282\u70b9"})],t.prototype,"missionShowNode",void 0),__decorate([b({type:cc.Node,tooltip:"\u4efb\u52a1\u5b8c\u6210\u8282\u70b9"})],t.prototype,"missionCompleteNode",void 0),__decorate([b({type:cc.Sprite,tooltip:"\u7279\u6b8a\u4efb\u52a1icon"})],t.prototype,"icon",void 0),__decorate([b({type:cc.Node,tooltip:"\u5b8c\u6210\u8282\u70b9"})],t.prototype,"missioncompleteNode",void 0),__decorate([b({type:cc.Node,tooltip:"\u4e0b\u65b9\u8282\u70b9"})],t.prototype,"downNode",void 0),__decorate([b({type:cc.Node,tooltip:"\u663e\u793a\u8282\u70b9"})],t.prototype,"viewNode",void 0),t=__decorate([y],t)}(a.default);n.default=v,cc._RF.pop()},{"../../../code/Config/Config":"Config","../../../code/Lib/DateUtils":"DateUtils","../../../code/Lib/Global":"Global","../../../code/basecode/BasePanel":"BasePanel","../../../code/manager/GuideManager":"GuideManager","../../../code/manager/MissionManger":"MissionManger","../../../code/manager/MyRoleDataManager":"MyRoleDataManager","../../../code/manager/PanelManager":"PanelManager","../../../code/manager/SDKManager":"SDKManager","../../../code/manager/SoundManager":"SoundManager","../../../code/manager/TableManager":"TableManager","../../../code/manager/UiAniManager":"UiAniManager","./RewardItem":"RewardItem"}],MissionTable:[function(e,t,n){"use strict";cc._RF.push(t,"83847y9EuZFha/VvHTgbvW4","MissionTable"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../code/manager/MyRoleDataManager"),a=e("../../code/Lib/Global"),i=e("../../code/Lib/StringUtils"),r=e("../../code/manager/MissionManger"),l=e("../../code/manager/TableManager"),s=function(){function e(e){this.table=e}return e.prototype.getData=function(e){for(var t=this.table.length,n=0;n<t;n++){var o=this.table[n];if(o&&o.id==e)return o}},e.prototype.getRandomMission=function(){for(var e=0==o.default.instance.curLevel?1:o.default.instance.curLevel,t=[],n=this.table.length,i=0;i<n;i++){var l=this.table[i];if(l&&0==Number(l.type)&&e>=Number(l.level)){for(var s=!1,c=r.default.instance.curMission,d=0,u=c.length;d<u;d++)if(c[d]&&c[d].id==l.id){s=!0;break}s||t.push(l)}}return a.default.arrRandom(t)},e.prototype.getRandomSpecialMission=function(){var e=a.default.getServerWeek();switch(e){case 1:case 2:e=1;break;case 3:case 4:e=3;break;case 5:case 6:case 0:e=5;break;default:e=1}for(var t=this.table.length,n=-1,o=[],i=0;i<t;i++){var r=this.table[i];r&&Number(r.refresh_time)==e&&r.type!=n&&(o.push(r),n=r.type)}return a.default.arrRandom(o)},e.prototype.getReward=function(e){for(var t=new Map,n=this.table.length,o=0;o<n;o++){var a=this.table[o];if(a&&a.id==e)for(var r=i.default.instance.strToArr3(a.reward),s=r.length,c=0;c<s;c++){var d=r[c];if(d)if(51e4==d[0]){var u=l.default.instance.connonTable.getBestTenUpgradeMoney();t.set(51e4,Math.floor(.001*u*d[1]))}else t.set(d[0],d[1])}}return t},e.prototype.getNextId=function(e){for(var t=this.table.length,n=0;n<t;n++){var o=this.table[n];if(o&&o.id==e)return o.next_job}},e.prototype.getSpecialTotal=function(e){for(var t=0,n=this.table.length,o=0;o<n;o++){var a=this.table[o];a&&a.type==e&&t++}return t},e}();n.default=s,cc._RF.pop()},{"../../code/Lib/Global":"Global","../../code/Lib/StringUtils":"StringUtils","../../code/manager/MissionManger":"MissionManger","../../code/manager/MyRoleDataManager":"MyRoleDataManager","../../code/manager/TableManager":"TableManager"}],MyLable:[function(e,t,n){"use strict";cc._RF.push(t,"ac8c2+o7XdFSaNqrSnLoCv4","MyLable"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.atlas=null,t.startWidth=0,t.spriteFrameObj={},t.spriteArr=[],t._string="",t.isChangeColor=!1,t}return __extends(t,e),t.prototype.update=function(){if(this.isChangeColor)for(var e=this.spriteArr.length,t=0;t<e;t++)this.spriteArr[t].node.color=this.node.color},t.prototype.onLoad=function(){this.startScale=this.node.scale},Object.defineProperty(t.prototype,"string",{get:function(){return this._string},set:function(e){this._string=e,this.setSprite()},enumerable:!0,configurable:!0}),t.prototype.setSprite=function(){for(var e=this.string.length,t=0;t<e;t++){var n=this.string[t];if(this.spriteArr[t])this.spriteArr[t].spriteFrame=this.atlas.getSpriteFrame(n),this.spriteArr[t].node.parent||this.node.addChild(this.spriteArr[t].node);else{!0;var o=(new cc.Node).addComponent(cc.Sprite);o.spriteFrame=this.atlas.getSpriteFrame(n),this.spriteArr[t]=o,o.trim=!1,o.sizeMode=cc.Sprite.SizeMode.RAW,this.node.addChild(o.node)}}if(e<this.spriteArr.length){var a=this.spriteArr.length;for(t=e;t<a;t++)this.spriteArr[t].node.parent&&(!0,this.spriteArr[t].node.removeFromParent())}this.node.width&&-1!=this.startWidth&&(this.node.getComponent(cc.Layout).updateLayout(),this.node.width>this.startWidth?this.node.scale=this.startWidth/this.node.width*this.startScale:this.node.scale=this.startScale)},__decorate([i(cc.SpriteAtlas)],t.prototype,"atlas",void 0),__decorate([i(Number)],t.prototype,"startWidth",void 0),t=__decorate([a],t)}(cc.Component);n.default=r,cc._RF.pop()},{}],MyRoleDataManager:[function(e,t,n){"use strict";cc._RF.push(t,"e1165PMLJZN5YleNUzkSVcI","MyRoleDataManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Lib/LocalStorage"),a=e("./SDKManager"),i=e("../Config/Config"),r=e("./SoundManager"),l=e("../Lib/Secret"),s=e("../Lib/Global"),c=e("./TableManager"),d=e("./PanelManager"),u=e("./BallManager"),p=e("./EffectManager"),h=cc._decorator,f=h.ccclass,g=(h.property,function(){function e(){this.isFullScreen=!1,this.fringeNum=80,this.connonObject={},this.funnelObject={},this.propObject={},this.maxScore=0,this.dailyMaxScore=0,this.dailyMaxRefrehTime=0,this.lanuchMaxScore=0,this._Gold="0",this._Diamond="0",this._Chip="0",this.loginDays=0,this.lastLoginTime=0,this.nextFreeUpgrade=0,this.isUseFreeUpgrade=!1,this.chooseFreeUpgrade=-1,this.curLevel=0,this.isRate=!1,this.buyId="",this.specialConnon="",this.allGoldMore=1,this.isSlowAction=!1,this.timeScale=.2,this.curScore=0,this.gameState=0,this.curCannonID=0,this.curScenceID=0,this.curGold=0,this.curDiamond=0,this.curLevelTotalBall=0,this.hpLess=0,this.tempTimeBulletHit=0,this.isFromComplete=!1,this.isInMagnet=0,this.isInHit=0,this.doubleTime=9e5,this.sourceNum=5}var t;return t=e,e.prototype.getHitSpeed=function(e){void 0===e&&(e=null),e||(e=this.curCannonID);var t=c.default.instance.mapLevelTable.getCurLevelIndex(this.curLevel)+1,n=c.default.instance.connonTable.getDataById(e);t=Number(t>=n.max_level?n.max_level:t);var o=(Number(n.c_att_b)+Number(n.m_att_b))*t;return console.log("getHitSpeed: "+u.default.instance.ballBasisHp/o*2),u.default.instance.ballBasisHp/o*2},e.prototype.addTempBulletHit=function(e){return this.tempTimeBulletHit+=e,this.tempTimeBulletHit=this.tempTimeBulletHit<=0?0:this.tempTimeBulletHit,this.tempTimeBulletHit},e.prototype.getConnonInfo=function(e){if(void 0===e&&(e=null),e=e||this.curCannonID,0==t.instance.curLevel)return{mainGunLevel:12,extraGun:9,lifeLevel:1};var n=this.connonObject[e];return n||void 0},e.prototype.getConnonLevel=function(e,t){void 0===t&&(t=null),t=t||this.curCannonID;var n=this.connonObject[t];if(n)switch(e){case i.RoleAttribute.LifeLevel:return n.lifeLevel;case i.RoleAttribute.MainGunLevel:return n.mainGunLevel;case i.RoleAttribute.ExtraGun:return n.extraGun;default:return 1}return 1},e.prototype.isConnon=function(e){var t=c.default.instance.connonTable.table[0].id,n=c.default.instance.connonTable.table[c.default.instance.connonTable.table.length-1].id;return e>=t&&e<=n},e.prototype.getNewConnonInfo=function(e){return{mainGunLevel:1,extraGun:-1,lifeLevel:1}},e.prototype.startGame=function(){this.curGold=0,this.curDiamond=0,this.curScore=0,this.gameState=1,a.default.instance.callJava("trackLevel","(Ljava/lang/String;Ljava/lang/String;)V","StartGame",t.instance.curLevel.toString()),this.tempTimeBulletHit=0},e.prototype.addFunnel=function(e){this.funnelObject[e]?this.funnelObject[e].phase+=1:this.funnelObject[e]={level:1,phase:1},o.default.saveItem("funnelObject",JSON.stringify(this.funnelObject))},e.prototype.funnelLevelUp=function(e,t){void 0===t&&(t=1),this.funnelObject[e]&&(this.funnelObject[e].level+=t,o.default.saveItem("funnelObject",JSON.stringify(this.funnelObject)))},e.prototype.getFunnelInfo=function(e){return 0==t.instance.curLevel?{level:10,phase:2}:!!this.funnelObject[e]&&this.funnelObject[e]},e.prototype.getRandomFunnel=function(){if(0==t.instance.curLevel)return c.default.instance.aircraftTable.getRandomId();var e=Object.keys(this.funnelObject);return Number(s.default.arrRandom(e))},e.prototype.getPropLevel=function(e){return this.propObject[e]||(this.propObject[e]={level:1}),this.propObject[e].level},e.prototype.propLevelUp=function(e,t){void 0===t&&(t=1),this.propObject[e]||(this.propObject[e]={level:1}),this.propObject[e].level+=t,o.default.saveItem("propObject",JSON.stringify(this.propObject))},e.prototype.getRandomProp=function(){var e=Object.keys(this.propObject);return Number(s.default.arrRandom(e))},e.prototype.magnetProp=function(e){var t=this;this.isInMagnet++,setTimeout(function(){t.isInMagnet--,t.isInMagnet<=0&&(t.isInMagnet=0)},1e3*e)},e.prototype.hitProp=function(e){var n=this;this.isInHit++,setTimeout(function(){n.isInHit--,n.isInHit<=0&&(n.isInHit=0,t.instance.checkGameState([1])&&(d.default.game.playerScript.delEffect(p.EffectName.AddAtkEffect),d.default.game.playerScript.setShoot()))},1e3*e)},e.prototype.getTimeScale=function(){return this.isSlowAction?this.timeScale:1},e.prototype.getSourceNum=function(e){return 0==(e=Number(e))?0:(e-1)%this.sourceNum+1},Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),e.prototype.saveData=function(){o.default.saveItem("propObject",JSON.stringify(this.propObject)),o.default.saveItem("ConnonInfo",JSON.stringify(this.connonObject)),o.default.saveItem("funnelObject",JSON.stringify(this.funnelObject)),o.default.saveItem("Gold",this.Gold.toString()),o.default.saveItem("Diamond",this.Diamond.toString()),o.default.saveItem("Chip",this.Chip.toString()),o.default.saveItem("maxScore",this.maxScore.toString()),o.default.saveItem("dailyMaxScore",this.dailyMaxScore.toString()),o.default.saveItem("dailyMaxRefrehTime",this.dailyMaxRefrehTime.toString()),o.default.saveItem("curScenceID",this.curScenceID.toString()),o.default.saveItem("curCannonID",this.curCannonID.toString()),o.default.saveItem("nextFreeUpgrade",this.nextFreeUpgrade.toString()),o.default.saveItem("isUseFreeUpgrade",this.isUseFreeUpgrade.toString()),o.default.saveItem("chooseFreeUpgrade",this.chooseFreeUpgrade.toString()),o.default.saveItem("curLevel",this.curLevel.toString()),o.default.saveItem("isRate",this.isRate.toString()),o.default.saveItem("soundState",r.default.soundState.toString()),o.default.saveItem("backSoundState",r.default.backSoundState.toString()),o.default.saveItem("effectSoundState",r.default.effectSoundState.toString()),o.default.saveItem("buyId",this.buyId.toString()),o.default.saveItem("specialConnon",this.specialConnon.toString()),o.default.saveItem("allGoldMore",this.allGoldMore.toString())},e.prototype.loadData=function(){this.propObject=JSON.parse(o.default.getItem("propObject","{}")),this.connonObject=JSON.parse(o.default.getItem("ConnonInfo","{}")),this.funnelObject=JSON.parse(o.default.getItem("funnelObject","{}")),this.Gold=o.default.getItem("Gold","0"),this.Diamond=o.default.getItem("Diamond","0"),this.Chip=o.default.getItem("Chip","0"),this.maxScore=Number(o.default.getItem("maxScore","0")),this.curScenceID=Number(o.default.getItem("curScenceID","20000")),this.curCannonID=Number(o.default.getItem("curCannonID","30000")),this.nextFreeUpgrade=Number(o.default.getItem("nextFreeUpgrade","0")),this.isUseFreeUpgrade="true"==o.default.getItem("isUseFreeUpgrade","false"),this.chooseFreeUpgrade=Number(o.default.getItem("chooseFreeUpgrade","0")),this.curLevel=Number(o.default.getItem("curLevel","0")),this.isRate="true"==o.default.getItem("isRate","false"),r.default.soundState=Number(o.default.getItem("soundState","1")),r.default.backSoundState=Number(o.default.getItem("backSoundState","1")),r.default.effectSoundState=Number(o.default.getItem("effectSoundState","1")),this.buyId=o.default.getItem("buyId",""),this.specialConnon=o.default.getItem("specialConnon",""),this.allGoldMore=Number(o.default.getItem("allGoldMore","1")),this.dailyMaxScore=Number(o.default.getItem("dailyMaxScore","0")),this.dailyMaxRefrehTime=Number(o.default.getItem("dailyMaxRefrehTime","0")),s.default.getTime()>this.dailyMaxRefrehTime&&(this.dailyMaxScore=0,this.dailyMaxRefrehTime=s.default.getTomorrowTime())},e.prototype.startNewGame=function(){this.maxScore=0,this.curScenceID=2e4,this.curCannonID=301e3,this.curLevel=0,this.addConnon(301e3),this.Gold=10,this.saveData()},e.prototype.loginCheck=function(){var e=s.default.getTime();return this.lastLoginTime=Number(o.default.getItem("lastLoginTime","0")),this.loginDays=Number(o.default.getItem("loginDays","0")),e>this.lastLoginTime&&(this.loginDays+=1,this.lastLoginTime=s.default.getTomorrowTime(),o.default.saveItem("lastLoginTime",this.lastLoginTime.toString()),o.default.saveItem("loginDays",this.loginDays.toString())),!1},e.prototype.addConnon=function(e){this.connonObject[e]||(this.connonObject[e]=this.getNewConnonInfo(e),o.default.saveItem("ConnonInfo",JSON.stringify(this.connonObject)))},e.prototype.checkConnonUnlocked=function(e){return!!this.connonObject[e]},e.prototype.getConnonNum=function(){return Object.keys(this.connonObject).length},e.prototype.attributeLevelUp=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=1);var a=this.getConnonInfo(t);if(a){switch(e){case i.RoleAttribute.MainGunLevel:a.mainGunLevel=s.default.exactAdd([a.mainGunLevel,n]);break;case i.RoleAttribute.ExtraGun:a.extraGun=s.default.exactAdd([a.extraGun,n]);break;case i.RoleAttribute.LifeLevel:a.lifeLevel=s.default.exactAdd([a.lifeLevel,n])}o.default.saveItem("ConnonInfo",JSON.stringify(this.connonObject))}},e.prototype.getattributeLevel=function(e){var t=this.getConnonInfo(e);return s.default.accDiv(t.lifeLevel+t.mainGunLevel,2)},e.prototype.checkMallBuy=function(e){for(var t=this.buyId.split(";"),n=t.length,o=0;o<n;o++)if(Number(t[o])==Number(e))return!0;return!1},e.prototype.goldDropCount=function(e){var t=this.getPropLevel(303006),n=c.default.instance.workShopTable.getCount(303006,t);return console.log("\u6e38\u620f\u4e2d\u91d1\u5e01\u6389\u843d\u52a0\u6210\u8ba1\u7b97 "+(n+d.default.game.playerScript.goldMore)),e*=n+d.default.game.playerScript.goldMore,Math.ceil(e)},e.prototype.allGoldCount=function(e){return e*this.allGoldMore},e.prototype.checkGameState=function(e){for(var t=e.length,n=0;n<t;n++)if(this.gameState==e[n])return!0;return!1},e.prototype.currencuIsEnough=function(e,t){void 0===t&&(t=i.CurrencyType.Gold);var n=Number(e);if(isNaN(n))return cc.warn(t+"currencuIsEnough "+e+" is not number"),!1;switch(t){case i.CurrencyType.Gold:return this.Gold>=n;case i.CurrencyType.Diamond:return this.Diamond>=n;case i.CurrencyType.Chip:return this.Chip>=n}},e.prototype.dleCurrency=function(e,t){void 0===t&&(t=i.CurrencyType.Gold);var n=Number(e);if(isNaN(n))return cc.warn(t+"dleCurrency "+e+" is not number"),!1;if(!this.currencuIsEnough(n,t))return!1;switch(t){case i.CurrencyType.Gold:this.Gold-=n;break;case i.CurrencyType.Diamond:this.Diamond-=n;break;case i.CurrencyType.Chip:this.Chip-=n}return!0},e.prototype.addCurrency=function(e,t){void 0===t&&(t=i.CurrencyType.Gold);var n=Number(e);if(isNaN(n))return cc.warn(t+"addCurrency "+e+" is not number"),!1;switch(t){case i.CurrencyType.Gold:this.Gold=this.Gold+n;break;case i.CurrencyType.Diamond:this.Diamond=this.Diamond+n;break;case i.CurrencyType.Chip:this.Chip=this.Chip+n}return!0},Object.defineProperty(e.prototype,"Gold",{get:function(){var e=Number(l.default.uncompile(this._Gold));return isNaN(e)&&(e=this.Gold=Number(o.default.getItem("Gold","10")),isNaN(e)&&(e=this.Gold=10)),e},set:function(e){(e||0==e)&&(this._Gold=l.default.compile(Number(e)),o.default.saveItem("Gold",this.Gold.toString()))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Diamond",{get:function(){var e=Number(l.default.uncompile(this._Diamond));return isNaN(e)&&(e=this.Diamond=Number(o.default.getItem("Diamond","0")),isNaN(e)&&(e=this.Diamond=0)),e},set:function(e){(e||0==e)&&(this._Diamond=l.default.compile(Number(e)),o.default.saveItem("Diamond",this.Diamond.toString()))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Chip",{get:function(){var e=Number(l.default.uncompile(this._Chip));return isNaN(e)&&(e=this.Chip=Number(o.default.getItem("Chip","0")),isNaN(e)&&(e=this.Chip=0)),e},set:function(e){(e||0==e)&&(this._Chip=l.default.compile(Number(e)),o.default.saveItem("Chip",this.Chip.toString()))},enumerable:!0,configurable:!0}),e.prototype.refitCanUp=function(){for(var e=c.default.instance.connonTable.getDataById(t.instance.curCannonID),n=t.instance.getConnonLevel(i.RoleAttribute.ExtraGun,t.instance.curCannonID),o=t.instance.getConnonLevel(i.RoleAttribute.MainGunLevel,t.instance.curCannonID),a=[n,o,t.instance.getConnonLevel(i.RoleAttribute.LifeLevel,t.instance.curCannonID)],r=[i.RoleAttribute.ExtraGun,i.RoleAttribute.MainGunLevel,i.RoleAttribute.LifeLevel],l=a.length,s=0;s<l;s++){var d=a[s];if(this.currencuIsEnough(c.default.instance.connonTable.countUpgradeMoney(e,d,r[s]),i.CurrencyType.Gold)&&d-1<e.max_level&&-1!=d)return!0}return!(-1!=o||!this.currencuIsEnough(Number(e.gem_m),i.CurrencyType.Diamond))},e.prototype.workCanUp=function(){var e=c.default.instance.workShopTable.tableObj;for(var t in e){var n=e[t];if(n){var o=this.getPropLevel(n.id);if(this.currencuIsEnough(c.default.instance.workShopTable.getCountMoney(n.id,o),i.CurrencyType.Gold)&&this.curLevel>=n.unlock&&o<n.max_level)return!0}}return!1},e.prototype.aircraftCanUp=function(){if(this.currencuIsEnough(50,i.CurrencyType.Chip)&&c.default.instance.aircraftTable.getRondam())return!0;for(var e=c.default.instance.aircraftTable.table,n=e.length,o=0;o<n;o++){var a=e[o];if(a){var r=t.instance.getFunnelInfo(a.id);if(!r)continue;var l=r.phase*a.stage,s=c.default.instance.aircraftTable.countMoney(a.id,r.level);if(!t.instance.currencuIsEnough(s)||r.level-1>=l||r.level-1>=a.level_max)continue;return!0}}},e=t=__decorate([f],e)}());n.default=g,cc._RF.pop()},{"../Config/Config":"Config","../Lib/Global":"Global","../Lib/LocalStorage":"LocalStorage","../Lib/Secret":"Secret","./BallManager":"BallManager","./EffectManager":"EffectManager","./PanelManager":"PanelManager","./SDKManager":"SDKManager","./SoundManager":"SoundManager","./TableManager":"TableManager"}],NodePoolMananger:[function(e,t,n){"use strict";cc._RF.push(t,"829daYKPU5M5aN/kFFA6/+s","NodePoolMananger"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(){function e(){this.poolArr={},this.nodeArr={}}var t;return t=e,Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),e.prototype.addPool=function(e,t){if(void 0===t&&(t=""),!this.poolArr[e.name]){var n=new cc.NodePool(t);this.poolArr[e.name]=n,this.nodeArr[e.name]=e}},e.prototype.popWithCheckExist=function(e){var t=this.poolArr[e];if(!t)return null;var n=t.get();if(!n){var o=this.nodeArr[e];n=cc.instantiate(o)}return n.isInPool=!1,n},e.prototype.pop=function(e){var t=this.poolArr[e];if(t){var n=t.get();if(!n){var o=this.nodeArr[e];n=cc.instantiate(o)}return n.isInPool=!1,n}cc.warn(e+" \u6ca1\u6709\u6b64\u8282\u70b9\u7684\u5bf9\u8c61\u6c60\uff0c\u53ef\u80fd\u672a\u8c03\u7528addpool")},e.prototype.push=function(e){var t=e.name,n=this.poolArr[t];n&&!e.isInPool?(e.isInPool=!0,n.put(e)):n?cc.warn(t+"\u5bf9\u8c61\u5df2\u5728\u6c60\u4e2d\uff0c\u4e0d\u8981\u91cd\u590d\u56de\u6536"):cc.warn(t+"\u6ca1\u6709\u6b64\u8282\u70b9\u7684\u5bf9\u8c61\u6c60")},e.prototype.clear=function(e){for(var t in this.poolArr)if(e==t){var n=this.poolArr[t];n&&n.clear()}},e.prototype.clearAll=function(){for(var e in this.poolArr){var t=this.poolArr[e];t&&t.clear()}this.nodeArr={}},e=t=__decorate([a],e)}());n.default=i,cc._RF.pop()},{}],NormalLevelBtn:[function(e,t,n){"use strict";cc._RF.push(t,"1db09z/R2JCdpW+JpY/OZnB","NormalLevelBtn"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.unlockNode=null,t.levelLable=null,t.lockNode=null,t.isUnlock=!0,t.level=0,t}return __extends(t,e),t.prototype.init=function(e,t){this.isUnlock=e,this.unlockNode.active=this.isUnlock,this.level=t,this.levelLable.string=this.level+"",this.lockNode.active=!this.isUnlock},t.prototype.unlock=function(e){void 0===e&&(e=-1),this.isUnlock=!0,this.unlockNode.active=this.isUnlock,this.lockNode.active=!this.isUnlock,this.levelLable.string=-1==e?this.level+"":e+""},__decorate([i({type:cc.Node,tooltip:"\u5df2\u89e3\u9501\u8282\u70b9"})],t.prototype,"unlockNode",void 0),__decorate([i({type:cc.Label,tooltip:"\u5173\u5361lable"})],t.prototype,"levelLable",void 0),__decorate([i({type:cc.Node,tooltip:"\u672a\u89e3\u9501\u89e3\u9501\u8282\u70b9"})],t.prototype,"lockNode",void 0),t=__decorate([a],t)}(cc.Component);n.default=r,cc._RF.pop()},{}],PanelManager:[function(e,t,n){"use strict";cc._RF.push(t,"9954au2AzdK8L+u6KzOaPTP","PanelManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./LoadManager"),a=e("./SoundManager"),i=cc._decorator,r=i.ccclass,l=(i.property,function(){function e(){this.panelMap=new Map,this.openMap=new Map}var t;return t=e,Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),e.initPanel=function(e,t){switch(e){case this.PanelStr.gameui:this.gameUi=t;break;case this.PanelStr.game:this.game=t}},e.prototype.openPanel=function(e,t){void 0===t&&(t=null);for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];return __awaiter(this,void 0,void 0,function(){var o,i;return __generator(this,function(r){switch(r.label){case 0:return this.openMap.get(e)?[2]:(o=this.panelMap.get(e))?[3,2]:[4,this.loadPanel(e)];case 1:if(!(o=r.sent()))return cc.warn(e+" is not exist!"),[2];this.panelMap.set(e,o),r.label=2;case 2:return t&&!o.parent&&t.addChild(o),(i=o.getComponent(e)).openPanel.apply(i,n),a.default.playSoundEffect(a.default.uiOpen),this.openMap.set(e,i),[2,i]}})})},e.prototype.closePanel=function(e,t){void 0===t&&(t=!1);for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var i=this.openMap.get(e);if(i)return i.closePanel.apply(i,n),a.default.playSoundEffect(a.default.uiClose),this.openMap.delete(e),t&&this.panelMap.delete(e),i;cc.warn(e+" not opened!")},e.prototype.deleteOpen=function(e){this.openMap.delete(e)},e.prototype.closeAllPanel=function(){this.openMap.forEach(function(e){e.closePanel()}),this.openMap.clear()},e.prototype.checkPanelIsOpen=function(e){return this.openMap.has(e)},e.prototype.getExistPanel=function(e){var t=this.panelMap.get(e);return t||cc.warn(e+" not opened yet!"),t.getComponent(e)},e.prototype.runCurOpenPanelFun=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.openMap.forEach(function(n){n[e]&&n[e].apply(n,t)})},e.prototype.getPanel=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){switch(n.label){case 0:return(t=this.panelMap.get(e))?[3,2]:[4,this.loadPanel(e)];case 1:if(!(t=n.sent()))return cc.warn(e+" is not exist!"),[2];n.label=2;case 2:return[2,t]}})})},e.prototype.loadPanel=function(e){return __awaiter(this,void 0,Promise,function(){var t;return __generator(this,function(n){switch(n.label){case 0:return(t=o.default.instance.getRes("/prefab/"+e+"/"+e,cc.Prefab))?[3,2]:[4,o.default.instance.loadRes("/prefab/"+e+"/"+e,cc.Prefab)];case 1:t=n.sent(),n.label=2;case 2:return[2,cc.instantiate(t)]}})})},e.PanelStr={gameui:0,game:1,newscence:2,levelup:3},e=t=__decorate([r],e)}());n.default=l,cc._RF.pop()},{"./LoadManager":"LoadManager","./SoundManager":"SoundManager"}],PausePanel:[function(e,t,n){"use strict";cc._RF.push(t,"c77bf8EEIFGjocm/nJ0sVpd","PausePanel"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../code/manager/UiAniManager"),a=e("../../../code/manager/PanelManager"),i=e("../../../code/Config/Config"),r=e("../../../code/manager/MyRoleDataManager"),l=e("../MissionPanel/MissionItem"),s=e("../../../code/manager/MissionManger"),c=e("../../../code/manager/SoundManager"),d=e("../../../code/basecode/BasePanel"),u=cc._decorator,p=u.ccclass,h=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.backNode=null,t.missionArr=[],t._aniType=o.UiAniType.AlphaChange,t}return __extends(t,e),t.prototype.openPanel=function(){this.playUIAni(o.InOrOut.IN),c.default.setvolumeNum(.5),s.default.instance.curSpecilMission.isCompleteAll?this.missionArr[0].active=!1:this.missionArr[0].getComponent(l.default).init(s.default.instance.curSpecilMission);for(var e=1,t=this.missionArr.length;e<t;e++)this.missionArr[e].getComponent(l.default).init(s.default.instance.curMission[e-1]);this.addEvent()},t.prototype.closePanel=function(){this.playUIAni(o.InOrOut.OUT)},t.prototype.panelIn=function(){},t.prototype.panelOut=function(){this.panelAni.currentClip.name==this.aniType+"Out"&&(c.default.setvolumeNum(1),a.default.game.isInPaused=!1,this.dleEvent(),a.default.instance.deleteOpen(i.PanelName.PausePanel),this.node.removeFromParent())},t.prototype.addEvent=function(){},t.prototype.dleEvent=function(){this.panelAni.off(cc.Animation.EventType.STOP,this.panelOut,this)},t.prototype.touchStart=function(){this.panelAni.stop(),this.panelAni.play(this.aniType+"Out"),this.panelAni.on(cc.Animation.EventType.STOP,this.panelOut,this)},t.prototype.touchEnd=function(){r.default.instance.gameState=4,this.panelAni.off(cc.Animation.EventType.STOP,this.panelOut,this),this.panelAni.stop();var e=this.node.opacity;this.panelAni.play(this.aniType+"In",e/255*.15)},__decorate([h({type:cc.Node,tooltip:"\u80cc\u666f\u906e\u7f69\u8282\u70b9"})],t.prototype,"backNode",void 0),__decorate([h({type:[cc.Node],tooltip:"\u80cc\u666f\u906e\u7f69\u8282\u70b9"})],t.prototype,"missionArr",void 0),t=__decorate([p],t)}(d.default);n.default=f,cc._RF.pop()},{"../../../code/Config/Config":"Config","../../../code/basecode/BasePanel":"BasePanel","../../../code/manager/MissionManger":"MissionManger","../../../code/manager/MyRoleDataManager":"MyRoleDataManager","../../../code/manager/PanelManager":"PanelManager","../../../code/manager/SoundManager":"SoundManager","../../../code/manager/UiAniManager":"UiAniManager","../MissionPanel/MissionItem":"MissionItem"}],PropPrefab:[function(e,t,n){"use strict";cc._RF.push(t,"97460chOsRFT7w2Gi3FiQiU","PropPrefab"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../code/Lib/Global"),a=e("../../code/manager/NodePoolMananger"),i=e("../../code/manager/TableManager"),r=e("../../code/manager/MyRoleDataManager"),l=e("../../code/manager/PanelManager"),s=e("../../code/manager/SoundManager"),c=e("../../code/manager/MissionManger"),d=e("../../code/manager/EffectManager"),u=cc._decorator,p=u.ccclass,h=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.propIcon=null,t.propId=1,t.notUpdata=!1,t.isBackToPool=!1,t.ySpeed=14,t.moveToPlayer=!1,t.wallTimes=1,t}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.update=function(){r.default.instance.checkGameState([2,3,4,6,7])||this.notUpdata||this.isBackToPool&&!this.moveToPlayer||(this.curSpeed&&this.aSpeed&&(this.curSpeed=this.curSpeed.subSelf(this.aSpeed)),this.curSpeed&&(this.node.position=this.node.position.subSelf(this.curSpeed.mul(r.default.instance.getTimeScale()))),this.speedChange())},t.prototype.speedChange=function(){if(this.isBackToPool){if(this.moveToPlayer){t=this.node.position,n=l.default.game.Player;var e=t.sub(n.position);this.node.position=t.sub(e.normalizeSelf().mul(30*r.default.instance.getTimeScale())),Math.abs(n.x-t.x)<=.5*n.width&&Math.abs(n.y-t.y)<=.4*n.height&&(this.moveToPlayer=!1,this.contactEffect())}}else{var t=this.node.position,n=l.default.game.Player;Math.abs(n.x-t.x)<=.5*n.width&&Math.abs(n.y-t.y)<=.4*n.height?(this.aSpeed=cc.v2(0,0),this.curSpeed=cc.v2(0,0),this.isBackToPool=!0,this.contactEffect()):r.default.instance.isInMagnet>0&&Math.abs(n.x-t.x)<=300&&Math.abs(n.y-t.y)<=300?(this.aSpeed=cc.v2(0,0),this.curSpeed=cc.v2(0,0),this.isBackToPool=!0,this.moveToPlayer=!0):t.x<=.5*this.node.width&&this.curSpeed.x>0&&this.wallTimes>0?(this.wallTimes--,this.curSpeed.x=-1*this.curSpeed.x,this.aSpeed.x=-1*this.aSpeed.x):t.x>=750-.5*this.node.width&&this.curSpeed.x<0&&this.wallTimes>0?(this.wallTimes--,this.curSpeed.x=-1*this.curSpeed.x,this.aSpeed.x=-1*this.aSpeed.x):(t.x<=0-this.node.width||t.x>=750+this.node.width)&&this.wallTimes<=0?(this.curSpeed.x=0,this.aSpeed.x=0,this.remove()):this.node.y<=441+.5*this.node.width&&this.curSpeed.y>0&&(this.curSpeed.y=-1*this.ySpeed,this.curSpeed.x=1*this.curSpeed.x,(this.curSpeed.x>0&&this.aSpeed.x<0||this.curSpeed.x<0&&this.aSpeed.x>0||Math.abs(this.curSpeed.y)<=1)&&(this.aSpeed=cc.v2(0,0),this.curSpeed=cc.v2(0,0)))}},t.prototype.init=function(e){this.propId=e,this.notUpdata=!1,this.isBackToPool=!1,this.wallTimes=1,this.node.scale=1,this.setIcon(),this.propId>=5e5&&this.propId<=500004?this.propIcon.node.scale=1:this.propIcon.node.scale=.6},t.prototype.remove=function(){this.node.removeFromParent(),a.default.instance.push(this.node)},t.prototype.toTop=function(){var e=o.default.random();e=this.node.x<375?-1:1,this.curSpeed=cc.v2((1.5*Math.random()+2)*e,o.default.Random(-5,-10)),this.aSpeed=cc.v2(0,-.3)},t.prototype.setIcon=function(){this.propIcon.spriteFrame=l.default.gameUi.iconAtlas.getSpriteFrame(i.default.instance.propTable.getIcon(this.propId))},t.prototype.contactEffect=function(){switch(console.log("propId "+this.propId),this.propId){case 5e5:break;case 500001:this.remove(),s.default.playSoundEffect(s.default.getMagnet);var e=r.default.instance.getPropLevel(303003),t=i.default.instance.workShopTable.getCount(303003,e);r.default.instance.magnetProp(5+5*t);break;case 500002:this.remove(),s.default.playSoundEffect(s.default.getHp);e=r.default.instance.getPropLevel(303004),t=i.default.instance.workShopTable.getCount(303004,e);l.default.game.playerScript.reLife(t),d.default.instance.playEffect(d.EffectName.AddHpEffect,l.default.game.Player,cc.v2(0,0));break;case 500003:this.remove(),s.default.playSoundEffect(s.default.getAttack);e=r.default.instance.getPropLevel(303005),t=i.default.instance.workShopTable.getCount(303005,e);r.default.instance.hitProp(5+5*t),l.default.game.playerScript.addEffect(d.EffectName.AddAtkEffect),r.default.instance.checkGameState([1])&&l.default.game.playerScript.setShoot();break;case 500004:this.remove(),s.default.playSoundEffect(s.default.getRD),c.default.instance.collectMissionNum(8,1);var n=r.default.instance.getRandomFunnel();l.default.game.playerScript.getFunnel(n);break;case 501e3:case 501001:case 501002:case 501003:case 501004:case 501005:s.default.playSoundEffect(s.default.getMissionItem),c.default.instance.collectSpecialProp(this.propId,1),l.default.gameUi.movePropToLable(this.node)}},t.prototype.randomSpecialProp=function(){i.default.instance.workShopTable.getRandomSpecial()},__decorate([h(cc.Sprite)],t.prototype,"propIcon",void 0),t=__decorate([p],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../../code/Lib/Global":"Global","../../code/manager/EffectManager":"EffectManager","../../code/manager/MissionManger":"MissionManger","../../code/manager/MyRoleDataManager":"MyRoleDataManager","../../code/manager/NodePoolMananger":"NodePoolMananger","../../code/manager/PanelManager":"PanelManager","../../code/manager/SoundManager":"SoundManager","../../code/manager/TableManager":"TableManager"}],PropTable:[function(e,t,n){"use strict";cc._RF.push(t,"9b06bOlYctInozs88vmOEax","PropTable"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../code/manager/MyRoleDataManager"),a=e("../../code/Lib/Global"),i=function(){function e(e){this.table=e}return e.prototype.getRondamProp=function(e){for(var t=[],n=this.table.length,i=0;i<n;i++){var r=this.table[i];r&&r.type==e&&(4!=r.small_type&&0!=r.small_type?t.push(Number(r.id)):4==r.small_type&&Object.keys(o.default.instance.funnelObject).length>0?t.push(Number(r.id)):0==r.small_type&&o.default.instance.curLevel>10&&t.push(Number(r.id)))}return Number(a.default.arrRandom(t))},e.prototype.getInfo=function(e){for(var t=0;t<this.table.length;t++){var n=this.table[t];if(n&&Number(n.id)==e)return n}return cc.warn("PropTable getInfo: Do not have id "+e),""},e.prototype.getName=function(e){for(var t=0;t<this.table.length;t++){var n=this.table[t];if(n&&Number(n.id)==e)return n.name}return cc.warn("PropTable getName: Do not have id "+e),""},e.prototype.getDes=function(e){for(var t=0;t<this.table.length;t++){var n=this.table[t];if(n&&Number(n.id)==e)return n.des}return cc.warn("PropTable getDex: Do not have id "+e),{}},e.prototype.getIcon=function(e){for(var t=0;t<this.table.length;t++){var n=this.table[t];if(n&&Number(n.id)==e)return n.icon}return cc.warn("PropTable getIcon: Do not have id "+e),"item_500000"},e}();n.default=i,cc._RF.pop()},{"../../code/Lib/Global":"Global","../../code/manager/MyRoleDataManager":"MyRoleDataManager"}],QuadTree:[function(e,t,n){"use strict";cc._RF.push(t,"b0aa3L9qLVPFZpuq4fnqE2f","QuadTree"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){this.maxObjects=4,this.bounds={x:0,y:0,width:0,height:0},this.objects=[],this.nodes=[],this.level=0,this.maxLevels=7,this.bounds=e,this.level=t}return e.prototype.findObjects=function(e,t){if(!t||!t.node)return e;0!=t.node.width&&0!=t.node.height||console.log(t.node.name,t.node);var n=this.getMoreIndex(t);this.nodes;if(1!=n&&2!=n&&3!=n&&0!=n||!this.nodes.length){if(this.nodes.length){var o=this.carve(t.node,n);this.getMoreIndex(t);for(var a=o.length-1;a>=0;a--)this.findObjects(e,{node:o[a]})}}else this.nodes[n].findObjects(e,t);return e.push(this.objects),e},e.prototype.updateObjects=function(e){var t,n,o,a=this.objects;for(e=e||this,n=a.length-1;n>=0;n--)a[n].destroy?a.splice(n,1):-1===(t=this.getIndex(a[n]))?this!==e&&e.insert(a.splice(n,1)[0]):this.nodes.length&&this.nodes[t].insert(a.splice(n,1)[0]);for(n=0,o=this.nodes.length;n<o;n++)this.nodes[n].refresh(e)},e.prototype.getAllObjects=function(e){for(var t=0;t<this.nodes.length;t++)e=this.nodes[t].getAllObjects(e);t=0;for(var n=this.objects.length;t<n;t++)e.push(this.objects[t]);return e},e.prototype.clear=function(){this.objects=[];for(var e=0;e<this.nodes.length;e++)this.nodes[e].clear();this.nodes=[],0==this.level&&this.splite()},e.prototype.insert=function(e,t){if(void 0===t&&(t=1),e)if(e instanceof Array)for(var n=0,o=e.length;n<o;n++)this.insert(e[n]);else if(e instanceof Object&&0==t)for(var a in e)this.insert(e[a]);else{if(this.nodes.length){if(-2==(r=this.getIndex(e)))return;if(-1!=r)return void this.nodes[r].insert(e)}var i=this.objects;if(this.objects.push(e),i.length>this.maxObjects&&this.level<this.maxLevels){null==this.nodes[0]&&this.splite();for(n=0;n<i.length;){var r;if(-2==(r=this.getIndex(i[n])))return;-1!=r&&-2!=r?this.nodes[r].insert(i.splice(n,1)[0]):n++}}}},e.prototype.getIndex=function(e){if(!e||!e.node)return-2;var t=e.node,n=-1,o=this.bounds.x+this.bounds.width/2,a=this.bounds.y+this.bounds.height/2,i=t.y<a&&t.y+t.height*(1-t.anchorY)<a,r=t.y>a&&t.y-t.height*(1+t.anchorY)>a;return t.x<o&&t.x+.5*t.width<o?i?n=1:r&&(n=2):t.x>o&&t.x-.5*t.width>o&&(i?n=0:r&&(n=3)),n},e.prototype.getMoreIndex=function(e){if(!e||!e.node)return-2;var t=e.node,n=-1,o=this.bounds.x+this.bounds.width/2,a=this.bounds.y+this.bounds.height/2,i=t.y<=a&&t.y+t.height*t.anchorY<=a,r=t.y>=a&&t.y-t.height*t.anchorY>=a;return t.x<=o&&t.x+.5*t.width<=o?(n=5,i?n=1:r&&(n=2)):t.x>=o&&t.x-.5*t.width>=o&&(n=7,i?n=0:r&&(n=3)),-1==n&&(i?n=4:r&&(n=6)),n},e.prototype.splite=function(){var t=this.bounds.width/2|0,n=this.bounds.height/2|0;this.nodes[0]=new e({x:this.bounds.x+t,y:this.bounds.y,width:t,height:n},this.level+1),this.nodes[1]=new e({x:this.bounds.x,y:this.bounds.y,width:t,height:n},this.level+1),this.nodes[2]=new e({x:this.bounds.x,y:this.bounds.y+n,width:t,height:n},this.level+1),this.nodes[3]=new e({x:this.bounds.x+t,y:this.bounds.y+n,width:t,height:n},this.level+1)},e.prototype.carve=function(e,t){var n=this.bounds.x+this.bounds.width/2,o=this.bounds.y+this.bounds.height/2,a=[],i=e.y-o+.5*e.height,r=o-e.y+.5*e.height,l=e.x-n+.5*e.width,s=n-e.x+.5*e.width;if(5==t||7==t){var c={name:e.name,height:i,width:e.width,x:e.x,y:o+.5*i,anchorY:.5,anchorX:.5},d={name:e.name,height:r,width:e.width,x:e.x,y:o-.5*r,anchorY:.5,anchorX:.5};a.push(c),a.push(d)}else if(4==t||6==t){var u={name:e.name,height:e.height,width:l,x:n+.5*l,y:e.y,anchorY:.5,anchorX:.5},p={name:e.name,height:e.height,width:s,x:n-.5*s,y:e.y,anchorY:.5,anchorX:.5};a.push(u),a.push(p)}else if(-1==t){var h={name:e.name,height:i,width:s,x:n-.5*s,y:o+.5*i,anchorY:.5,anchorX:.5},f={name:e.name,height:i,width:l,x:n+.5*l,y:o+.5*i,anchorY:.5,anchorX:.5},g={name:e.name,height:r,width:s,x:n-.5*s,y:o-.5*r,anchorY:.5,anchorX:.5},m={name:e.name,height:r,width:l,x:n+.5*l,y:o-.5*r,anchorY:.5,anchorX:.5};a.push(h),a.push(f),a.push(g),a.push(m)}for(var y=a.length,b=0;b<y;b++)(a[b].width<=0||a[b].height<=0)&&console.log(a[b].name,a[b]);return a},e}();n.default=o,cc._RF.pop()},{}],RefitItem:[function(e,t,n){"use strict";cc._RF.push(t,"43711dHWzNFBZ9avnhsl/YA","RefitItem"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../code/manager/MyRoleDataManager"),a=e("../../../code/manager/PanelManager"),i=e("../../../code/Config/Config"),r=e("../../../code/Lib/Global"),l=e("../../../code/manager/TableManager"),s=e("../../../code/manager/SoundManager"),c=e("../../../code/manager/EffectManager"),d=e("../LatticeProgress"),u=e("../../../code/manager/SDKManager"),p=cc._decorator,h=p.ccclass,f=p.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.infoBtn=null,t.levelUpBtn=null,t.pro=null,t.nameLable=null,t.goldLable=null,t.goldLableShadow=null,t.lockBtn=null,t.lockBtnLable=null,t.lockBtnLableShadow=null,t.levelNode=null,t.lockNode=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.levelUpBtn.node.on("click",this.levelUpTap,this),this.infoBtn.node.on("click",this.infoBtnTap,this),this.lockBtn.node.on("click",this.lockBtnTap,this),this.levelUpBtn.enableAutoGrayEffect=!0},t.prototype.init=function(e,t){this.type=t,this.connonId=e,this.setLable(),this.updateInfo()},t.prototype.updateInfo=function(){var e=l.default.instance.connonTable.getDataById(this.connonId),t=o.default.instance.getConnonLevel(this.type,this.connonId);this.isUnlock=!(-1==t),this.lockNode.active=!this.isUnlock,this.levelNode.active=this.isUnlock,this.isUnlock?(this.pro.getComponent(d.default).pro=t-1,this.upgradeMoney=l.default.instance.connonTable.countUpgradeMoney(e,t,this.type),this.goldLableShadow.string=this.goldLable.string=r.default.setNum(this.upgradeMoney),t-1>=e.max_level?this.levelUpBtn.enabled=!1:this.levelUpBtn.enabled=!0):this.unlockMoney=this.lockBtnLableShadow.string=this.lockBtnLable.string=e.gem_m},t.prototype.levelUpTap=function(){o.default.instance.dleCurrency(this.upgradeMoney)?(this.playSound(),a.default.gameUi.updataGold(),o.default.instance.attributeLevelUp(this.type,this.connonId),a.default.instance.getExistPanel(i.PanelName.RefitShopPanel).updateLevelItem()):a.default.instance.openPanel(i.PanelName.GoShopPanel,a.default.gameUi.middleNode)},t.prototype.setLable=function(){var e="";this.type==i.RoleAttribute.MainGunLevel?e="10075":this.type==i.RoleAttribute.ExtraGun?e="10076":this.type==i.RoleAttribute.LifeLevel&&(e="10074"),this.nameLable.string=GlobalFun.i18n.t("lable."+e)},t.prototype.infoBtnTap=function(){},t.prototype.lockBtnTap=function(){var e=this;o.default.instance.dleCurrency(this.unlockMoney,i.CurrencyType.Diamond)?(u.default.instance.callJava("trackEventWithType","(Ljava/lang/String;Ljava/lang/String;I)V","UnlockSubConnon",this.connonId.toString(),1),s.default.playSoundEffect(r.default.arrRandom(s.default.upgradeWorkShop)),o.default.instance.attributeLevelUp(this.type,this.connonId,2),c.default.instance.playEffect(c.EffectName.SubGunUnlockEffect,this.node,cc.v2(0,0)),this.scheduleOnce(function(){e.updateInfo(),a.default.instance.getExistPanel(i.PanelName.RefitShopPanel).updateConnonShow()},.1)):a.default.instance.openPanel(i.PanelName.GoShopPanel,a.default.gameUi.middleNode)},t.prototype.playSound=function(){this.type==i.RoleAttribute.MainGunLevel?s.default.playSoundEffect(s.default.upgradeMGun):this.type==i.RoleAttribute.ExtraGun?s.default.playSoundEffect(s.default.upgradeSGun):this.type==i.RoleAttribute.LifeLevel&&s.default.playSoundEffect(s.default.upgradeHp)},__decorate([f({type:cc.Button,tooltip:"\u95ee\u53f7\u6309\u94ae"})],t.prototype,"infoBtn",void 0),__decorate([f({type:cc.Button,tooltip:"\u5347\u7ea7\u6309\u94ae"})],t.prototype,"levelUpBtn",void 0),__decorate([f({type:cc.Node,tooltip:"\u5347\u7ea7\u8fdb\u5ea6"})],t.prototype,"pro",void 0),__decorate([f({type:cc.Label,tooltip:"\u540d\u5b57\u6587\u672c"})],t.prototype,"nameLable",void 0),__decorate([f({type:cc.Label,tooltip:"\u5347\u7ea7\u94b1\u6587\u672c"})],t.prototype,"goldLable",void 0),__decorate([f({type:cc.Label,tooltip:"\u5347\u7ea7\u94b1\u6587\u672c"})],t.prototype,"goldLableShadow",void 0),__decorate([f({type:cc.Button,tooltip:"\u89e3\u9501\u6309\u94ae"})],t.prototype,"lockBtn",void 0),__decorate([f({type:cc.Label,tooltip:"\u89e3\u9501\u6309\u94aeLable"})],t.prototype,"lockBtnLable",void 0),__decorate([f({type:cc.Label,tooltip:"\u89e3\u9501\u6309\u94aeLable"})],t.prototype,"lockBtnLableShadow",void 0),__decorate([f({type:cc.Node,tooltip:"\u5347\u7ea7\u90e8\u5206"})],t.prototype,"levelNode",void 0),__decorate([f({type:cc.Node,tooltip:"\u89e3\u9501\u90e8\u5206"})],t.prototype,"lockNode",void 0),t=__decorate([h],t)}(cc.Component);n.default=g,cc._RF.pop()},{"../../../code/Config/Config":"Config","../../../code/Lib/Global":"Global","../../../code/manager/EffectManager":"EffectManager","../../../code/manager/MyRoleDataManager":"MyRoleDataManager","../../../code/manager/PanelManager":"PanelManager","../../../code/manager/SDKManager":"SDKManager","../../../code/manager/SoundManager":"SoundManager","../../../code/manager/TableManager":"TableManager","../LatticeProgress":"LatticeProgress"}],RefitShopPanel:[function(e,t,n){"use strict";cc._RF.push(t,"16427bI/DNGt5pIDDeLodlO","RefitShopPanel"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../code/manager/UiAniManager"),a=e("../../../code/manager/MyRoleDataManager"),i=e("./RefitItem"),r=e("../../../code/manager/TableManager"),l=e("../../../code/manager/SoundManager"),s=e("../../../code/Config/Config"),c=e("../../../code/manager/PanelManager"),d=e("../../../code/basecode/BasePanel"),u=e("../../../code/manager/GuideManager"),p=e("../../../code/Lib/Global"),h=e("../../../code/manager/SDKManager"),f=e("../../../code/Lib/LocalStorage"),g=cc._decorator,m=g.ccclass,y=g.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nameNode=null,t.nameLable=null,t.connonName=null,t.talkLable=null,t.okLable=null,t.okshadowLable=null,t.infoLableArr=[],t.mapNameLable=null,t.diamondLable=null,t.okBtn=null,t.levelupGroup=null,t.unlockGroup=null,t.itemNodeArr=[],t.leftBtn=null,t.rightBtn=null,t.connonPage=null,t.spriteAtlas=null,t.connonShowPrefab=null,t.unlockBtn=null,t.unlockInfoNode=null,t.unlockLable=null,t.unlockLableShadow=null,t.infoNode=null,t._aniType=o.UiAniType.RefitShopPanelPanel,t.unlockDiamond=0,t.isInit=!1,t}return __extends(t,e),t.prototype.init=function(){if(!this.isInit){this.isInit=!0;for(var e=r.default.instance.connonTable.table,t=0;t<e.length;t++){var n=e[t];if(n){var o=a.default.instance.getConnonInfo(n.id),i=this.spriteAtlas.getSpriteFrame(n.image_cannon+(o?a.default.instance.getSourceNum(o.mainGunLevel-1):"0")),l=this.spriteAtlas.getSpriteFrame(n.image_basis+"0"),s=this.spriteAtlas.getSpriteFrame(n.image_machine+(o&&-1!=o.extraGun?a.default.instance.getSourceNum(o.mainGunLevel-1):"0")),c=cc.instantiate(this.connonShowPrefab);c.getChildByName("connon").getComponent(cc.Sprite).spriteFrame=i,c.getChildByName("wheel").getComponent(cc.Sprite).spriteFrame=l,c.getChildByName("sub").getComponent(cc.Sprite).spriteFrame=s,this.connonPage.addPage(c)}}}},t.prototype.openPanel=function(){this.addEvent(),this.playUIAni(o.InOrOut.IN),this.getComponent(cc.Widget).updateAlignment(),this.inAction(),this.chooseConnonID=a.default.instance.curCannonID},t.prototype.closePanel=function(){l.default.playSoundEffect(l.default.btnSound),c.default.gameUi.btnTishi(),c.default.game.playerScript.setConnonSkin(a.default.instance.curCannonID),f.default.saveItem("curCannonID",a.default.instance.curCannonID.toString()),this.outAction(),this.dleEvent(),this.playUIAni(o.InOrOut.OUT)},t.prototype.panelIn=function(){this.connonPage.node.active=!0,this.infoNode.active=!0,this.init(),u.default.instance.checkCanGuide(10001,1)&&u.default.instance.startGuide(10001),this.connonPage.setCurrentPageIndex(this.chooseConnonID-301e3),this.setLable()},t.prototype.panelOut=function(){this.infoNode.active=!1,this.connonPage.node.active=!1,this.node.removeFromParent(),c.default.instance.deleteOpen(s.PanelName.RefitShopPanel)},t.prototype.addEvent=function(){this.okBtn.node.on("click",this.okBtnTap,this),this.leftBtn.node.on("click",this.leftTap,this),this.rightBtn.node.on("click",this.rightTap,this),this.unlockBtn.node.on("click",this.unlockBtnTap,this),this.connonPage.node.on("scroll-ended",this.moveEnd,this)},t.prototype.dleEvent=function(){this.okBtn.node.off("click",this.okBtnTap,this),this.leftBtn.node.off("click",this.leftTap,this),this.rightBtn.node.off("click",this.rightTap,this),this.unlockBtn.node.off("click",this.unlockBtnTap,this),this.connonPage.node.off("scroll-ended",this.moveEnd,this)},t.prototype.setLable=function(){this.unlockCheck(),this.nameLable.string=GlobalFun.i18n.t("lable.10042"),this.okLable.string=GlobalFun.i18n.t("lable.10009"),this.okshadowLable.string=GlobalFun.i18n.t("lable.10009"),this.infoLableArr[0].string=GlobalFun.i18n.t("lable.10077"),this.infoLableArr[1].string=GlobalFun.i18n.t("lable.10078"),this.infoLableArr[2].string=GlobalFun.i18n.t("lable.10079"),this.infoLableArr[3].string=GlobalFun.i18n.t("lable.10078"),this.talkLable.string=GlobalFun.i18n.t("lable.10043");for(var e=this.itemNodeArr.length,t=0;t<e;t++)this.itemNodeArr[t].getComponent(i.default).setLable()},t.prototype.unlockCheck=function(){var e=r.default.instance.connonTable.getDataById(this.chooseConnonID),t=GlobalFun.i18n.t("lable."+e.name);this.connonName.string=t,a.default.instance.checkConnonUnlocked(this.chooseConnonID)?(a.default.instance.curCannonID=this.chooseConnonID,this.levelupGroup.active=!0,this.unlockGroup.active=!1,this.updateLevelItem()):(this.levelupGroup.active=!1,this.unlockGroup.active=!0,this.unlockDiamond=Number(e.gem_c),this.canUnlock(e)?(this.unlockLable.string=this.unlockLableShadow.string=e.gem_c,this.unlockBtn.node.active=!0,this.unlockInfoNode.active=!1):(this.unlockBtn.node.active=!1,this.unlockInfoNode.active=!0,this.mapNameLable.string=GlobalFun.i18n.t("lable."+(this.chooseConnonID-301e3+10011)),this.diamondLable.string=e.gem_c))},t.prototype.canUnlock=function(e){return!!(r.default.instance.mapLevelTable.getCurChapterId(a.default.instance.curLevel)>=Number(e.map)&&a.default.instance.currencuIsEnough(Number(e.gem_c),s.CurrencyType.Diamond))},t.prototype.updateTalkLable=function(e){this.talkLable.string=e},t.prototype.updateLevelItem=function(){this.itemNodeArr[0].getComponent(i.default).init(this.chooseConnonID,s.RoleAttribute.LifeLevel),this.itemNodeArr[1].getComponent(i.default).init(this.chooseConnonID,s.RoleAttribute.MainGunLevel),this.itemNodeArr[2].getComponent(i.default).init(this.chooseConnonID,s.RoleAttribute.ExtraGun),this.updateConnonShow()},t.prototype.leftTap=function(){l.default.playSoundEffect(l.default.connonToLeft);var e=this.connonPage.getCurrentPageIndex();0!=e&&this.connonPage.setCurrentPageIndex(e-1)},t.prototype.rightTap=function(){l.default.playSoundEffect(l.default.connonToRight);var e=this.connonPage.content.children.length,t=this.connonPage.getCurrentPageIndex();t!=e-1&&this.connonPage.setCurrentPageIndex(t+1)},t.prototype.unlockBtnTap=function(){a.default.instance.dleCurrency(this.unlockDiamond,s.CurrencyType.Diamond)&&(h.default.instance.callJava("trackEventWithType","(Ljava/lang/String;Ljava/lang/String;I)V","UnlockConnon",this.chooseConnonID.toString(),1),l.default.playSoundEffect(p.default.arrRandom(l.default.upgradeWorkShop)),c.default.gameUi.updataGold(),a.default.instance.addConnon(this.chooseConnonID),this.unlockCheck())},t.prototype.updateConnonShow=function(){var e=r.default.instance.connonTable.getDataById(this.chooseConnonID),t=this.connonPage.getCurrentPageIndex(),n=this.connonPage.getPages(),o=a.default.instance.getConnonInfo(e.id),i=this.spriteAtlas.getSpriteFrame(e.image_cannon+(o?a.default.instance.getSourceNum(o.mainGunLevel-1):"0")),l=this.spriteAtlas.getSpriteFrame(e.image_basis+"0"),s=(o&&-1!=o.extraGun&&a.default.instance.getSourceNum(o.extraGun-1),this.spriteAtlas.getSpriteFrame(e.image_machine+(o&&-1!=o.extraGun?a.default.instance.getSourceNum(o.extraGun-1):"0"))),c=n[t];c.getChildByName("connon").getComponent(cc.Sprite).spriteFrame=i,c.getChildByName("wheel").getComponent(cc.Sprite).spriteFrame=l,c.getChildByName("sub").getComponent(cc.Sprite).spriteFrame=s},t.prototype.moveEnd=function(){this.chooseConnonID=this.connonPage.getCurrentPageIndex()+301e3,this.unlockCheck()},t.prototype.okBtnTap=function(){c.default.instance.closePanel(s.PanelName.RefitShopPanel)},t.prototype.inAction=function(){this.okBtn.node.runAction(cc.moveTo(.15,cc.v2(0,.25*(cc.Canvas.instance.designResolution.height-this.node.height)-627))),this.nameNode.runAction(cc.moveTo(.15,cc.v2(0,566-.25*(cc.Canvas.instance.designResolution.height-this.node.height))))},t.prototype.outAction=function(){this.okBtn.node.runAction(cc.moveTo(.15,cc.v2(0,-935))),this.nameNode.runAction(cc.moveTo(.15,cc.v2(0,1005)))},__decorate([y({type:cc.Node,tooltip:"\u724c\u5b50"})],t.prototype,"nameNode",void 0),__decorate([y({type:cc.Label,tooltip:"\u9762\u677f\u540d\u5b57"})],t.prototype,"nameLable",void 0),__decorate([y({type:cc.Label,tooltip:"\u70ae\u540d\u5b57"})],t.prototype,"connonName",void 0),__decorate([y({type:cc.Label,tooltip:"\u804a\u5929\u6587\u672c"})],t.prototype,"talkLable",void 0),__decorate([y({type:cc.Label,tooltip:"ok\u6309\u94ae\u6587\u672c"})],t.prototype,"okLable",void 0),__decorate([y({type:cc.Label,tooltip:"ok\u6309\u94ae\u6587\u672c\u9634\u5f71"})],t.prototype,"okshadowLable",void 0),__decorate([y({type:[cc.Label],tooltip:"\u89e3\u9501\u4fe1\u606f\u6587\u672c"})],t.prototype,"infoLableArr",void 0),__decorate([y({type:cc.Label,tooltip:"\u5730\u56fe\u540d\u5b57\u6587\u672c"})],t.prototype,"mapNameLable",void 0),__decorate([y({type:cc.Label,tooltip:"\u94bb\u77f3\u6570\u91cf\u6587\u672c"})],t.prototype,"diamondLable",void 0),__decorate([y({type:cc.Button,tooltip:"OK\u6309\u94ae"})],t.prototype,"okBtn",void 0),__decorate([y({type:cc.Node,tooltip:"\u5347\u7ea7\u90e8\u5206"})],t.prototype,"levelupGroup",void 0),__decorate([y({type:cc.Node,tooltip:"\u89e3\u9501\u90e8\u5206"})],t.prototype,"unlockGroup",void 0),__decorate([y({type:[cc.Node],tooltip:"\u5347\u7ea7\u6570\u7ec4"})],t.prototype,"itemNodeArr",void 0),__decorate([y({type:cc.Button,tooltip:"\u5de6\u79fb\u6309\u94ae"})],t.prototype,"leftBtn",void 0),__decorate([y({type:cc.Button,tooltip:"\u53f3\u79fb\u6309\u94ae"})],t.prototype,"rightBtn",void 0),__decorate([y({type:cc.PageView,tooltip:"\u53f3\u79fb\u6309\u94ae"})],t.prototype,"connonPage",void 0),__decorate([y({type:cc.SpriteAtlas,tooltip:"\u70ae\u56fe\u7247"})],t.prototype,"spriteAtlas",void 0),__decorate([y({type:cc.Prefab,tooltip:"\u70ae\u663e\u793a\u9884\u5236\u4f53"})],t.prototype,"connonShowPrefab",void 0),__decorate([y({type:cc.Button,tooltip:"\u89e3\u9501\u6309\u94ae"})],t.prototype,"unlockBtn",void 0),__decorate([y({type:cc.Node,tooltip:"\u89e3\u9501\u6761\u4ef6\u8282\u70b9"})],t.prototype,"unlockInfoNode",void 0),__decorate([y({type:cc.Label,tooltip:"\u89e3\u9501\u6587\u672c"})],t.prototype,"unlockLable",void 0),__decorate([y({type:cc.Label,tooltip:"\u89e3\u9501\u6587\u672c\u9634\u5f71"})],t.prototype,"unlockLableShadow",void 0),__decorate([y({type:cc.Node,tooltip:""})],t.prototype,"infoNode",void 0),t=__decorate([m],t)}(d.default);n.default=b,cc._RF.pop()},{"../../../code/Config/Config":"Config","../../../code/Lib/Global":"Global","../../../code/Lib/LocalStorage":"LocalStorage","../../../code/basecode/BasePanel":"BasePanel","../../../code/manager/GuideManager":"GuideManager","../../../code/manager/MyRoleDataManager":"MyRoleDataManager","../../../code/manager/PanelManager":"PanelManager","../../../code/manager/SDKManager":"SDKManager","../../../code/manager/SoundManager":"SoundManager","../../../code/manager/TableManager":"TableManager","../../../code/manager/UiAniManager":"UiAniManager","./RefitItem":"RefitItem"}],ResurgenceUi:[function(e,t,n){"use strict";cc._RF.push(t,"36fadlv+QxGF7rLsA8H4HX5","ResurgenceUi"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../code/manager/PanelManager"),a=e("../../code/manager/MyRoleDataManager"),i=(e("../../code/ads/AdsGroupController"),e("../../code/Config/Config")),r=e("../../code/manager/SoundManager"),l=e("../../code/basecode/BasePanel"),s=e("../../code/manager/UiAniManager"),c=cc._decorator,d=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timePro=null,t.resurgenceLable=null,t.diamondLable=null,t.diamondLableShadow=null,t.resurgenceBtn=null,t.countAni=null,t.isEndGame=!1,t.needDiamod=0,t._aniType=s.UiAniType.TopToDown,t}return __extends(t,e),t.prototype.openPanel=function(){this.setLable(),this.addEvent(),this.playUIAni(s.InOrOut.IN),this.isEndGame=!1,r.default.setvolumeNum(.5),this.needDiamod=Math.pow(2,o.default.game.resurgenceTimes),this.diamondLable.string=this.diamondLableShadow.string=this.needDiamod+""},t.prototype.closePanel=function(){this.dleEvent(),this.playUIAni(s.InOrOut.OUT),this.timePro.unscheduleAllCallbacks()},t.prototype.addEvent=function(){this.resurgenceBtn.node.on("click",this.onResurgenceBtnTap,this)},t.prototype.dleEvent=function(){this.resurgenceBtn.node.off("click",this.onResurgenceBtnTap,this),this.node.off("touchstart",this.skipResurgence,this)},t.prototype.panelIn=function(){this.timePro.progress=1,this.countAni.play("ResurgenceCount"),this.scheduleOnce(this.canSkip,2)},t.prototype.panelOut=function(){o.default.instance.deleteOpen(i.PanelName.ResurgenceUi),this.node.removeFromParent(!1),this.isEndGame&&o.default.game.endGame(!0)},t.prototype.timeEnd=function(){this.skipResurgence(),this.isEndGame=!0},t.prototype.resumeTime=function(){var e=this.countAni.getAnimationState("ResurgenceCount");this.countAni.play("ResurgenceCount",e.time)},t.prototype.onResurgenceBtnTap=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return r.default.playSoundEffect(r.default.btnSound),this.timePro.unscheduleAllCallbacks(),a.default.instance.dleCurrency(this.needDiamod,i.CurrencyType.Diamond)?(this.closePanel(),o.default.gameUi.updataGold(),o.default.game.onResurgenceTap()):(o.default.instance.openPanel(i.PanelName.GoShopPanel,o.default.gameUi.middleNode),this.countAni.stop()),[2]})})},t.prototype.canSkip=function(){this.node.on("touchstart",this.skipResurgence,this)},t.prototype.skipResurgence=function(){this.isEndGame||(this.isEndGame=!0,this.closePanel())},t.prototype.setLable=function(){this.resurgenceLable.string="Second Chance?"},__decorate([u(cc.ProgressBar)],t.prototype,"timePro",void 0),__decorate([u(cc.Label)],t.prototype,"resurgenceLable",void 0),__decorate([u({type:cc.Label,tooltip:"\u590d\u6d3b\u94bb\u77f3\u6570\u91cf"})],t.prototype,"diamondLable",void 0),__decorate([u({type:cc.Label,tooltip:"\u590d\u6d3b\u94bb\u77f3\u6570\u91cf\u9634\u5f71"})],t.prototype,"diamondLableShadow",void 0),__decorate([u({type:cc.Button,tooltip:"\u590d\u6d3b\u6309\u94ae"})],t.prototype,"resurgenceBtn",void 0),__decorate([u({type:cc.Animation,tooltip:"\u5012\u8ba1\u65f6"})],t.prototype,"countAni",void 0),t=__decorate([d],t)}(l.default);n.default=p,cc._RF.pop()},{"../../code/Config/Config":"Config","../../code/ads/AdsGroupController":"AdsGroupController","../../code/basecode/BasePanel":"BasePanel","../../code/manager/MyRoleDataManager":"MyRoleDataManager","../../code/manager/PanelManager":"PanelManager","../../code/manager/SoundManager":"SoundManager","../../code/manager/UiAniManager":"UiAniManager"}],RewardItem:[function(e,t,n){"use strict";cc._RF.push(t,"f51228ajDxF1pL+dcIBetxY","RewardItem"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../code/Lib/Global"),a=e("../../../code/manager/EffectManager"),i=e("../../../code/manager/PanelManager"),r=e("../../../code/Config/Config"),l=e("../../../code/manager/SoundManager"),s=e("../../../code/manager/MyRoleDataManager"),c=e("../../../code/manager/TableManager"),d=cc._decorator,u=d.ccclass,p=d.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.goldLabel=null,t.goldIcon=null,t.goldNode=null,t.diamondLabel=null,t.diamondIcon=null,t.diamondNode=null,t.chipLabel=null,t.chipIcon=null,t.chipNode=null,t.connonNode=null,t.connon=null,t.wheel=null,t.sub=null,t.reward=new Map,t.complete=null,t}return __extends(t,e),t.prototype.init=function(e){var t=this;this.reward=e;for(var n=[this.goldLabel,this.diamondLabel,this.chipLabel],a=[this.goldNode,this.diamondNode,this.chipNode],r=0,l=0;l<3;l++){var d=n[l],u=a[l];e.has(51e4+l)?(r++,d.string=o.default.setNum(e.get(51e4+l))+"",u.active=!0):u.active=!1}this.connonNode&&(this.connonNode.active=!1,r<this.reward.size&&this.reward.forEach(function(e,n){if(s.default.instance.isConnon(n)&&t.connonNode){t.connonNode.active=!0;var o=c.default.instance.connonTable.getScourceId(n,4),a=o[0],r=o[1],l=o[2];t.connon.spriteFrame=i.default.game.playerScript.connonAtlas.getSpriteFrame(a+"0"),t.wheel.spriteFrame=i.default.game.playerScript.connonAtlas.getSpriteFrame(l+"0"),t.sub.spriteFrame=i.default.game.playerScript.connonAtlas.getSpriteFrame(r+"0")}}))},t.prototype.rewardFly=function(){var e=this,t=[this.goldIcon,this.diamondIcon,this.chipIcon];this.reward.forEach(function(n,o){if(s.default.instance.isConnon(o)){if(!e.connonNode)return;a.default.instance.rewardFly(e.connonNode,o)}else{var i=o-51e4;t[i]&&t[i].node&&a.default.instance.rewardFly(t[i].node,o)}})},t.prototype.moreRewardIn=function(e,t){var n=this;this.complete=t;for(var o=[this.goldLabel,this.diamondLabel,this.chipLabel],a=[this.goldNode,this.diamondNode,this.chipNode],i=0;i<3;i++){var r=o[i];if(1==a[i].active&&e.has(51e4+i)){var l=cc.instantiate(this.goldLabel.node);l.active=!0,l.opacity=0,r.node.addChild(l),l.getComponent(cc.Label).string=e.get(51e4+i),this.getTextTween(r,Number(this.reward.get(51e4+i))+Number(e.get(51e4+i)),Number(this.reward.get(51e4+i)),.01)}}this.complete&&this.scheduleOnce(function(){n.complete()},.5)},t.prototype.inEffect=function(e,t,n,a){var i=this;e.setPosition(cc.v2(0,80));var s=cc.sequence(cc.fadeTo(.2,0),cc.callFunc(function(){t.string=o.default.setNum(n),i.complete&&(i.complete(),i.complete=null)}),cc.fadeTo(.2,255)),c=cc.sequence(cc.fadeTo(.2,255),cc.fadeTo(.7,255),cc.spawn(cc.moveTo(.4,cc.v2(0,0)),cc.fadeTo(.4,0)),cc.callFunc(function(){r.CurrencyType.Gold?l.default.playSoundEffect(l.default.getCoinEnd):r.CurrencyType.Diamond&&l.default.playSoundEffect(l.default.getDiamod),e.removeFromParent(),t.node.runAction(s)}));e.runAction(c)},t.prototype.getTextTween=function(e,t,n,o,a){void 0===n&&(n=0),void 0===o&&(o=.02),void 0===a&&(a=.3);var i=e.string;i.indexOf(",")&&(i=i.replace(/,/g,"")),n=Number(i);var r=0,s=this.getScrollingTimes(t.toString());o=a/s;var c=Math.round((t-n)/s),d=0;this.schedule(function(){(r+=c)>=t-n&&(r=t-n,this.node.stopAllActions()),d%4==0&&(l.default.playSoundEffect(l.default.fightReward),d=0),d++,e.string=(n+r).toString()},o,s)},t.prototype.getScrollingTimes=function(e){var t=1,n=e.length;return n<=2?t=1:n>2&&n<=5?t=30:n>5&&n<=9&&(t=20),t},__decorate([p({type:cc.Label,tooltip:"\u6e38\u620f\u5e01Lable"})],t.prototype,"goldLabel",void 0),__decorate([p({type:cc.Sprite,tooltip:"\u6e38\u620f\u5e01icon"})],t.prototype,"goldIcon",void 0),__decorate([p({type:cc.Node,tooltip:"\u6e38\u620f\u5e01\u8282\u70b9"})],t.prototype,"goldNode",void 0),__decorate([p({type:cc.Label,tooltip:"\u94bb\u77f3Lable"})],t.prototype,"diamondLabel",void 0),__decorate([p({type:cc.Sprite,tooltip:"\u94bb\u77f3icon"})],t.prototype,"diamondIcon",void 0),__decorate([p({type:cc.Node,tooltip:"\u94bb\u77f3\u8282\u70b9"})],t.prototype,"diamondNode",void 0),__decorate([p({type:cc.Label,tooltip:"\u82af\u7247Lable"})],t.prototype,"chipLabel",void 0),__decorate([p({type:cc.Sprite,tooltip:"\u82af\u7247icon"})],t.prototype,"chipIcon",void 0),__decorate([p({type:cc.Node,tooltip:"\u82af\u7247\u8282\u70b9"})],t.prototype,"chipNode",void 0),__decorate([p({type:cc.Node,tooltip:"\u82af\u7247\u8282\u70b9"})],t.prototype,"connonNode",void 0),__decorate([p({type:cc.Sprite,tooltip:"\u70ae"})],t.prototype,"connon",void 0),__decorate([p({type:cc.Sprite,tooltip:"\u8f6e\u5b50"})],t.prototype,"wheel",void 0),__decorate([p({type:cc.Sprite,tooltip:"\u526f\u70ae"})],t.prototype,"sub",void 0),t=__decorate([u],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../../../code/Config/Config":"Config","../../../code/Lib/Global":"Global","../../../code/manager/EffectManager":"EffectManager","../../../code/manager/MyRoleDataManager":"MyRoleDataManager","../../../code/manager/PanelManager":"PanelManager","../../../code/manager/SoundManager":"SoundManager","../../../code/manager/TableManager":"TableManager"}],SDKManager:[function(e,t,n){"use strict";cc._RF.push(t,"ec63eQg5m1HpaUTNydHrhyI","SDKManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./MyRoleDataManager"),a=(e("../Lib/LocalStorage"),e("./PanelManager")),i=e("../Config/Config"),r=cc._decorator,l=r.ccclass,s=(r.property,function(){function e(){}var t;return t=e,Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new t,window.SDKManager=this._instance),this._instance},enumerable:!0,configurable:!0}),e.prototype.onPause=function(){1==o.default.instance.gameState&&(o.default.instance.gameState=4,cc.director.getPhysicsManager().enabled=!1)},e.prototype.onResume=function(){},e.prototype.phoneShack=function(){this.callJava("phoneShack","()V")},e.prototype.phoneLongShack=function(){this.callJava("longPhoneShack","()V")},e.prototype.getNetState=function(){return cc.sys.isNative?this.callJava("getNetype","()I"):1},e.prototype.rate=function(){if(cc.sys.isNative)return this.callJava("launchAppDetail","()V")},e.prototype.startPay=function(e){this.payId=e,cc.sys.platform==cc.sys.ANDROID?this.callJava("jsCallStartGooglePay","(Ljava/lang/String;)V",e):cc.sys.platform!=cc.sys.IPHONE&&cc.sys.platform!=cc.sys.IPAD||(a.default.gameUi.openMask(!0),this.callJava("startPay","(Ljava/lang/String;)V",e))},e.prototype.googlePayPurchaseToken=function(e){GlobalFun.log("js googlePayPurchaseToken  "+e);var t=JSON.parse(e),n=t[0].purchaseToken,o=t[0].orderId;n.length>0&&this.callJava("jsCallGooglePayPurchaseToken","(Ljava/lang/String;)V",n+";"+o)},e.prototype.googlePayResult=function(e){if(a.default.gameUi.openMask(!1),console.log("googlePayResult  "+e),e){var t=e.split(";");1==Number(t[0])?(GlobalFun.log("pay success"),a.default.instance.getExistPanel(i.PanelName.ShopPanel).topUpSuccess(this.payId)):GlobalFun.log("pay failed")}else GlobalFun.log("pay failed");a.default.instance.getExistPanel(i.PanelName.ShopPanel).stateCheck()},e.prototype.failedConsumeGood=function(){a.default.gameUi.openMask(!1),a.default.instance.getExistPanel(i.PanelName.ShopPanel).stateCheck()},e.prototype.reConsumeGood=function(){this.callJava("jsCallReConsumeGood","()V")},e.prototype.reConsumeComplete=function(e){if(a.default.gameUi.openMask(!1),e){var t=e.split(";");1==Number(t[0])?(GlobalFun.log("reConsumeComplete success"),a.default.instance.getExistPanel(i.PanelName.ShopPanel).topUpSuccess(t[1])):GlobalFun.log("reConsumeComplete failed1")}else GlobalFun.log("reConsumeComplete failed2");a.default.instance.getExistPanel(i.PanelName.ShopPanel).stateCheck()},e.prototype.checkUnConsumedGoods=function(){return!!cc.sys.isNative&&this.callJava("jsCallCheckUnConsumedGoods","()Z")},e.prototype.getSubsGoodsData=function(){return this.callJava("jsCallGetSubsGoodsData","()Ljava/lang/String;")},e.prototype.startRestore=function(){this.callJava("restorePurchasesReal","")},e.prototype.restoreCompleted=function(e){},e.prototype.callJava=function(e,t){for(var n,o,a=[],i=2;i<arguments.length;i++)a[i-2]=arguments[i];var r=this.getClassName(e);e=this.getmethodName(e);if(cc.sys.isNative)if(jsb){if(cc.sys.platform==cc.sys.ANDROID)return(n=jsb.reflection).callStaticMethod.apply(n,[r,e,t].concat(a));if(cc.sys.platform==cc.sys.IPHONE)return(o=jsb.reflection).callStaticMethod.apply(o,[r,e].concat(a))}else GlobalFun.log("no jsb");return""},e.prototype.getClassName=function(e){if(cc.sys.os===cc.sys.OS_ANDROID)switch(e){case"adsAskStatistical":case"trackEventWithType":case"trackEvent":case"trackLevel":case"trackPay":return i.JavaClassName.Um_Fb_SDKManger;case"loadAds":case"showAds":case"isAdsReady":case"sendAdmobString":case"jsSend":return i.JavaClassName.AdsGroupController;case"phoneShack":case"longPhoneShack":case"getNetype":case"getSysLanguage":case"getSysCountry":case"launchAppDetail":return i.JavaClassName.ToolManager;case"jsCallStartGooglePay":case"jsCallGooglePayPurchaseToken":case"jsCallReConsumeGood":case"jsCallCheckUnConsumedGoods":case"jsCallGetSubsGoodsData":return i.JavaClassName.GoogleSDKManger}else if(cc.sys.os===cc.sys.OS_IOS)switch(e){case"phoneShack":case"longPhoneShack":case"getNetype":case"getSysLanguage":case"getSysCountry":case"jsSend":case"launchAppDetail":return i.IosClassName.SDKManager;case"adsAskStatistical":return i.IosClassName.Um_SDKManger;case"loadAds":case"showAds":case"isAdsReady":case"sendAdmobString":return i.IosClassName.AdsGroupController;case"startPay":case"restorePurchasesReal":return i.IosClassName.InAppPurchass}},e.prototype.getmethodName=function(e){if(cc.sys.os===cc.sys.OS_ANDROID)return e;if(cc.sys.os===cc.sys.OS_IOS)switch(e){case"phoneShack":case"longPhoneShack":case"getNetype":case"getSysLanguage":case"getSysCountry":case"jsSend":case"launchAppDetail":case"restorePurchasesReal":return e;case"adsAskStatistical":return"adsAskStatistical:andmsg:";case"loadAds":return"loadAds:andAdsType:andPlacementID:andUnitID:";case"showAds":return"showAds:andAdsType:andUnitID:andPlacementID:";case"sendAdmobString":return"sendAdmobString:";case"startPay":return"startPay:";case"isAdsReady":return"isAdsReady:andAdsType:andPlacementID:"}},e.prototype.closeMask=function(){a.default.gameUi.openMask(!1)},e=t=__decorate([l],e)}());n.default=s,cc._RF.pop()},{"../Config/Config":"Config","../Lib/LocalStorage":"LocalStorage","./MyRoleDataManager":"MyRoleDataManager","./PanelManager":"PanelManager"}],ScenceTable:[function(e,t,n){"use strict";cc._RF.push(t,"1e83dS7PG9B67r/0PHluXy0","ScenceTable"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../code/Lib/Global"),a=function(){function e(e){this.table=e}return e.prototype.getSourceID=function(e){return this.getDataById(e).map_id},e.prototype.getMissinDoc=function(e){for(var t=0;t<this.table.length;t++){var n=this.table[t];if(n&&n.id==e)return n.des}},e.prototype.getMissinNum=function(e){for(var t=0;t<this.table.length;t++){var n=this.table[t];if(n&&n.id==e)return n.number}},e.prototype.getConnonId=function(e){for(var t=0;t<this.table.length;t++){var n=this.table[t];if(n&&n.id==e)return n.cannons_id}},e.prototype.isRightConnon=function(e,t){for(var n=0;n<this.table.length;n++){var o=this.table[n];if(o&&o.cannons_id&&o.id==e)for(var a=o.cannons_id.split(";"),i=a.length,r=0;r<i;r++){var l=a[r];if(Number(l)==t)return 1}}return 0},e.prototype.getBallIcon=function(e){for(var t=0;t<this.table.length;t++){var n=this.table[t];if(n&&n.id==e)return n.ball_id}},e.prototype.getEffectId=function(e){for(var t=0;t<this.table.length;t++){var n=this.table[t];if(n&&n.id==e)return n.effect_id}},e.prototype.getColor=function(e){for(var t=0;t<this.table.length;t++){var n=this.table[t];if(n&&n.id==e)return this.color(n.effects)}},e.prototype.getDataById=function(e){for(var t=0;t<this.table.length;t++){var n=this.table[t];if(n&&n.id==e)return n}return cc.warn("scenceTable: Do not have id "+e),{}},e.prototype.getScenceColor=function(e){for(var t=0;t<this.table.length;t++){var n=this.table[t];if(n&&n.id==e)return Number(n.wordColor)}},e.prototype.color=function(e){var t=e.split(";");return o.default.arrRandom(t).split(":")},e}();n.default=a,cc._RF.pop()},{"../../code/Lib/Global":"Global"}],Secret:[function(e,t,n){"use strict";cc._RF.push(t,"aad4bEB+5xHbJTpZCBRCnNp","Secret"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.compile=function(e){e=e.toString();for(var t=String.fromCharCode(e.charCodeAt(0)+e.length),n=1;n<e.length;n++)t+=String.fromCharCode(e.charCodeAt(n)+e.charCodeAt(n-1));return encodeURIComponent(t),t},e.uncompile=function(e){e=e.toString(),e=decodeURIComponent(e);for(var t=String.fromCharCode(e.charCodeAt(0)-e.length),n=1;n<e.length;n++)t+=String.fromCharCode(e.charCodeAt(n)-t.charCodeAt(n-1));return t},e.setKeyValue=function(e){this.keyObj[e]=!0},e.getKeyValue=function(e){var t=this.keyObj[e];return this.keyObj[e]=!1,t},e.keyObj={},e}();n.default=o,cc._RF.pop()},{}],SetPanel:[function(e,t,n){"use strict";cc._RF.push(t,"82e52Zd+nRLy7Gtj2Gs/lfQ","SetPanel"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../code/basecode/BasePanel"),a=e("../../code/manager/UiAniManager"),i=e("../../code/manager/SoundManager"),r=e("../../code/basecode/CheckBox"),l=e("../../code/Lib/LocalStorage"),s=e("../../code/manager/MyRoleDataManager"),c=e("../../code/manager/PanelManager"),d=e("../../code/Config/Config"),u=cc._decorator,p=u.ccclass,h=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.backSoundToggle=null,t.effectSoundToggle=null,t.leftButon=null,t.rightButon=null,t.closeBtn=null,t.languesPage=null,t.languesLabel=null,t.nameLabel=null,t._aniType=a.UiAniType.TopToDown,t.languesArr=["cn","\u7b80\u4f53\u4e2d\u6587","en","English"],t.curIndex=-1,t}return __extends(t,e),t.prototype.onLoad=function(){this.curIndex=0;for(var e=this.languesArr.length,t=0;t<=e/2-1;t++){s.default.instance.curLangue==this.languesArr[2*t]&&(this.curIndex=t);var n=this.languesArr[2*t+1],o=cc.instantiate(this.languesLabel);this.languesPage.addPage(o),o.active=!0,o.y=0,o.getComponent(cc.Label).string=n}this.languesPage.content.getComponent(cc.Layout).updateLayout()},t.prototype.openPanel=function(){-1!=this.curIndex&&(this.languesPage.scrollToOffset(cc.v2(339*this.curIndex,0),0),this.languesPage.scrollToPage(this.curIndex,0),this.languesPage.setCurrentPageIndex(this.curIndex)),this.curIndex=-1,this.playUIAni(a.InOrOut.IN),this.backSoundToggle.getComponent(r.default).setCheck(!!i.default.backSoundState),this.effectSoundToggle.getComponent(r.default).setCheck(!!i.default.effectSoundState),this.setLable(),this.addEvent()},t.prototype.closePanel=function(){i.default.playSoundEffect(i.default.btnSound),this.playUIAni(a.InOrOut.OUT),this.dleEvent()},t.prototype.panelIn=function(){},t.prototype.panelOut=function(){c.default.instance.deleteOpen(d.PanelName.SetPanel),this.node.removeFromParent()},t.prototype.addEvent=function(){this.backSoundToggle.node.on("click",this.backSoundToggleTap,this),this.effectSoundToggle.node.on("click",this.effectSoundToggleTap,this),this.leftButon.node.on("click",this.toLeft,this),this.rightButon.node.on("click",this.toRight,this),this.languesPage.node.on("scroll-ended",this.moveEnd,this),this.closeBtn.node.on("click",this.closeBtnTap,this)},t.prototype.dleEvent=function(){this.backSoundToggle.node.off("click",this.backSoundToggleTap,this),this.effectSoundToggle.node.off("click",this.effectSoundToggleTap,this),this.leftButon.node.off("click",this.toLeft,this),this.rightButon.node.off("click",this.toRight,this),this.languesPage.node.off("scroll-ended",this.moveEnd,this),this.closeBtn.node.off("click",this.closeBtnTap,this)},t.prototype.setLable=function(){this.nameLabel.string=GlobalFun.i18n.t("lable.10008")},t.prototype.backSoundToggleTap=function(){i.default.setBackSoundState(0==i.default.backSoundState?1:0),i.default.playSoundEffect(i.default.btnSound)},t.prototype.effectSoundToggleTap=function(){i.default.setEffectSoundState(0==i.default.effectSoundState?1:0),i.default.playSoundEffect(i.default.btnSound)},t.prototype.toLeft=function(){i.default.playSoundEffect(i.default.btnSound);var e=this.languesPage.getCurrentPageIndex();0!=e&&this.languesPage.setCurrentPageIndex(e-1)},t.prototype.toRight=function(){i.default.playSoundEffect(i.default.btnSound);var e=this.languesPage.getCurrentPageIndex();e!=this.languesPage.content.children.length-1&&this.languesPage.setCurrentPageIndex(e+1)},t.prototype.moveEnd=function(){var e=this.languesPage.getCurrentPageIndex();GlobalFun.i18n.init(this.languesArr[2*e]),l.default.saveItem("language",this.languesArr[2*e]),c.default.gameUi.setLable(),c.default.instance.runCurOpenPanelFun("setLable"),this.setLable()},t.prototype.closeBtnTap=function(){c.default.instance.closePanel(d.PanelName.SetPanel)},__decorate([h(cc.Toggle)],t.prototype,"backSoundToggle",void 0),__decorate([h(cc.Toggle)],t.prototype,"effectSoundToggle",void 0),__decorate([h(cc.Button)],t.prototype,"leftButon",void 0),__decorate([h(cc.Button)],t.prototype,"rightButon",void 0),__decorate([h(cc.Button)],t.prototype,"closeBtn",void 0),__decorate([h(cc.PageView)],t.prototype,"languesPage",void 0),__decorate([h(cc.Node)],t.prototype,"languesLabel",void 0),__decorate([h(cc.Label)],t.prototype,"nameLabel",void 0),t=__decorate([p],t)}(o.default);n.default=f,cc._RF.pop()},{"../../code/Config/Config":"Config","../../code/Lib/LocalStorage":"LocalStorage","../../code/basecode/BasePanel":"BasePanel","../../code/basecode/CheckBox":"CheckBox","../../code/manager/MyRoleDataManager":"MyRoleDataManager","../../code/manager/PanelManager":"PanelManager","../../code/manager/SoundManager":"SoundManager","../../code/manager/UiAniManager":"UiAniManager"}],ShaderUtils:[function(e,t,n){"use strict";var o;cc._RF.push(t,"78ed5vj2PlAlq4FG543K+/5","ShaderUtils");var a={shaderMaterial:[],init:function(){cc.dynamicAtlasManager.enabled=!1},setShader:function(e){var t=this.shaderMaterial.shift();if(o||(o=window.ColorMaterial),t||(t=new o),e){var n=e.spriteFrame.getTexture();t.setTexture(n),t.updateHash(),e._material=t,e._renderData._material=t}return t},backShader:function(e){e&&this.shaderMaterial.push(e)}};t.exports=a,cc._RF.pop()},{}],ShopItem:[function(e,t,n){"use strict";cc._RF.push(t,"a56509yckRGWL5nwhbD9YLK","ShopItem"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../code/manager/SDKManager"),a=e("../../../code/Lib/Secret"),i=e("../../../code/Config/Config"),r=e("../../../code/manager/PanelManager"),l=e("../../../code/manager/TableManager"),s=e("../../../code/manager/MyRoleDataManager"),c=e("../../../code/Lib/LocalStorage"),d=e("../../../code/manager/EffectManager"),u=e("../../../code/Lib/Global"),p=cc._decorator,h=p.ccclass,f=p.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buyBtn=null,t.nameLable=null,t.priceLable=null,t.priceLableShadow=null,t.currencyIcon=null,t.icon=null,t.numLable=null,t.iconArr=[],t}return __extends(t,e),t.prototype.onLoad=function(){this.buyBtn.node.on("click",this.buyBtnTap,this)},t.prototype.init=function(e){this.payId=e;var t=l.default.instance.shopTable.getData(e);if(this.icon.spriteFrame=r.default.gameUi.iconAtlas.getSpriteFrame(t.icon),2==Number(t.cost_type)){this.currencyIcon.spriteFrame=this.iconArr[0],this.currencyIcon.node.active=!0,this.priceLableShadow.string=this.priceLable.string=t.cost;var n=l.default.instance.shopTable.getreward(Number(this.payId));this.numLable.string=u.default.setNum(n[0][1])}else this.currencyIcon.spriteFrame=null,this.currencyIcon.node.active=!1,this.priceLableShadow.string=this.priceLable.string="$"+t.cost,this.numLable.string="+"+t.gems},t.prototype.setLable=function(){this.nameLable.string=GlobalFun.i18n.t("lable."+l.default.instance.shopTable.getName(this.payId))},t.prototype.successFly=function(){for(var e=l.default.instance.shopTable.getreward(Number(this.payId)),t=e.length,n=0;n<t;n++)d.default.instance.rewardFly(this.icon.node,e[n][0])},t.prototype.buyBtnTap=function(){var e=l.default.instance.shopTable.getPriceType(this.payId);if(2==e)this.diamondToGold();else if(1==e){if(-1==o.default.instance.getNetState())return;if(o.default.instance.checkUnConsumedGoods())return void o.default.instance.reConsumeGood();r.default.instance.getExistPanel(i.PanelName.ShopPanel).curItem=this,o.default.instance.callJava("trackPay","(Ljava/lang/String;Ljava/lang/String;)V","startPay",this.payId.toString()),a.default.setKeyValue("Buy"),o.default.instance.startPay(this.payId)}},t.prototype.diamondToGold=function(){if(s.default.instance.dleCurrency(l.default.instance.shopTable.getPrice(this.payId),i.CurrencyType.Diamond)){for(var e=l.default.instance.shopTable.getreward(Number(this.payId)),t=e.length,n=0;n<t;n++)s.default.instance.addCurrency(e[n][1],e[n][0]);var o=l.default.instance.shopTable.getIncome(Number(this.payId));0!=o&&(s.default.instance.allGoldMore=(1==s.default.instance.allGoldMore?0:s.default.instance.allGoldMore)+o),c.default.saveItem("allGoldMore",s.default.instance.allGoldMore+""),r.default.instance.getExistPanel(i.PanelName.ShopPanel).setLable(),this.successFly()}},__decorate([f({type:cc.Button,tooltip:"\u5173\u95ed\u6309\u94ae"})],t.prototype,"buyBtn",void 0),__decorate([f({type:cc.Label,tooltip:"\u540d\u5b57\u6587\u672c"})],t.prototype,"nameLable",void 0),__decorate([f({type:cc.Label,tooltip:"\u8d2d\u4e70\u94b1\u6587\u672c"})],t.prototype,"priceLable",void 0),__decorate([f({type:cc.Label,tooltip:"\u8d2d\u4e70\u94b1\u6587\u672c\u9634\u5f71"})],t.prototype,"priceLableShadow",void 0),__decorate([f({type:cc.Sprite,tooltip:"\u8d27\u5e01icon"})],t.prototype,"currencyIcon",void 0),__decorate([f({type:cc.Sprite,tooltip:"icon"})],t.prototype,"icon",void 0),__decorate([f({type:cc.Label,tooltip:"\u6570\u91cf"})],t.prototype,"numLable",void 0),__decorate([f({type:[cc.SpriteFrame],tooltip:"\u8d27\u5e01\u8d44\u6e90"})],t.prototype,"iconArr",void 0),t=__decorate([h],t)}(cc.Component);n.default=g,cc._RF.pop()},{"../../../code/Config/Config":"Config","../../../code/Lib/Global":"Global","../../../code/Lib/LocalStorage":"LocalStorage","../../../code/Lib/Secret":"Secret","../../../code/manager/EffectManager":"EffectManager","../../../code/manager/MyRoleDataManager":"MyRoleDataManager","../../../code/manager/PanelManager":"PanelManager","../../../code/manager/SDKManager":"SDKManager","../../../code/manager/TableManager":"TableManager"}],ShopPanel:[function(e,t,n){"use strict";cc._RF.push(t,"05c0ftoIvxPKb/9n1U3dS8Y","ShopPanel"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../code/manager/UiAniManager"),a=e("../../../code/manager/PanelManager"),i=e("../../../code/Config/Config"),r=e("../../../code/manager/TableManager"),l=e("../../../code/manager/SoundManager"),s=e("../../../code/Lib/Secret"),c=e("../../../code/manager/SDKManager"),d=e("../../../code/manager/MyRoleDataManager"),u=e("../../../code/basecode/BasePanel"),p=e("../../../code/Lib/LocalStorage"),h=e("./GiftItem"),f=e("../../../code/manager/NodePoolMananger"),g=cc._decorator,m=g.ccclass,y=g.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.giftPrefab=null,t.shopPrefab=null,t.scroll=null,t.closeBtn=null,t.nameLable=null,t.talkLable=null,t.widgetNode0=null,t.widgetNode1=null,t.itemScriptArr=[],t._aniType=o.UiAniType.ShopPanel,t.isInit=!1,t}return __extends(t,e),t.prototype.start=function(){f.default.instance.addPool(this.giftPrefab),f.default.instance.addPool(this.shopPrefab)},t.prototype.initLoad=function(){var e=this;if(!this.isInit){this.isInit=!0;for(var t=r.default.instance.shopTable.table,n=function(n,a){var i,r=t[n];r&&(0==r.type||1==r.type?o.scheduleOnce(function(){(i=f.default.instance.pop(e.giftPrefab.name)).getComponent("GiftItem").init(r.id),i.getComponent(h.default).setLable(),e.itemScriptArr.push(i.getComponent("GiftItem")),e.scroll.content.addChild(i)},.1*n):o.scheduleOnce(function(){(i=f.default.instance.pop(e.shopPrefab.name)).getComponent("ShopItem").init(r.id),e.itemScriptArr.push(i.getComponent("ShopItem")),e.scroll.content.addChild(i)},.1*n))},o=this,a=0,i=t.length;a<i;a++)n(a)}},t.prototype.stepShow=function(e){if(e)for(var t=this.scroll.content.children.length,n=function(e){var t=o.scroll.content.children[e];o.scheduleOnce(function(){t.active=!0},.05*e)},o=this,a=0;a<t;a++)n(a);else for(t=this.scroll.content.children.length,a=0;a<t;a++){this.scroll.content.children[a].active=!1}},t.prototype.openPanel=function(){this.playUIAni(o.InOrOut.IN),this.addEvent(),this.setLable(),c.default.instance.callJava("trackEvent","(Ljava/lang/String;)V","OpenShop")},t.prototype.closePanel=function(){this.playUIAni(o.InOrOut.OUT),this.dleEvent()},t.prototype.addEvent=function(){this.closeBtn.node.on("click",this.closeBtnTap,this)},t.prototype.dleEvent=function(){this.closeBtn.node.off("click",this.closeBtnTap,this)},t.prototype.panelIn=function(){this.isInit?this.stepShow(!0):this.initLoad(),this.scroll.content.getComponent(cc.Layout).updateLayout(),this.scroll.scrollToOffset(cc.v2(0,0))},t.prototype.panelOut=function(){this.stepShow(!1),a.default.instance.deleteOpen(i.PanelName.ShopPanel),this.node.removeFromParent(),a.default.instance.checkPanelIsOpen(i.PanelName.ResurgenceUi)&&a.default.instance.getExistPanel(i.PanelName.ResurgenceUi).resumeTime()},t.prototype.setLable=function(){this.nameLable.string=GlobalFun.i18n.t("lable.10197"),this.talkLable.string=GlobalFun.i18n.t("lable.10198");for(var e=this.itemScriptArr.length,t=0;t<e;t++)this.itemScriptArr[t].setLable()},t.prototype.closeBtnTap=function(){l.default.playSoundEffect(l.default.btnSound),a.default.instance.closePanel(i.PanelName.ShopPanel)},t.prototype.topUpSuccess=function(e){if(s.default.getKeyValue("Buy")){var t=r.default.instance.shopTable.getPrice(Number(e));c.default.instance.callJava("trackPay","(Ljava/lang/String;Ljava/lang/String;)V","endPay",e+":"+t);for(var n=r.default.instance.shopTable.getreward(Number(e)),o=n.length,a=0;a<o;a++)d.default.instance.addCurrency(n[a][1],n[a][0]);var i=r.default.instance.shopTable.getIncome(Number(e));0!=i&&(d.default.instance.allGoldMore=(1==d.default.instance.allGoldMore?0:d.default.instance.allGoldMore)+i),p.default.saveItem("allGoldMore",d.default.instance.allGoldMore+""),this.setLable(),this.curItem&&(this.curItem.successFly(),this.curItem=null)}},__decorate([y({type:cc.Prefab,tooltip:"\u793c\u5305\u9884\u5236\u4f53"})],t.prototype,"giftPrefab",void 0),__decorate([y({type:cc.Prefab,tooltip:"\u5546\u54c1\u9884\u5236\u4f53"})],t.prototype,"shopPrefab",void 0),__decorate([y({type:cc.ScrollView,tooltip:""})],t.prototype,"scroll",void 0),__decorate([y({type:cc.Button,tooltip:"\u5173\u95ed\u6309\u94ae"})],t.prototype,"closeBtn",void 0),__decorate([y({type:cc.Label,tooltip:"\u540d\u5b57leble"})],t.prototype,"nameLable",void 0),__decorate([y({type:cc.Label,tooltip:"\u63cf\u8ff0leble"})],t.prototype,"talkLable",void 0),__decorate([y({type:cc.Node,tooltip:"\u9002\u914d\u4f7f\u7528"})],t.prototype,"widgetNode0",void 0),__decorate([y({type:cc.Node,tooltip:"\u9002\u914d\u4f7f\u7528"})],t.prototype,"widgetNode1",void 0),t=__decorate([m],t)}(u.default);n.default=b,cc._RF.pop()},{"../../../code/Config/Config":"Config","../../../code/Lib/LocalStorage":"LocalStorage","../../../code/Lib/Secret":"Secret","../../../code/basecode/BasePanel":"BasePanel","../../../code/manager/MyRoleDataManager":"MyRoleDataManager","../../../code/manager/NodePoolMananger":"NodePoolMananger","../../../code/manager/PanelManager":"PanelManager","../../../code/manager/SDKManager":"SDKManager","../../../code/manager/SoundManager":"SoundManager","../../../code/manager/TableManager":"TableManager","../../../code/manager/UiAniManager":"UiAniManager","./GiftItem":"GiftItem"}],ShopTable:[function(e,t,n){"use strict";cc._RF.push(t,"32a42kWq/NDsKmqu4Bp7MhY","ShopTable"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../code/manager/TableManager"),a=e("../../code/manager/MyRoleDataManager"),i=function(){function e(e){this.table=e}return e.prototype.getData=function(e){for(var t=0;t<this.table.length;t++){var n=this.table[t];if(n&&e==Number(n.id))return n}},e.prototype.getPrice=function(e){for(var t=0;t<this.table.length;t++){var n=this.table[t];if(n&&e==Number(n.id))return Number(n.cost)}return 0},e.prototype.getIncome=function(e){for(var t=0;t<this.table.length;t++){var n=this.table[t];if(n&&e==Number(n.id))return Number(n.income)}return 0},e.prototype.getDoc=function(e){for(var t=0;t<this.table.length;t++){var n=this.table[t];if(n&&e==Number(n.id))return n.des}return""},e.prototype.getName=function(e){for(var t=0;t<this.table.length;t++){var n=this.table[t];if(n&&e==Number(n.id))return n.name}return""},e.prototype.getPriceType=function(e){for(var t=0;t<this.table.length;t++){var n=this.table[t];if(n&&e==Number(n.id))return Number(n.cost_type)}return 0},e.prototype.getreward=function(e){for(var t=[],n=0;n<this.table.length;n++){var i=this.table[n];if(i&&e==i.id){0!=Number(i.coins)&&t.push([51e4,Math.ceil(a.default.instance.allGoldCount(.001*Number(i.coins)*o.default.instance.connonTable.getBestTenUpgradeMoney()))]),0!=Number(i.gems)&&t.push([510001,Number(i.gems)]),0!=Number(i.chips)&&t.push([510002,Number(i.chips)]);break}}return t},e}();n.default=i,cc._RF.pop()},{"../../code/manager/MyRoleDataManager":"MyRoleDataManager","../../code/manager/TableManager":"TableManager"}],ShowPrefab:[function(e,t,n){"use strict";cc._RF.push(t,"456dblGxoFMLoZkhYSwUjmB","ShowPrefab"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../code/manager/MyRoleDataManager"),a=cc._decorator,i=a.ccclass,r=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.connonNode=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.playerScript=this.connonNode.getComponent("Connon")},t.prototype.startShow=function(e){this.playerScript.init(o.default.instance.curCannonID),this.playerScript.setConnonSkin(o.default.instance.curCannonID),this.playerScript.setBullet(),this.playerScript.showType=!0,this.playerScript.startShoot(),0==e&&this.playerScript.funnelShow(o.default.instance.getRandomFunnel())},t.prototype.stopShow=function(){this.playerScript.showType=!1,this.playerScript.cancelShoot(),this.playerScript.outFunnel(),this.playerScript.funnelLeft&&this.playerScript.funnelLeft.removeFromParent(),this.playerScript.funnelLeft&&this.playerScript.funnelRight.removeFromParent()},__decorate([r(cc.Node)],t.prototype,"connonNode",void 0),t=__decorate([i],t)}(cc.Component);n.default=l,cc._RF.pop()},{"../../code/manager/MyRoleDataManager":"MyRoleDataManager"}],SoundManager:[function(e,t,n){"use strict";cc._RF.push(t,"3bdd8YTXNpNXKiaLz9rYam2","SoundManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./LoadManager"),a=e("../Lib/LocalStorage"),i=cc._decorator,r=i.ccclass,l=(i.property,function(){function e(){}return e.playBackGroudMusic=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!0),__awaiter(this,void 0,void 0,function(){var n,a;return __generator(this,function(i){switch(i.label){case 0:return 0==this.soundState||0==this.backSoundState?[2]:(e||(e=this.lastBackGroud),this.audioPool[e]?[3,3]:(n=o.default.instance.getRes(this.sourceUrl+e,cc.AudioClip))?[3,2]:[4,o.default.instance.loadRes(this.sourceUrl+e,cc.AudioClip)]);case 1:n=i.sent(),i.label=2;case 2:if(!n)return[2];this.audioPool[e]=n,i.label=3;case 3:return this.lastBackGroud=e,a=cc.audioEngine.playMusic(this.audioPool[e],t),this.audioPool[e].soundAudioId=a,[2]}})})},e.pauseBackGroudMusic=function(){cc.audioEngine.pauseMusic()},e.resumeBackGround=function(){0!=this.soundState&&0!=this.backSoundState&&cc.audioEngine.resumeMusic()},e.stopBackGroudMusic=function(){cc.audioEngine.stopMusic()},e.playSoundEffect=function(e,t){return void 0===t&&(t=!1),__awaiter(this,void 0,void 0,function(){var n,a;return __generator(this,function(i){switch(i.label){case 0:return 0==this.soundState||0==this.effectSoundState?[2]:this.audioPool[e]?[3,3]:(n=o.default.instance.getRes(this.sourceUrl+e,cc.AudioClip))?[3,2]:[4,o.default.instance.loadRes(this.sourceUrl+e,cc.AudioClip)];case 1:n=i.sent(),i.label=2;case 2:if(!n)return[2];this.audioPool[e]=n,i.label=3;case 3:return a=cc.audioEngine.playEffect(this.audioPool[e],t),this.audioPool[e].soundAudioId=a,[2]}})})},e.stopSoundEffect=function(){cc.audioEngine.stopAllEffects()},e.setSoundState=function(e){1==this.soundState&&0==e&&cc.audioEngine.stopAll(),this.soundState=e,a.default.saveItem("soundState",this.soundState.toString())},e.setBackSoundState=function(e){1==this.backSoundState&&0==e&&cc.audioEngine.stopMusic(),this.backSoundState=e,a.default.saveItem("backSoundState",this.backSoundState.toString())},e.setEffectSoundState=function(e){this.effectSoundState=e,a.default.saveItem("effectSoundState",this.effectSoundState.toString())},e.setvolumeNum=function(e,t){void 0===t&&(t=""),t&&this.audioPool[t]?cc.audioEngine.setVolume(e,this.audioPool[t].soundAudioId):(cc.audioEngine.setMusicVolume(e),cc.audioEngine.setEffectsVolume(e))},e.audioPool={},e.soundState=1,e.backSoundState=1,e.effectSoundState=1,e.sourceUrl="/soundSource/",e.sourceEnd=".mp3",e.bgmArr=["BGM_1","BGM_2","BGM_3","BGM_4","BGM_5","BGM_6","BGM_7"],e.btnSound="Button_click",e.clickModifiedshop="Click_modifiedshop",e.clickAircraft="Click_R&D",e.clickWorkShop="Click_workshop",e.connonToLeft="Cannon_switch_L",e.connonToRight="Cannon_switch_R",e.upgradeHp="Cannon_hp_upgrade",e.upgradeMGun="Cannon_mgun_upgrade",e.upgradeSGun="Cannon_egun_upgrade",e.uiOpen="UI_open",e.uiClose="UI_close",e.getAircraft="RD_reward",e.unlokcAircraft="RD_unlock",e.upgradeAircraft="RD_upgrade1",e.upgradeWorkShop=["RD_upgrade1","RD_upgrade2","RD_upgrade3"],e.fightReward="Fight_reward",e.boom1="Explosion_1",e.boom2="Explosion_1",e.shoot="Fight_bullet",e.win="Fight_win",e.death="Death",e.getCoinEnd="Get_coins",e.getCoin="Fight_get_coins",e.getDiamod="Get_gems",e.getWork="Fight_get_work",e.getMagnet="Fight_get_magnet",e.getHp="Fight_get_hp",e.getAttack="Fight_get_attack",e.getRD="Fight_get_RD",e.getMissionItem="Fight_get_item",e.Fight_again="Fight_again",e.Fight_again_1="Fight_again_1",e.lastBackGroud="",e=__decorate([r],e)}());n.default=l,cc._RF.pop()},{"../Lib/LocalStorage":"LocalStorage","./LoadManager":"LoadManager"}],SpriteFrameSet:[function(e,t,n){"use strict";cc._RF.push(t,"97019Q80jpE2Yfz4zbuCZBq","SpriteFrameSet");var o=cc.Class({name:"SpriteFrameSet",properties:{language:"",spriteFrame:cc.SpriteFrame}});t.exports=o,cc._RF.pop()},{}],StringUtils:[function(e,t,n){"use strict";cc._RF.push(t,"16f3eVZjANAT5uv5oTUmcpF","StringUtils"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.trimSpace=function(e){return e.replace(/^\s*(.*?)[\s\n]*$/g,"$1")},e.prototype.replace=function(e,t,n){return void 0===n&&(n=/%d/),e.replace(n,t)},e.prototype.getStringLength=function(e){for(var t=e.split(""),n=0,o=0;o<t.length;o++){var a=t[o];this.isChinese(a)?n+=2:n+=1}return n},e.prototype.isChinese=function(e){return/^.*[\u4E00-\u9FA5]+.*$/.test(e)},e.prototype.strToArr=function(e,t){if(void 0===t&&(t=!1),!e)return[];if(e.length<1)return[];var n=(e=";"==e.charAt(e.length-1)?e.substr(0,e.length-1):e).split(";");if(t)return n;for(var o=n.length,a=0;a<o;a++)n[a].length<1?(n.splice(a,1),a--,o=n.length):Number(n[a])<1&&(n.splice(a,1),a--,o=n.length);return n},e.prototype.strToArr22=function(e){if(!e)return"";if(e.length<1)return"";for(var t=(e=";"==e.charAt(e.length-1)?e.substr(0,e.length-1):e).split(";"),n={},o=[],a=0;a<t.length;a++){var i=t[a];n[i]||(n[i]=0),n[i]++}for(var r in n)o.push([r,n[r]]);return o},e.prototype.strToArr33=function(t){if(!t)return"";if(t.length<1)return"";t=";"==t.charAt(t.length-1)?t.substr(0,t.length-1):t;for(var n=e.instance.strToArr2(t),o={},a=[],i=0;i<n.length;i++){var r=n[i].id;o[r]?o[r]+=n[i].num:o[r]=n[i].num}for(var l in o)a.push([l,o[l]]);return a},e.prototype.strToArr2=function(e,t){if(void 0===t&&(t=!1),!e)return[];for(var n=(e=";"==e.charAt(e.length-1)?e.substr(0,e.length-1):e).split(";"),o=[],a=n.length,i=0;i<a;i++)if(n[i].length>2){var r=n[i].split(":");if(t){l=new Object({id:Number(r[0]),num:Number(r[1])});o.push(l)}else if(Number(r[0])>0&&Number(r[1])>0){var l=new Object({id:Number(r[0]),num:Number(r[1])});o.push(l)}}return o},e.prototype.strToArr3=function(e){if(!e)return[];for(var t=(e=";"==e.charAt(e.length-1)?e.substr(0,e.length-1):e).split(";"),n=[],o=t.length,a=0;a<o;a++)if(t[a].length>2){var i=t[a].split(":"),r=[Number(i[0]),Number(i[1])];n.push(r)}return n},e.prototype.strToArr4=function(e){if(!e)return[];for(var t=(e=";"==e.charAt(e.length-1)?e.substr(0,e.length-1):e).split(";"),n=[],o=t.length,a=0;a<o;a++)if(t[a].length>2){var i=t[a].split(":"),r=[Number(i[0]),Number(i[1]),Number(i[2])];n.push(r)}return n},e.prototype.strToArrspecial=function(e){if(!e)return[];for(var t=(e=";"==e.charAt(e.length-1)?e.substr(0,e.length-1):e).split(";"),n=[],o=t.length,a=0;a<o;a++)if(t[a].length>2){for(var i=t[a].split(":"),r=i.length,l=[],s=0;s<r;s++)l.push(Number(i[s]));n.push(l)}return n},e.prototype.strToArr5=function(e){if(!e)return[];for(var t=(e="&"==e.charAt(e.length-1)?e.substr(0,e.length-1):e).split("&"),n=[],o=t.length,a=0;a<o;a++)if(t[a].length>2){var i=t[a].split(":"),r=[Number(i[0]),Number(i[1])];n.push(r)}return n},e.prototype.strToArr6=function(e){if(!e)return[];for(var t=(e=";"==e.charAt(e.length-1)?e.substr(0,e.length-1):e).split(";"),n=[],o=t.length,a=0;a<o;a++)if(t[a].length>2){var i=t[a].split(":"),r=new Object({rid:Number(i[0]),num:Number(i[1]),time:i[2]});n.push(r)}return n},e.prototype.strToArrWithSymbol=function(e,t,n){if(void 0===n&&(n=";"),!e)return[];for(var o=(e=e.charAt(e.length-1)==n?e.substr(0,e.length-1):e).split(n),a=[],i=o.length,r=0;r<i;r++)if(o[r].length>2){var l=o[r].split(t),s=[l[0],l[1],l[2]];a.push(s)}return a},e.prototype.addStr=function(e,t){return e.length>0&&(e+=";"),e+=t},e.prototype.arrToString=function(e){for(var t="",n=e.length,o=0;o<n;o++)t+=e[o],o!=n-1&&(t+=";");return t},e.prototype.arrToString2=function(e){for(var t="",n=e.length,o=0;o<n;o++)t+=e[o].id+":"+e[o].num,o!=n-1&&(t+=";");return t},e.prototype.arrToString3=function(e){for(var t="",n=e.length,o=0;o<n;o++)t+=e[o][0]+":"+e[o][1],o!=n-1&&(t+=";");return t},e.prototype.encodeUTF8=function(e){for(var t="",n="",o=0,a=e.length;o<a;o++)t=e.charCodeAt(o).toString(16),n+="\\u"+new Array(5-t.length).join("0")+t;return n},e.prototype.decodeUTF8=function(e){return e.replace(/(\\u)(\w{4}|\w{2})/gi,function(e,t,n){return String.fromCharCode(parseInt(n,16))})},e.prototype.idToPassword=function(e){return e.substr(0,4)+e.substr(-4,4)},e.prototype.sortFun=function(e){return function(t,n){return t[e]-n[e]}},e.prototype.sortFun2=function(e){return function(t,n){var o=t[e];return n[e]-o}},e._instance=null,e}();n.default=o,cc._RF.pop()},{}],SubConnon:[function(e,t,n){"use strict";cc._RF.push(t,"77bf6tHuaZOnaFedCV+rgY3","SubConnon"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./ConnonBase"),a=e("../../code/manager/MyRoleDataManager"),i=e("../../code/manager/SoundManager"),r=e("../../code/manager/NodePoolMananger"),l=e("../../code/Lib/Global"),s=e("../../code/manager/TableManager"),c=e("../../code/manager/PanelManager"),d=cc._decorator,u=d.ccclass,p=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lessHit=0,t.showType=!1,t}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.setShoot=function(){var e=a.default.instance.getConnonInfo(this.connonId),t=s.default.instance.connonTable.getDataById(this.connonId);c.default.game.playerScript.extraGunHit=this.bulletHit=Math.round(e.extraGun*t.m_att_b<0?0:e.extraGun*t.m_att_b),this.bulletNum=Math.floor(e.extraGun/5)+1,this.shootTemp=1/this.minShootTemp,this.schedule(this.shoot,this.minShootTemp,cc.macro.REPEAT_FOREVER)},t.prototype.shoot=function(){if(!a.default.instance.checkGameState([0,2,3,4])||this.showType){this.showType||i.default.playSoundEffect(i.default.shoot);var e=this.bulletNum;if(e%2==1){var t=17*-Math.floor((e-1)/2);this.setBulletPos(t,10*Math.floor((e-1)/2),1),this.setBulletPos(t,10*Math.floor((e-1)/2),-1);for(var n=1;n<e;n++)this.setBulletPos(t+17*n,10*(Math.floor((e-1)/2)-n),1),this.setBulletPos(t+17*n,10*(Math.floor((e-1)/2)-n),-1)}else for(t=17*-(Math.floor((e-1)/2)+1)+5,n=0;n<e;n++)this.setBulletPos(t+17*n+5,10*(Math.floor((e-1)/2)+1-n),1),this.setBulletPos(t+17*n+5,10*(Math.floor((e-1)/2)+1-n),-1)}},t.prototype.setBulletPos=function(e,t,n){var o=r.default.instance.pop("bulletPrefab");o&&!o.parent&&this.bulletNode.addChild(o),o.active=!0;var a=l.default.exactSub(this.bulletHit,Math.floor(this.bulletHit));this.lessHit=l.default.exactAdd([this.lessHit,a]),this.lessHit>=1?(o.ECScript.init(this.bulletHit+1,0),this.lessHit=l.default.exactSub(this.lessHit,1)):o.ECScript.init(this.bulletHit,0),o.ECScript.setIcon(this.bulletIcon),o.setPosition(this.node.parent.position.x+e*n+49*n,this.node.parent.position.y+35+t),o.ECScript.setSpeed(20,30*n)},t.prototype.cancelShoot=function(){this.isInShoot=!1,this.unschedule(this.shoot)},t.prototype.startShoot=function(e){this.isInShoot||(this.isInShoot=!0,this.bulletIcon=e,this.setShoot(),this.shoot())},t.prototype.setConnonIcon=function(e){this.connonSprite.spriteFrame=e},t=__decorate([u],t)}(o.default));n.default=p,cc._RF.pop()},{"../../code/Lib/Global":"Global","../../code/manager/MyRoleDataManager":"MyRoleDataManager","../../code/manager/NodePoolMananger":"NodePoolMananger","../../code/manager/PanelManager":"PanelManager","../../code/manager/SoundManager":"SoundManager","../../code/manager/TableManager":"TableManager","./ConnonBase":"ConnonBase"}],TableManager:[function(e,t,n){"use strict";cc._RF.push(t,"8934fvnGjVC958MZ52uPlbJ","TableManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../src/table/scenceTable"),a=e("../../src/table/ConnonTable"),i=e("../../src/table/BulletTable"),r=e("./LoadManager"),l=e("../../src/table/ShopTable"),s=e("../../src/table/AircraftTable"),c=e("../../src/table/PropTable"),d=e("../../src/table/WorkShopTable"),u=e("../../src/table/MapLevelTable"),p=e("../../src/table/MissionTable"),h=e("../../src/table/GuideTable"),f=cc._decorator,g=f.ccclass,m=(f.property,function(){function e(){}var t;return t=e,Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){var e=r.default.instance.getRes("/json/gamedata",cc.JsonAsset).json;this.scenceTable=new o.default(e.scence),this.connonTable=new a.default(e.connon),this.bulletTable=new i.default(e.bullet,e.coin),this.shopTable=new l.default(e.shop),this.aircraftTable=new s.default(e.aircraft),this.propTable=new c.default(e.prop),this.workShopTable=new d.default(e.workshop),this.mapLevelTable=new u.default(e.mapLevel),this.missionTable=new p.default(e.mission),this.guideTable=new h.default(e.guide)},e=t=__decorate([g],e)}());n.default=m,cc._RF.pop()},{"../../src/table/AircraftTable":"AircraftTable","../../src/table/BulletTable":"BulletTable","../../src/table/ConnonTable":"ConnonTable","../../src/table/GuideTable":"GuideTable","../../src/table/MapLevelTable":"MapLevelTable","../../src/table/MissionTable":"MissionTable","../../src/table/PropTable":"PropTable","../../src/table/ShopTable":"ShopTable","../../src/table/WorkShopTable":"WorkShopTable","../../src/table/scenceTable":"ScenceTable","./LoadManager":"LoadManager"}],TimeCount:[function(e,t,n){"use strict";cc._RF.push(t,"7a0dcaROyxKCqw5Ckg0G7W1","TimeCount"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Global"),a=function(){function e(){this.pool={}}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.startCount=function(e){var t=o.default.getTime();this.pool[e]=[],this.pool[e].push([t])},e.prototype.pauseCount=function(e){if(this.pool[e]){var t=o.default.getTime(),n=this.pool[e].pop();n[1]=t,this.pool[e].push(n)}else cc.warn(" TimeCount "+e+"do not start count")},e.prototype.resumeCount=function(e){this.pool[e]||(this.pool[e]=[]);var t=o.default.getTime();this.pool[e].push([t])},e.prototype.endCount=function(e){if(this.pool[e]){var t=o.default.getTime(),n=this.pool[e].pop();n[1]=t,this.pool[e].push(n)}else cc.warn(" TimeCount "+e+"do not start count")},e.prototype.getTimeCount=function(e,t){if(void 0===t&&(t=!1),!this.pool[e])return cc.warn(" TimeCount "+e+"do not start count"),0;for(var n=0,o=this.pool[e],a=o.length,i=0;i<a;i++){var r=o[i];n+=r[1]-r[0]}return t&&delete this.pool[e],console.log("TimeCount",n),n},e}();n.default=a,cc._RF.pop()},{"./Global":"Global"}],UiAniManager:[function(e,t,n){"use strict";cc._RF.push(t,"0da39o/K5hHVqOddHeaFep4","UiAniManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./LoadManager"),a=cc._decorator,i=a.ccclass,r=(a.property,function(){function e(){}return e.init=function(){return __awaiter(this,void 0,void 0,function(){var e,t,n;return __generator(this,function(a){switch(a.label){case 0:return[4,o.default.instance.loadResByUrl(this.sourceUrl,!0)];case 1:for(t in e=a.sent())n=e[t],this.clipPool.set(n.name,n);return[2]}})})},e.getUiClip=function(e){var t=this.clipPool.get(e);return t||cc.warn("\u6ca1\u6709 "+e+" AnimationClip\u8d44\u6e90"),t},e.clipPool=new Map,e.sourceUrl="UIAniClip/",e=__decorate([i],e)}());n.default=r,function(e){e.Null="null",e.TopToDown="topToDown",e.BigToSmall="bigToSmall",e.AlphaChange="alphaChange",e.AircraftPanel="aircraftPanel",e.ShopPanel="shopPanel",e.MissionPanel="missionPanel",e.RefitShopPanelPanel="refitShopPanelPanel"}(n.UiAniType||(n.UiAniType={})),function(e){e.OUT="Out",e.IN="In"}(n.InOrOut||(n.InOrOut={})),cc._RF.pop()},{"./LoadManager":"LoadManager"}],WorkItem:[function(e,t,n){"use strict";cc._RF.push(t,"682aaYFfQpDLJxaQjvpWrfM","WorkItem"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../code/manager/MyRoleDataManager"),a=e("../../../code/manager/PanelManager"),i=e("../../../code/Lib/Global"),r=e("../../../code/manager/TableManager"),l=e("../../../code/Config/Config"),s=e("../../../code/manager/SoundManager"),c=e("../LatticeProgress"),d=e("../../../code/manager/SDKManager"),u=cc._decorator,p=u.ccclass,h=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.infoBtn=null,t.levelUpBtn=null,t.pro=null,t.proLable=null,t.nameLable=null,t.goldLable=null,t.goldLableShadow=null,t.unlockLable=null,t.levelNode=null,t.unlockNode=null,t.icon=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.levelUpBtn.node.on("click",this.levelUpTap,this),this.infoBtn.node.on("click",this.infoBtnTap,this),this.node.getComponent(cc.Button).node.on("click",this.infoBtnTap,this),this.levelUpBtn.enableAutoGrayEffect=!0},t.prototype.init=function(e,t){this.icon.spriteFrame=t,this.propId=e,this.setLable()},t.prototype.setLable=function(){this.nameLable.string=GlobalFun.i18n.t("lable."+r.default.instance.workShopTable.getName(this.propId))},t.prototype.updateInfo=function(){var e=r.default.instance.workShopTable.getInfo(this.propId),t=o.default.instance.getPropLevel(this.propId);return o.default.instance.curLevel>=e.unlock?(this.isUnlock=!0,this.levelNode.active=!0,this.unlockNode.active=!1):(this.isUnlock=!1,this.levelNode.active=!1,this.unlockNode.active=!0,this.unlockLable.string="Reach level "+e.unlock),this.upgradeMoney=r.default.instance.workShopTable.getCountMoney(this.propId,t),this.goldLableShadow.string=this.goldLable.string=i.default.setNum(this.upgradeMoney),this.levelUpBtn.enabled=t-1<e.max_level,this.proLable.string=t-1+"/"+e.max_level,this.pro.getComponent(c.default).pro=t-1,this.isUnlock},t.prototype.levelUpTap=function(){o.default.instance.dleCurrency(this.upgradeMoney)?(d.default.instance.callJava("trackEventWithType","(Ljava/lang/String;Ljava/lang/String;I)V","LevelUpProp",this.propId.toString(),1),s.default.playSoundEffect(i.default.arrRandom(s.default.upgradeWorkShop)),o.default.instance.propLevelUp(this.propId),a.default.gameUi.updataGold(),this.updateInfo(),a.default.instance.getExistPanel(l.PanelName.WorkShopPanel).sortItem()):a.default.instance.openPanel(l.PanelName.GoShopPanel,a.default.gameUi.middleNode)},t.prototype.infoBtnTap=function(){var e=r.default.instance.workShopTable.getDes(this.propId);a.default.instance.getExistPanel(l.PanelName.WorkShopPanel).updateTalkLable(GlobalFun.i18n.t("lable."+e))},__decorate([h({type:cc.Button,tooltip:"\u95ee\u53f7\u6309\u94ae"})],t.prototype,"infoBtn",void 0),__decorate([h({type:cc.Button,tooltip:"\u5347\u7ea7\u6309\u94ae"})],t.prototype,"levelUpBtn",void 0),__decorate([h({type:cc.Node,tooltip:"\u5347\u7ea7\u8fdb\u5ea6"})],t.prototype,"pro",void 0),__decorate([h({type:cc.Label,tooltip:"\u5347\u7ea7\u8fdb\u5ea6\u6587\u672c"})],t.prototype,"proLable",void 0),__decorate([h({type:cc.Label,tooltip:"\u540d\u5b57\u6587\u672c"})],t.prototype,"nameLable",void 0),__decorate([h({type:cc.Label,tooltip:"\u5347\u7ea7\u94b1\u6587\u672c"})],t.prototype,"goldLable",void 0),__decorate([h({type:cc.Label,tooltip:"\u5347\u7ea7\u94b1\u6587\u672c\u9634\u5f71"})],t.prototype,"goldLableShadow",void 0),__decorate([h({type:cc.Label,tooltip:"\u89e3\u9501\u6587\u672c"})],t.prototype,"unlockLable",void 0),__decorate([h({type:cc.Node,tooltip:"\u5347\u7ea7\u8282\u70b9"})],t.prototype,"levelNode",void 0),__decorate([h({type:cc.Node,tooltip:"\u672a\u89e3\u9501\u8282\u70b9"})],t.prototype,"unlockNode",void 0),__decorate([h({type:cc.Sprite,tooltip:"icon"})],t.prototype,"icon",void 0),t=__decorate([p],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../../../code/Config/Config":"Config","../../../code/Lib/Global":"Global","../../../code/manager/MyRoleDataManager":"MyRoleDataManager","../../../code/manager/PanelManager":"PanelManager","../../../code/manager/SDKManager":"SDKManager","../../../code/manager/SoundManager":"SoundManager","../../../code/manager/TableManager":"TableManager","../LatticeProgress":"LatticeProgress"}],WorkShopPanel:[function(e,t,n){"use strict";cc._RF.push(t,"1eb15Yby69Mq7eiyc1xXooV","WorkShopPanel"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../code/manager/UiAniManager"),a=e("../../../code/manager/PanelManager"),i=e("../../../code/Config/Config"),r=e("../../../code/manager/TableManager"),l=e("../../../code/manager/SoundManager"),s=e("./WorkItem"),c=e("../../../code/manager/NodePoolMananger"),d=e("../../../code/basecode/BasePanel"),u=cc._decorator,p=u.ccclass,h=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nameLable=null,t.talkLable=null,t.okButton=null,t.workPrefab=null,t.itemNode=null,t.scrollNode=null,t.widgetNode0=null,t.widgetNode1=null,t.iconAtlas=null,t.showNode=null,t.itemArr=[],t._aniType=o.UiAniType.AircraftPanel,t}return __extends(t,e),t.prototype.onLoad=function(){var e=r.default.instance.workShopTable.tableObj;for(var t in e){var n=e[t];if(n){var o=cc.instantiate(this.workPrefab);this.itemNode.addChild(o);var a=o.getComponent(s.default);a.init(n.id,this.iconAtlas.getSpriteFrame(n.icon)),this.itemArr.push(a)}}},t.prototype.stepShow=function(e){var t=this;if(e)for(var n=this.itemNode.children.length,o=function(e){a.scheduleOnce(function(){t.itemNode.children[e].active=!0,e==n-1&&t.sortItem()},.05*e)},a=this,i=0;i<n;i++)o(i);else{var r=this.itemNode.children.length;for(i=0;i<r;i++)this.itemNode.children[i].active=!1}},t.prototype.openPanel=function(){this.addEvent(),this.playUIAni(o.InOrOut.IN),this.setLable(),this.scrollNode.scrollToOffset(cc.v2(0,0)),this.sortItem()},t.prototype.closePanel=function(){a.default.gameUi.btnTishi(),this.dleEvent(),this.playUIAni(o.InOrOut.OUT),l.default.playSoundEffect(l.default.btnSound)},t.prototype.panelIn=function(){this.scrollNode.content.active=!0,this.stepShow(!0),this.showNode=c.default.instance.pop(a.default.game.showPrefab.name),this.widgetNode0.addChild(this.showNode),this.showNode.getComponent("ShowPrefab").startShow()},t.prototype.panelOut=function(){a.default.instance.deleteOpen(i.PanelName.WorkShopPanel),this.node.removeFromParent(),this.showNode.getComponent("ShowPrefab").stopShow(1),this.showNode.removeFromParent(),c.default.instance.push(this.showNode),this.stepShow(!1),this.scrollNode.content.active=!1},t.prototype.addEvent=function(){this.okButton.node.on("click",this.okButtonTap,this)},t.prototype.dleEvent=function(){this.okButton.node.off("click",this.okButtonTap,this)},t.prototype.updateTalkLable=function(e){this.talkLable.string=e},t.prototype.setLable=function(){this.nameLable.string=GlobalFun.i18n.t("lable.10097"),this.talkLable.string=GlobalFun.i18n.t("lable.10098");for(var e=this.itemArr.length,t=0;t<e;t++)this.itemArr[t].setLable()},t.prototype.sortItem=function(){for(var e=this.itemArr.length,t=0;t<e;t++){var n=this.itemArr[t].updateInfo();this.itemArr[t].node.zIndex=n?t:e+1}},t.prototype.okButtonTap=function(){a.default.instance.closePanel(i.PanelName.WorkShopPanel)},__decorate([h({type:cc.Label,tooltip:"\u540d\u5b57lable"})],t.prototype,"nameLable",void 0),__decorate([h({type:cc.Label,tooltip:"\u540d\u5b57lable"})],t.prototype,"talkLable",void 0),__decorate([h({type:cc.Button,tooltip:"ok\u6309\u94ae"})],t.prototype,"okButton",void 0),__decorate([h({type:cc.Prefab,tooltip:"\u9053\u5177\u9884\u5236\u4f53"})],t.prototype,"workPrefab",void 0),__decorate([h({type:cc.Node,tooltip:"item\u8282\u70b9"})],t.prototype,"itemNode",void 0),__decorate([h({type:cc.ScrollView,tooltip:"\u6ed1\u52a8"})],t.prototype,"scrollNode",void 0),__decorate([h({type:cc.Node,tooltip:"\u9002\u914d\u4f7f\u7528"})],t.prototype,"widgetNode0",void 0),__decorate([h({type:cc.Node,tooltip:"\u9002\u914d\u4f7f\u7528"})],t.prototype,"widgetNode1",void 0),__decorate([h({type:cc.SpriteAtlas,tooltip:"icon\u8d44\u6e90"})],t.prototype,"iconAtlas",void 0),t=__decorate([p],t)}(d.default);n.default=f,cc._RF.pop()},{"../../../code/Config/Config":"Config","../../../code/basecode/BasePanel":"BasePanel","../../../code/manager/NodePoolMananger":"NodePoolMananger","../../../code/manager/PanelManager":"PanelManager","../../../code/manager/SoundManager":"SoundManager","../../../code/manager/TableManager":"TableManager","../../../code/manager/UiAniManager":"UiAniManager","./WorkItem":"WorkItem"}],WorkShopTable:[function(e,t,n){"use strict";cc._RF.push(t,"c6f41GidOlBuYKbjw6P9p0Z","WorkShopTable"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../code/manager/MyRoleDataManager"),a=e("../../code/Lib/Global"),i=function(){function e(e){this.tableObj={};for(var t=0;t<e.length;t++){var n=e[t];n&&(this.tableObj[n.id]=n)}}return e.prototype.getRandomSpecial=function(){var e=[];for(var t in this.tableObj){var n=this.tableObj[t];n&&n.unlock>o.default.instance.curLevel&&1==n.type&&e.push(n.id)}return a.default.arrRandom(e)},e.prototype.getInfo=function(e){return this.tableObj[e]?this.tableObj[e]:(cc.warn("WorkShopTable getInfo: Do not have id "+e),"")},e.prototype.getName=function(e){return this.tableObj[e]?this.tableObj[e].name:(cc.warn("WorkShopTable getName: Do not have id "+e),"")},e.prototype.getDes=function(e){return this.tableObj[e]?this.tableObj[e].des:(cc.warn("WorkShopTable getDex: Do not have id "+e),{})},e.prototype.getCountMoney=function(e,t){var n=this.tableObj[e];return n?Math.floor(Math.pow(n.money_c,t)*n.money):(cc.warn("WorkShopTable getCountMoney: Do not have id "+e),0)},e.prototype.getCount=function(e,t){var n=this.tableObj[e];return n?n.basic_number*t/1e3:(cc.warn("WorkShopTable getCount: Do not have id "+e),0)},e}();n.default=i,cc._RF.pop()},{"../../code/Lib/Global":"Global","../../code/manager/MyRoleDataManager":"MyRoleDataManager"}],colorChange:[function(e,t,n){"use strict";cc._RF.push(t,"254c7Ns2UlMbKDBxQTbSIHr","colorChange"),cc.game.once(cc.game.EVENT_ENGINE_INITED,function(){var e={name:"colorchage",defines:[],vert:"\n            uniform mat4 viewProj;\n            uniform mat4 model;\n            attribute vec3 a_position;\n            attribute vec2 a_uv0;\n            varying vec2 uv0;\n            void main () {\n                mat4 mvp;\n                mvp = viewProj * model;\n    \n                vec4 pos = mvp * vec4(a_position, 1);\n                gl_Position = pos;\n                uv0 = a_uv0;\n            }\n        ",frag:"\n        #ifdef GL_ES  \n        precision mediump float;  \n        #endif  \n        \n        uniform sampler2D CC_Texture0;\n        varying vec2 uv0;\n        uniform float u_dH;\n        uniform float u_dS;  \n        uniform float u_dL;  \n          \n        void main() {  \n          \n            vec4 texColor=texture2D(CC_Texture0, uv0);\n            float r=texColor.r;  \n            float g=texColor.g;  \n            float b=texColor.b;  \n            float a=texColor.a;  \n            //convert rgb to hsl  \n            float h;  \n            float s;\n            float l;  \n            {\n                float max=max(max(r,g),b);  \n                float min=min(min(r,g),b);  \n                //----h  \n                if(max==min){  \n          \n                    h=0.0;  \n                }else if(max==r&&g>=b){  \n                    h=60.0*(g-b)/(max-min)+0.0;  \n                }else if(max==r&&g<b){  \n                    h=60.0*(g-b)/(max-min)+360.0;  \n                }else if(max==g){  \n                    h=60.0*(b-r)/(max-min)+120.0;  \n                }else if(max==b){  \n                    h=60.0*(r-g)/(max-min)+240.0;  \n                }  \n                //----l  \n                l=0.5*(max+min);  \n                //----s  \n                if(l==0.0||max==min){  \n                    s=0.0;  \n                }else if(0.0<=l&&l<=0.5){  \n                    s=(max-min)/(2.0*l);  \n                }else if(l>0.5){  \n                    s=(max-min)/(2.0-2.0*l);  \n                }  \n            }  \n            //(h,s,l)+(dH,dS,dL) -> (h,s,l)  \n            h=h+u_dH;  \n            s=min(1.0,max(0.0,s+u_dS));  \n            l=l+u_dL;  \n            //convert (h,s,l) to rgb and got final color  \n            vec4 finalColor;  \n            {  \n                float q;  \n                if(l<0.5){  \n                    q=l*(1.0+s);  \n                }else if(l>=0.5){  \n                    q=l+s-l*s;  \n                }  \n                float p=2.0*l-q;  \n                float hk=h/360.0;  \n                float t[3];  \n                t[0]=hk+1.0/3.0;t[1]=hk;t[2]=hk-1.0/3.0;  \n                for(int i=0;i<3;i++){  \n                    if(t[i]<0.0)t[i]+=1.0;  \n                    if(t[i]>1.0)t[i]-=1.0;  \n                }//got t[i]  \n                float c[3];  \n                for(int i=0;i<3;i++){  \n                    if(t[i]<1.0/6.0){  \n                        c[i]=p+((q-p)*6.0*t[i]);  \n                    }else if(1.0/6.0<=t[i]&&t[i]<0.5){  \n                        c[i]=q;  \n                    }else if(0.5<=t[i]&&t[i]<2.0/3.0){  \n                        c[i]=p+((q-p)*6.0*(2.0/3.0-t[i]));  \n                    }else{  \n                        c[i]=p;  \n                    }  \n                }  \n                finalColor=vec4(c[0],c[1],c[2],a);  \n            }  \n          \n            finalColor+=vec4(u_dL,u_dL,u_dL,0.0);  \n            \n    \n            gl_FragColor=finalColor;  \n          \n        }  \n        "};cc.renderer._forward._programLib.define(e.name,e.vert,e.frag,e.defines),t.exports=e}),cc._RF.pop()},{}],"gray.frag":[function(e,t,n){"use strict";cc._RF.push(t,"c4799TkSORFBZ6nVbJF2bXF","gray.frag"),t.exports="\n#ifdef GL_ES  \nprecision mediump float;  \n#endif  \n  \nvarying vec2 v_texCoord;  \nuniform float u_dH;  \nuniform float u_dS;  \nuniform float u_dL;  \n  \nvoid main() {  \n  \n    vec4 texColor=texture2D(CC_Texture0, v_texCoord);  \n    float r=texColor.r;  \n    float g=texColor.g;  \n    float b=texColor.b;  \n    float a=texColor.a;  \n    //convert rgb to hsl  \n    float h;  \n    float s;\n    float l;  \n    {\n        float max=max(max(r,g),b);  \n        float min=min(min(r,g),b);  \n        //----h  \n        if(max==min){  \n  \n            h=0.0;  \n        }else if(max==r&&g>=b){  \n            h=60.0*(g-b)/(max-min)+0.0;  \n        }else if(max==r&&g<b){  \n            h=60.0*(g-b)/(max-min)+360.0;  \n        }else if(max==g){  \n            h=60.0*(b-r)/(max-min)+120.0;  \n        }else if(max==b){  \n            h=60.0*(r-g)/(max-min)+240.0;  \n        }  \n        //----l  \n        l=0.5*(max+min);  \n        //----s  \n        if(l==0.0||max==min){  \n            s=0.0;  \n        }else if(0.0<=l&&l<=0.5){  \n            s=(max-min)/(2.0*l);  \n        }else if(l>0.5){  \n            s=(max-min)/(2.0-2.0*l);  \n        }  \n    }  \n    //(h,s,l)+(dH,dS,dL) -> (h,s,l)  \n    h=h+u_dH;  \n    s=min(1.0,max(0.0,s+u_dS));  \n    l=l+u_dL;  \n    //convert (h,s,l) to rgb and got final color  \n    vec4 finalColor;  \n    {  \n        float q;  \n        if(l<0.5){  \n            q=l*(1.0+s);  \n        }else if(l>=0.5){  \n            q=l+s-l*s;  \n        }  \n        float p=2.0*l-q;  \n        float hk=h/360.0;  \n        float t[3];  \n        t[0]=hk+1.0/3.0;t[1]=hk;t[2]=hk-1.0/3.0;  \n        for(int i=0;i<3;i++){  \n            if(t[i]<0.0)t[i]+=1.0;  \n            if(t[i]>1.0)t[i]-=1.0;  \n        }//got t[i]  \n        float c[3];  \n        for(int i=0;i<3;i++){  \n            if(t[i]<1.0/6.0){  \n                c[i]=p+((q-p)*6.0*t[i]);  \n            }else if(1.0/6.0<=t[i]&&t[i]<0.5){  \n                c[i]=q;  \n            }else if(0.5<=t[i]&&t[i]<2.0/3.0){  \n                c[i]=p+((q-p)*6.0*(2.0/3.0-t[i]));  \n            }else{  \n                c[i]=p;  \n            }  \n        }  \n        finalColor=vec4(c[0],c[1],c[2],a);  \n    }  \n  \n    finalColor+=vec4(u_dL,u_dL,u_dL,0.0);  \n  \n    gl_FragColor=finalColor;  \n  \n}  \n",cc._RF.pop()},{}],"gray.vert":[function(e,t,n){"use strict";cc._RF.push(t,"1b297QlOJxFzZ69JuN362gl","gray.vert"),t.exports="\nattribute vec4 a_position;\nattribute vec2 a_texCoord;\nattribute vec4 a_color;\nvarying vec4 v_fragmentColor; \nvarying vec2 v_texCoord; \nvoid main() \n{ \n    gl_Position = CC_PMatrix * a_position;\n    v_fragmentColor = a_color; \n    v_texCoord = a_texCoord; \n}\n",cc._RF.pop()},{}],languageText:[function(e,t,n){"use strict";cc._RF.push(t,"a5aaeP4ECVGNL25gVXLyvrv","languageText"),window.i18n||(window.i18n={}),window.i18n.languages||(window.i18n.languages={}),window.i18n.languages.languageText=[{id:"10000",cn:"\u7b80\u4f53\u4e2d\u6587",en:"English"},{id:"10001",cn:"\u8bed\u8a00",en:"language"},{id:"10002",cn:"\u6ed1\u52a8\u5c4f\u5e55\u5f00\u59cb\u5c04\u51fb",en:"Swipe to SHOOT"},{id:"10003",cn:"\u6bcf\u5c0f\u65f61\u94bb\u77f3",en:"1 Gems /h"},{id:"10004",cn:"\u5269\u4f59\u65f6\u95f4\uff1a",en:"Lasts for:"},{id:"10005",cn:"\u65f6",en:"h"},{id:"10006",cn:"\u5206",en:"m"},{id:"10007",cn:"\u79d2",en:"s"},{id:"10008",cn:"\u8bbe\u7f6e",en:"SETTING"},{id:"10009",cn:"OK",en:"OK"},{id:"10010",cn:"\u89c2\u770b",en:"More"},{id:"10011",cn:"\u7ae0\u82821",en:"Unlock: Level 20"},{id:"10012",cn:"\u7ae0\u82822",en:"Unlock: Level 40"},{id:"10013",cn:"\u7ae0\u82823",en:"Unlock: Level 60"},{id:"10014",cn:"\u7ae0\u82824",en:"Unlock: Level 80"},{id:"10015",cn:"\u7ae0\u82825",en:"Unlock: Level 100"},{id:"10016",cn:"\u7ae0\u82826",en:"Unlock: Level 120"},{id:"10017",cn:"\u7ae0\u82827",en:"Unlock: Level 140"},{id:"10018",cn:"\u7ae0\u82828",en:"Unlock: Level 160"},{id:"10019",cn:"\u7ae0\u82829",en:"Unlock: Level 180"},{id:"10020",cn:"\u7ae0\u828210",en:"Unlock: Level 200"},{id:"10021",cn:"\u7ae0\u828211",en:"Unlock: Level 220"},{id:"10022",cn:"\u7ae0\u828212",en:"Unlock: Level 240"},{id:"10023",cn:"\u7ae0\u828213",en:"Unlock: Level 260"},{id:"10024",cn:"\u7ae0\u828214",en:"Unlock: Level 280"},{id:"10025",cn:"\u7ae0\u828215",en:"Unlock: Level 300"},{id:"10026",cn:"\u7ae0\u828216",en:"Unlock: Level 320"},{id:"10027",cn:"\u7ae0\u828217",en:"Unlock: Level 340"},{id:"10028",cn:"\u7ae0\u828218",en:"Unlock: Level 360"},{id:"10029",cn:"\u7ae0\u828219",en:"Unlock: Level 380"},{id:"10030",cn:"\u7ae0\u828220",en:"Unlock: Level 400"},{id:"10031",cn:"\u7ae0\u828221",en:"Unlock: Level 420"},{id:"10032",cn:"\u7ae0\u828222",en:"Unlock: Level 440"},{id:"10033",cn:"\u7ae0\u828223",en:"Unlock: Level 460"},{id:"10034",cn:"\u7ae0\u828224",en:"Unlock: Level 480"},{id:"10035",cn:"\u7ae0\u828225",en:"Unlock: Level 500"},{id:"10036",cn:"\u7ae0\u828226",en:"Unlock: Level 520"},{id:"10037",cn:"\u7ae0\u828227",en:"Unlock: Level 540"},{id:"10038",cn:"\u7ae0\u828228",en:"Unlock: Level 560"},{id:"10039",cn:"\u7ae0\u828229",en:"Unlock: Level 580"},{id:"10040",cn:"\u7ae0\u828230",en:"Unlock: Level 600"},{id:"10041",cn:"\u901a\u5173\u5956\u52b1\uff1a",en:"Pass rewards:"},{id:"10042",cn:"\u6539\u88c5\u5e97",en:"MODIFIED SHOP"},{id:"10043",cn:"\u563f\uff0c\u4f19\u8ba1\uff01\u60f3\u8981\u6362\u4e2a\u66f4\u5927\u70b9\u513f\u7684\u5417\uff1f",en:"Hi, man!Do you want a bigger one?"},{id:"10044",cn:"\u98ce\u66b4",en:"Storm"},{id:"10045",cn:"\u73ed\u5409",en:"Benji"},{id:"10046",cn:"\u6218\u795e",en:"Ares"},{id:"10047",cn:"\u773c\u955c\u86c7",en:"Cobra"},{id:"10048",cn:"\u5148\u950b",en:"Pioneer"},{id:"10049",cn:"\u66b4\u718a",en:"Bear"},{id:"10050",cn:"\u8dc3\u52a8",en:"Movement"},{id:"10051",cn:"\u7eff\u9b54\u9b3c",en:"Green Devils"},{id:"10052",cn:"\u6218\u621f",en:"Battle Spear"},{id:"10053",cn:"\u8ffd\u51fb\u8005",en:"Chaser"},{id:"10054",cn:"\u5149\u8000-\u2168",en:"Glorious-\u2178"},{id:"10055",cn:"\u6697\u5203",en:"Dark Edge"},{id:"10056",cn:"\u5927\u9ec4\u8702",en:"Bumblebee"},{id:"10057",cn:"\u9ca8\u9f7f",en:"Shark tooth"},{id:"10058",cn:"\u9738\u738b",en:"Overlord"},{id:"10059",cn:"\u540e\u7eed\u70ae16",en:"later16"},{id:"10060",cn:"\u540e\u7eed\u70ae17",en:"later17"},{id:"10061",cn:"\u540e\u7eed\u70ae18",en:"later18"},{id:"10062",cn:"\u540e\u7eed\u70ae19",en:"later19"},{id:"10063",cn:"\u540e\u7eed\u70ae20",en:"later20"},{id:"10064",cn:"\u540e\u7eed\u70ae21",en:"later21"},{id:"10065",cn:"\u540e\u7eed\u70ae22",en:"later22"},{id:"10066",cn:"\u540e\u7eed\u70ae23",en:"later23"},{id:"10067",cn:"\u540e\u7eed\u70ae24",en:"later24"},{id:"10068",cn:"\u540e\u7eed\u70ae25",en:"later25"},{id:"10069",cn:"\u540e\u7eed\u70ae26",en:"later26"},{id:"10070",cn:"\u540e\u7eed\u70ae27",en:"later27"},{id:"10071",cn:"\u540e\u7eed\u70ae28",en:"later28"},{id:"10072",cn:"\u540e\u7eed\u70ae29",en:"later29"},{id:"10073",cn:"\u540e\u7eed\u70ae30",en:"later30"},{id:"10074",cn:"\u62a4\u7532",en:"Armor"},{id:"10075",cn:"\u673a\u67aa",en:"Machine Gun"},{id:"10076",cn:"\u989d\u5916\u67aa\u652f",en:"Extra Guns"},{id:"10077",cn:"\u4f7f\u7528\u8fd9\u4e2a\u70ae\u4f1a\u7ed9\u4f60\uff1a",en:"This cannon will give you:"},{id:"10078",cn:"\u66f4\u591a\u7684\u786c\u5e01",en:"More Coins"},{id:"10079",cn:"\u66f4\u5f3a\u5927\u7684\u706b\u529b",en:"Stronger Firepower"},{id:"10080",cn:"\u65b0\u7684\u654c\u4eba",en:"New Enemies"},{id:"10081",cn:"\u98de\u884c\u5668\u7814\u53d1",en:"AIRCRAFT R&D"},{id:"10082",cn:"\u7ed9\u6211\u82af\u7247!\n    \u6211\u7ed9\u4f60\u6253\u9020\u6700\u597d\u7684\u98de\u884c\u5668\uff01",en:"Give me the chip,\n    I'll give you the latest gear!"},{id:"10083",cn:"\u65e0\u4eba\u673a\u5b9d\u7bb1",en:"Drone Box"},{id:"10084",cn:"\u5305\u542b\u4e0b\u5217\u968f\u673a\u7269\u54c1\uff0c\u65e0\u4eba\u673a\u3001\u5bfc\u5f39\u3001\u6fc0\u5149\u3001\u706b\u7bad\u7b49\u7b49\uff01",en:"Contains a random selection of Drones! Missiles, lasers,rocket, and more!"},{id:"10085",cn:"\u5bfb\u6807\u706b\u7bad",en:"Homing Rocket"},{id:"10086",cn:"\u673a\u5173\u67aa",en:"Machine Gun"},{id:"10087",cn:"\u5bfc\u5f39\u53d1\u5c04\u5668",en:"Missile Launcher"},{id:"10088",cn:"\u7535\u6d46\u70ae",en:"Plasma Cannon"},{id:"10089",cn:"\u6fc0\u5149\u5207\u5272\u673a",en:"Laser Cutting"},{id:"10090",cn:"\u5f3a\u529b\u62a4\u76fe",en:"Power Shield"},{id:"10091",cn:"\u8ffd\u8e2a\u5f31\u5c0f\u654c\u4eba\uff01",en:"Heat seeking propelled rockets!"},{id:"10092",cn:"\u8fde\u7eed\u53d1\u5c04\u7a7f\u7532\u5b50\u5f39\uff01",en:"Continuous firing of armour-piercing bullets!"},{id:"10093",cn:"\u53d1\u5c04110mm\u7206\u88c2\u5f39\uff01",en:"Launch 110mm bursting bomb!"},{id:"10094",cn:"\u805a\u7126\u7535\u6d46\u878d\u5316\u654c\u4eba\uff01",en:"Focused plasma melts enemies!"},{id:"10095",cn:"\u591a\u4e2a\u9ad8\u9891\u7387\u80fd\u91cf\u6fc0\u5149\uff01",en:"Multiple high-frequency energy lasers!"},{id:"10096",cn:"\u80fd\u91cf\u62a4\u7f69\u963b\u6321\u4e00\u5b9a\u4f24\u5bb3\uff01",en:"Energy weave blocks damage!"},{id:"10097",cn:"\u5de5\u4f5c\u5ba4",en:"WORK SHOP"},{id:"10098",cn:"\u5f88\u9ad8\u5174\u89c1\u5230\u4f60\uff01\n     \u6709\u4ec0\u4e48\u53ef\u4ee5\u5e2e\u60a8\u7684\uff1f",en:"Very high heart to see you!\n      What can I help you with?"},{id:"10099",cn:"\u66b4\u98ce\u96e8",en:"Tempest"},{id:"10100",cn:"\u6fc0\u5149\u5207\u5272",en:"Laser Cutting"},{id:"10101",cn:"\u706b\u529b\u5168\u5f00",en:"Full Fire"},{id:"10102",cn:"\u5438\u94c1",en:"Magnetic Field"},{id:"10103",cn:"\u533b\u7597\u5305",en:"Health Pack"},{id:"10104",cn:"\u4f24\u5bb3\u52a0\u6210",en:"Damage Boost"},{id:"10105",cn:"\u786c\u5e01\u52a0\u6210",en:"Coin Boost"},{id:"10106",cn:"\u6bcf\u7b49\u7ea7\u53ef\u83b7\u5f9710%\u7684\u989d\u5916\u706b\u529b\uff01",en:"10% extra firepower per grade!"},{id:"10107",cn:"\u6bcf\u7b49\u7ea7\u53ef\u83b7\u5f9715%\u7684\u989d\u5916\u706b\u529b\uff01",en:"15% extra firepower per grade!"},{id:"10108",cn:"\u6bcf\u7b49\u7ea7\u53ef\u83b7\u5f975%\u7684\u989d\u5916\u706b\u529b\uff01",en:"5% extra firepower per grade!"},{id:"10109",cn:"\u78c1\u94c1\u65f6\u95f4\u66f4\u52a0\u6301\u4e45\uff01",en:"More durable Magnets!"},{id:"10110",cn:"\u63d0\u5347\u533b\u7597\u5305\u6062\u590d\u6548\u679c\uff01",en:"Improve the effect of repairing your cannon!"},{id:"10111",cn:"\u63d0\u5347\u4f24\u5bb3\u52a0\u6210\u65f6\u95f4\uff01",en:"Boosted firepower lasts longer!"},{id:"10112",cn:"\u6bcf\u7b49\u7ea7\u53ef\u83b7\u5f9710%\u7684\u989d\u5916\u786c\u5e01\uff01",en:"Earn 10% extra coins per grade!"},{id:"10113",cn:"\u4efb\u52a1",en:"JOBS"},{id:"10114",cn:"\u8be5\u6b7b\u7684\uff01\u4f60\u6709\u770b\u5230\u6211\u4fee\u7406\u65f6\u7528\u7684\u87ba\u4e1d\u9489\u5417\uff1f",en:"Oh, shit! Did you see the screw I used to fix it?"},{id:"10115",cn:"\u5e2e\u6211\u627e\u5230\u90a3\u4e9b\u87ba\u4e1d\u9489\uff0c\u6211\u4f1a\u7ed9\u4f60\u610f\u60f3\u4e0d\u5230\u7684\u597d\u5904\uff01",en:"Help me find those screws, I will give you unexpected benefits!"},{id:"10116",cn:"\u6211\u5e0c\u671b\u5728\u9634\u6697\u7684\u5de5\u4f5c\u5ba4\u91cc\u6709\u66f4\u591a\u7684\u706f\u5149\u5149\uff01",en:"I want some more light in the dark Studio!"},{id:"10117",cn:"\u6709\u706f\u5149\u7684\u7167\u8000\uff0c\u624d\u662f\u6211\u559c\u6b22\u7684\u5de5\u4f5c\u65b9\u5f0f\uff01",en:"With these lamps, I feel the work more enjoyable!"},{id:"10118",cn:"\u4f60\u6709\u591a\u5b88\u65f6\uff0c\u5c31\u80fd\u6709\u591a\u4f18\u79c0\uff01",en:"Punctual! is a good habit!"},{id:"10119",cn:"\u8fd9\u53ef\u662f\u7ecf\u5178\u6b3e\u6000\u8868\uff0c\u4f60\u53ef\u522b\u5f04\u574f\u4e86\uff01",en:"This is a classic pocket watch, don't break it!"},{id:"10120",cn:"\u7535\u6c60\u53ef\u4e0d\u80fd\u4e71\u6254\uff0c\u4f1a\u6c61\u67d3\u73af\u5883\u7684\uff01",en:"Batteries can not be thrown, will pollute the environment!"},{id:"10121",cn:"\u5171\u540c\u4fdd\u62a4\u73af\u5883\uff0c\u4e0d\u8981\u4e71\u6254\u7535\u6c60\u6c61\u67d3\u73af\u5883\uff01",en:"Together to protect the environment, do not throw the battery pollution environment!"},{id:"10122",cn:"\u563f\uff0c\u4f19\u8ba1\uff01\u5468\u672b\u6211\u4eec\u53bb\u559d\u4e00\u676f\u8fd9\u4e48\u6837\uff1f",en:"Hey, man!Let's go for a drink this weekend."},{id:"10123",cn:"\u5564\u9152\u3001\u97f3\u4e50\u548c\u597d\u73a9\u7684\u6e38\u620f\uff0c\u8fd8\u6709\u4ec0\u4e48\u6bd4\u8fd9\u66f4\u5feb\u4e50\uff1f",en:"Beer, Music and fun games, what could be happier than that?"},{id:"10124",cn:"\u5c1d\u5c1d\u6211\u4eb2\u624b\u505a\u7684\u997c\u5e72\u5427\uff01\u522b\u62d2\u7edd\u54df\uff01",en:"Try the biscuits I made myself! Don't refuse!"},{id:"10125",cn:"\u6912\u76d0\u5473\u9165\u997c\uff0c\u4f60\u4e00\u5b9a\u6ca1\u5403\u8fc7\u5427\uff01",en:"How do you feel, crispy cakes with salt and pepper flavor!"},{id:"10126",cn:"\u4efb\u52a11",en:"Mission 1"},{id:"10127",cn:"\u4efb\u52a12",en:"Mission 2"},{id:"10128",cn:"\u4efb\u52a13",en:"Mission 3"},{id:"10129",cn:"\u4efb\u52a14",en:"Mission 4"},{id:"10130",cn:"\u4efb\u52a15",en:"Mission 5"},{id:"10131",cn:"\u4efb\u52a16",en:"Mission 6"},{id:"10132",cn:"\u4efb\u52a17",en:"Mission 7"},{id:"10133",cn:"\u4efb\u52a18",en:"Mission 8"},{id:"10134",cn:"\u4efb\u52a19",en:"Mission 9"},{id:"10135",cn:"\u4efb\u52a110",en:"Mission 10"},{id:"10136",cn:"\u4efb\u52a111",en:"Mission 11"},{id:"10137",cn:"\u4efb\u52a112",en:"Mission 12"},{id:"10138",cn:"\u4efb\u52a113",en:"Mission 13"},{id:"10139",cn:"\u4efb\u52a114",en:"Mission 14"},{id:"10140",cn:"\u4efb\u52a115",en:"Mission 15"},{id:"10141",cn:"\u4efb\u52a116",en:"Mission 16"},{id:"10142",cn:"\u4efb\u52a117",en:"Mission 17"},{id:"10143",cn:"\u4efb\u52a118",en:"Mission 18"},{id:"10144",cn:"\u4efb\u52a119",en:"Mission 19"},{id:"10145",cn:"\u4efb\u52a120",en:"Mission 20"},{id:"10146",cn:"\u6e05\u9664\u8ba1\u5212\u2160",en:"Carnage\u2160"},{id:"10147",cn:"\u6e05\u9664\u8ba1\u5212\u2161",en:"Carnage\u2161"},{id:"10148",cn:"\u6e05\u9664\u8ba1\u5212\u2162",en:"Carnage\u2162"},{id:"10149",cn:"\u6e05\u9664\u8ba1\u5212\u2163",en:"Carnage\u2163"},{id:"10150",cn:"\u6e05\u9664\u8ba1\u5212\u2164",en:"Carnage\u2164"},{id:"10151",cn:"\u5728\u4e00\u5c40\u6e38\u620f\u4e2d\u6253\u7206%d\u4e2a\u7403\u3002",en:"Destroy 200 balls in one race."},{id:"10152",cn:"\u5c04\u51fb\u5927\u5e08\u2160",en:"Shoot Master\u2160"},{id:"10153",cn:"\u5c04\u51fb\u5927\u5e08\u2161",en:"Shoot Master\u2161"},{id:"10154",cn:"\u5c04\u51fb\u5927\u5e08\u2162",en:"Shoot Master\u2162"},{id:"10155",cn:"\u5c04\u51fb\u5927\u5e08\u2163",en:"Shoot Master\u2163"},{id:"10156",cn:"\u5c04\u51fb\u5927\u5e08\u2164",en:"Shoot Master\u2164"},{id:"10157",cn:"\u5728\u4e00\u5c40\u5185\u83b7\u5f97%d\u5206\u3002",en:"Get %d points in one inning!"},{id:"10158",cn:"\u80c6\u5927\u5984\u4e3a\u2160",en:"Daredevil\u2160"},{id:"10159",cn:"\u80c6\u5927\u5984\u4e3a\u2161",en:"Daredevil\u2161"},{id:"10160",cn:"\u751f\u547d\u4f4e\u4e8e\u4e00\u534a\u65f6\uff0c\u6253\u7206%d\u4e2a\u7403\u3002",en:"Destroy 30 balls while below half health in one race."},{id:"10161",cn:"\u6c38\u4e0d\u8a00\u5f03\u2160",en:"Keep Alive\u2160"},{id:"10162",cn:"\u6c38\u4e0d\u8a00\u5f03\u2161",en:"Keep Alive\u2161"},{id:"10163",cn:"\u6c38\u4e0d\u8a00\u5f03\u2162",en:"Keep Alive\u2162"},{id:"10164",cn:"\u5728\u4e00\u5c40\u5185\u575a\u6301%d\u79d2\u3002",en:"%d seconds to live in one inning."},{id:"10165",cn:"\u6d74\u706b\u91cd\u751f\u2160",en:"Phoenix\u2160"},{id:"10166",cn:"\u6d74\u706b\u91cd\u751f\u2161",en:"Phoenix\u2161"},{id:"10167",cn:"\u6d74\u706b\u91cd\u751f\u2162",en:"Phoenix\u2162"},{id:"10168",cn:"\u63a5\u5173%d\u6b21\u3002",en:"Continue %d times."},{id:"10169",cn:"\u5bcc\u8c6a\u2160",en:"Rich\u2160"},{id:"10170",cn:"\u5bcc\u8c6a\u2161",en:"Rich\u2161"},{id:"10171",cn:"\u5bcc\u8c6a\u2162",en:"Rich\u2162"},{id:"10172",cn:"\u5bcc\u8c6a\u2163",en:"Rich\u2163"},{id:"10173",cn:"\u5bcc\u8c6a\u2164",en:"Rich\u2164"},{id:"10174",cn:"\u7d2f\u8ba1\u83b7\u5f97%d\u786c\u5e01\u3002",en:"Earn %d coins!"},{id:"10175",cn:"\u52c7\u5f80\u76f4\u524d\u2160",en:"More High Level\u2160"},{id:"10176",cn:"\u52c7\u5f80\u76f4\u524d\u2161",en:"More High Level\u2161"},{id:"10177",cn:"\u52c7\u5f80\u76f4\u524d\u2162",en:"More High Level\u2162"},{id:"10178",cn:"\u901a\u8fc7%d\u6b21\u5173\u5361\u3002",en:"Complete %d levels"},{id:"10179",cn:"\u98de\u884c\u6740\u624b\u2160",en:"Aircraft\u2160"},{id:"10180",cn:"\u98de\u884c\u6740\u624b\u2161",en:"Aircraft\u2161"},{id:"10181",cn:"\u98de\u884c\u6740\u624b\u2162",en:"Aircraft\u2162"},{id:"10182",cn:"\u7528\u98de\u884c\u5668\u6253\u7206%d\u4e2a\u7403\u3002",en:"Shoot %d balls with a aircraft."},{id:"10183",cn:"\u590d\u6d3b",en:"Second\nChance?"},{id:"10184",cn:"\u60a8\u83b7\u5f97\u4e86\uff01",en:"Progress!"},{id:"10185",cn:"\u5173\u5361\u8fdb\u5ea6",en:"Stage Completed"},{id:"10186",cn:"\u4efb\u52a1\uff01",en:"Mission!"},{id:"10187",cn:"\u6536\u96c6:",en:"Collected:"},{id:"10188",cn:"\u592a\u68d2\u4e86\uff01",en:"OH YEAH!"},{id:"10189",cn:"\u5269\u4f59\u65f6\u95f4\uff1a",en:"Time Left:"},{id:"10190",cn:"\u5956\u52b1",en:"REWARD"},{id:"10191",cn:"\u89c2\u770b\u6b64\u7b80\u77ed\u89c6\u9891\uff0c\u4ece\u800c\u8ba9\u4f60\u53d8\u5f97\u5bcc\u6709\uff01",en:"I'll make you rich for watching a short video!"},{id:"10192",cn:"\u7b80\u5355\uff01",en:"EASY!"},{id:"10193",cn:"\u89c2\u770b\u6b64\u7b80\u77ed\u89c6\u9891\uff0c\u5373\u53ef\u83b7\u5f97\u989d\u5916\u7684\u5f3a\u529b\u9053\u5177\uff01",en:"Watch this short video to earn these extra boosts!"},{id:"10194",cn:"\u54c7\uff01",en:"WOW!"},{id:"10195",cn:"\u89c2\u770b\u6b64\u7b80\u77ed\u89c6\u9891\uff0c\u5373\u53ef\u83b7\u5f97\u989d\u5916\u5956\u52b1\uff01",en:"Watch this short video to earn these extra rewards!"},{id:"10196",cn:"\u975e\u5e38\u68d2\uff01",en:"NICE!"},{id:"10197",cn:"\u5546\u5e97",en:"SHOP"},{id:"10198",cn:"\u563f! \u58eb\u5175\uff0c\u4f60\u9700\u8981\u4ec0\u4e48\uff1f",en:"Hey! What do you need, soldier?"},{id:"10199",cn:"\u63d0\u4f9b\u7ed3\u675f\uff1a",en:"OFFER ENDS IN:"},{id:"10200",cn:"\u8fd9\u662f\u4f60\u4e0d\u80fd\u62d2\u7edd\u7684\u4f18\u60e0\uff01\n\u8db3\u591f\u7684\u94b1\u6765\u8d2d\u4e70\u65b0\u7684\u5927\u70ae\u3001\u82af\u7247\u548c\u5347\u7ea7\uff01",en:"This is offer you can't refuse. \nEnough loot to pay for new cannons,\nchip and upgrades!"},{id:"10201",cn:"\u65e0\u4eba\u673a\u4f18\u60e0",en:"DRONE OFFER"},{id:"10202",cn:"\u8db3\u591f\u7684\u82af\u7247\u5f00\u542f\u4e0b\u4e00\u4e2a\u98de\u884c\u5668\uff0c\u800c\u4e14\u8fd8\u6709\u5927\u91cf\u786c\u5e01\u53ef\u4ee5\u7528\uff01",en:"Enough chip to open your next Drone Box! And some coins!"},{id:"10203",cn:"\u82af\u7247\u7279\u60e0",en:"CHIP SPECIALS"},{id:"10204",cn:"\u82af\u7247\u7528\u4e8e\u7814\u53d1\uff0c\u60a8\u5c06\u83b7\u5f97\u66f4\u591a\u98de\u884c\u5668\uff01",en:"Chip for development, to get more technology power!"},{id:"10205",cn:"\u786c\u5e01\u6536\u5165\u7ffb\u500d",en:"MAKE THE COIN RAIN"},{id:"10206",cn:"\u6c38\u4e45\u63d0\u5347\u4f60\u4ece\u6240\u6709\u6765\u6e90\u83b7\u5f97\u7684\u786c\u5e01\u52a0\u500d\u3002\n2\u500d\u6536\u5165\uff0c2\u500d\u5feb\u4e50\uff01",en:"Permanent boost to double the Coin you get from all sources.\n2x your Coins, 2x your fun!"},{id:"10207",cn:"\u5c11\u6570\u5b9d\u77f3",en:"FEW GEMS"},{id:"10208",cn:"\u4e00\u4e9b\u5b9d\u77f3",en:"SOME GEMS"},{id:"10209",cn:"\u4e00\u7bb1\u5b9d\u77f3",en:"BOX OF GEMS"},{id:"10210",cn:"\u5927\u7bb1\u5b9d\u77f3",en:"LARGE BOX GEMS"},{id:"10211",cn:"\u6ee1\u7bb1\u5b9d\u77f3",en:"FULL BOX GEMS"},{id:"10212",cn:"\u6ee1\u5c4b\u5b9d\u77f3",en:"FULL HOUSE GEMS"},{id:"10213",cn:"\u4e00\u4e9b\u786c\u5e01",en:"SOME COIN"},{id:"10214",cn:"\u5927\u7bb1\u786c\u5e01",en:"BOX OF COIN"},{id:"10215",cn:"\u6ee1\u7bb1\u786c\u5e01",en:"FULL BOX COIN"},{id:"10216",cn:"\u6539\u88c5\u5e97\u53ef\u4ee5\u63d0\u5347\u4f60\u7684\u6b66\u5668\u7b49\u7ea7\uff01",en:"Modified shop can boost your weapon firepower!"},{id:"10217",cn:"\u4f60\u5df2\u7ecf\u6709\u8db3\u591f\u7684\u82af\u7247\u53ef\u4ee5\u5f00\u542f\u4e0b\u4e00\u4e2a\u65e0\u4eba\u673a\u5b9d\u7bb1\uff01",en:"You already have enough chips to open the next drone box!"},{id:"10218",cn:"\u5b8c\u6210\u4efb\u52a1\u83b7\u5f97\u9ad8\u989d\u5956\u52b1\uff01",en:"Get high rewards for completing quests!"},{id:"10219",cn:"\u89e3\u9501\u201c\u66b4\u98ce\u96e8\u201d",en:"Unlock'Tempest'"},{id:"10220",cn:"\u89e3\u9501\u201c\u6fc0\u5149\u5207\u5272\u201d",en:"Unlock'Laser Cutting'"},{id:"10221",cn:"\u89e3\u9501\u201c\u706b\u529b\u5168\u5f00\u201d",en:"Unlock'Full Fire'"},{id:"10222",cn:"\u4e0b\u6b21\u5de5\u4f5c\u65f6\u95f4",en:"Job available in\u2026"},{id:"10223",cn:"\u8d2d\u4e70\u5546\u54c1\uff1f",en:"Purchase?"},{id:"10224",cn:"\u4f60\u65e0\u6cd5\u627f\u62c5\u6b64\u5546\u54c1\u3002",en:"You can't afford this item."},{id:"10225",cn:"\u524d\u5f80\u5546\u5e97",en:"Go to shop"},{id:"10226",cn:"\u4f60\u771f\u68d2\uff01",en:"you're Awesome!"},{id:"10227",cn:"\u8c22\u8c22\u4f60\u73a9\u6211\u7684\u6e38\u620f\uff01",en:"Thank you for playing my game!"},{id:"10228",cn:"\u4f60\u600e\u4e48\u770b\u5f85\u5b83\u5462\uff1f",en:"What do you think about it?"},{id:"10229",cn:"\u5b83\u5f88\u68d2\uff0c\u6211\u4f1a\u8bc1\u660e\u8fd9\u4e00\u70b9\uff01",en:"It's Great and I'll prove it!"},{id:"10230",cn:"\u5b83\u7cdf\u900f\u4e86\uff0c\u6211\u4e0d\u5728\u4e4e....",en:"I don't care...."},{id:"10231",cn:"\u5173\u5361:%d",en:"LEVEL:%d"},{id:"10232",cn:"\u89e3\u9501",en:"UNLOCK"}],window.i18n.languages.languageArr=["en","cn"],cc._RF.pop()},{}],"polyglot.min":[function(e,t,n){"use strict";cc._RF.push(t,"e26fd9yy65A4q3/JkpVnFYg","polyglot.min");var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(e,a){"function"==typeof define&&define.amd?define([],function(){return a(e)}):"object"==(void 0===n?"undefined":o(n))?t.exports=a(e):e.Polyglot=a(e)})(void 0,function(e){function t(e){e=e||{},this.phrases={},this.extend(e.phrases||{}),this.currentLocale=e.locale||"en",this.allowMissing=!!e.allowMissing,this.warn=e.warn||i}function n(e,t,n){var o,i;return null!=n&&e?o=function(e){return e.replace(/^\s+|\s+$/g,"")}((i=e.split(r))[a(t,n)]||i[0]):o=e,o}function a(e,t){return l[function(e){var t=function(e){var t,n,o,a={};for(t in e)if(e.hasOwnProperty(t))for(o in n=e[t])a[n[o]]=t;return a}(s);return t[e]||t.en}(e)](t)}function i(t){e.console&&e.console.warn&&e.console.warn("WARNING: "+t)}t.VERSION="0.4.3",t.prototype.locale=function(e){return e&&(this.currentLocale=e),this.currentLocale},t.prototype.extend=function(e,t){var n;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],t&&(a=t+"."+a),"object"==(void 0===n?"undefined":o(n))?this.extend(n,a):this.phrases[a]=n)},t.prototype.clear=function(){this.phrases={}},t.prototype.replace=function(e){this.clear(),this.extend(e)},t.prototype.t=function(e,t){var o,a;return"number"==typeof(t=null==t?{}:t)&&(t={smart_count:t}),"string"==typeof this.phrases[e]?o=this.phrases[e]:"string"==typeof t._?o=t._:this.allowMissing?o=e:(this.warn('Missing translation for key: "'+e+'"'),a=e),"string"==typeof o&&(t=function(e){var t={};for(var n in e)t[n]=e[n];return t}(t),a=function(e,t){for(var n in t)"_"!==n&&t.hasOwnProperty(n)&&(e=e.replace(new RegExp("%\\{"+n+"\\}","g"),t[n]));return e}(a=n(o,this.currentLocale,t.smart_count),t)),a},t.prototype.has=function(e){return e in this.phrases};var r="||||",l={chinese:function(e){return 0},german:function(e){return 1!==e?1:0},french:function(e){return e>1?1:0},russian:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},czech:function(e){return 1===e?0:e>=2&&e<=4?1:2},polish:function(e){return 1===e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},icelandic:function(e){return e%10!=1||e%100==11?1:0}},s={chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru"],czech:["cs"],polish:["pl"],icelandic:["is"]};return t}),cc._RF.pop()},{}],prefab90014:[function(e,t,n){"use strict";cc._RF.push(t,"0e47eIAYtxN55luQEDpjoGH","prefab90014"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani=null,t}return __extends(t,e),t.prototype.start=function(){this.ani.playAdditive("90014_1clip"),this.ani.playAdditive("90014clip")},__decorate([i(cc.Animation)],t.prototype,"ani",void 0),t=__decorate([a],t)}(cc.Component);n.default=r,cc._RF.pop()},{}],"use_v2.0.x_cc.Toggle_event":[function(e,t,n){"use strict";cc._RF.push(t,"58d42qpaD9ADZ0pn/BdbSpy","use_v2.0.x_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_check=!0),cc._RF.pop()},{}]},{},["Config","ColorMaterial","DateUtils","Global","GlobalFun","LocalStorage","QuadTree","Secret","ShaderUtils","StringUtils","TimeCount","AdsGroupController","AdsGroupPlatformTool","AdsQueue","AdsSetAndScene","AdsUnit","BasePanel","CheckBox","EasyGetCompleteClass","MyLable","BallManager","EffectManager","GuideManager","HttpManager","LoadManager","MissionManger","MyRoleDataManager","NodePoolMananger","PanelManager","SDKManager","SoundManager","TableManager","UiAniManager","Lancher","Connon","ConnonBase","FunnelConnon","Game","GameUI","SubConnon","BallPrefab","BulletBase","BulletBoom","BulletFollow","BulletLaser","BulletPrefab","BulletThrough","CoinPrefab","FlyRewardPrefab","PropPrefab","ShowPrefab","prefab90014","AircraftTable","BulletTable","ConnonTable","GuideTable","MapLevelTable","MissionTable","PropTable","ScenceTable","ShopTable","WorkShopTable","AircraftItem","AircraftPanel","CompletePanel","CompleteRewardPanel","FiveStarPanel","FreeConnonItem","GoShopPanel","GuidePanel","LatticeProgress","ListView","BossLevelBtn","MapItemPrefab","MapPanel","NormalLevelBtn","MissionItem","MissionPanel","RewardItem","PausePanel","RefitItem","RefitShopPanel","ResurgenceUi","SetPanel","GiftItem","ShopItem","ShopPanel","WorkItem","WorkShopPanel","use_v2.0.x_cc.Toggle_event","colorChange","gray.frag","gray.vert","languageText","LanguageData","LocalizedLabel","LocalizedSprite","SpriteFrameSet","polyglot.min"]);